function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}!function($){"use strict";function functionName(fn){if(void 0===Function.prototype.name){var funcNameRegex=/function\s([^(]{1,})\(/,results=funcNameRegex.exec(fn.toString());return results&&results.length>1?results[1].trim():""}return void 0===fn.prototype?fn.constructor.name:fn.prototype.constructor.name}function parseValue(str){return!!/true/.test(str)||!/false/.test(str)&&(isNaN(1*str)?str:parseFloat(str))}function hyphenate(str){return str.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var FOUNDATION_VERSION="6.2.1",Foundation={version:FOUNDATION_VERSION,_plugins:{},_uuids:[],rtl:function(){return"rtl"===$("html").attr("dir")},plugin:function(plugin,name){var className=name||functionName(plugin),attrName=hyphenate(className);this._plugins[attrName]=this[className]=plugin},registerPlugin:function(plugin,name){var pluginName=name?hyphenate(name):functionName(plugin.constructor).toLowerCase();plugin.uuid=this.GetYoDigits(6,pluginName),plugin.$element.attr("data-"+pluginName)||plugin.$element.attr("data-"+pluginName,plugin.uuid),plugin.$element.data("zfPlugin")||plugin.$element.data("zfPlugin",plugin),plugin.$element.trigger("init.zf."+pluginName),this._uuids.push(plugin.uuid)},unregisterPlugin:function(plugin){var pluginName=hyphenate(functionName(plugin.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(plugin.uuid),1),plugin.$element.removeAttr("data-"+pluginName).removeData("zfPlugin").trigger("destroyed.zf."+pluginName);for(var prop in plugin)plugin[prop]=null},reInit:function(plugins){var isJQ=plugins instanceof $;try{if(isJQ)plugins.each(function(){$(this).data("zfPlugin")._init()});else{var type=typeof plugins,_this=this,fns={object:function(plgs){plgs.forEach(function(p){p=hyphenate(p),$("[data-"+p+"]").foundation("_init")})},string:function(){plugins=hyphenate(plugins),$("[data-"+plugins+"]").foundation("_init")},undefined:function(){this.object(Object.keys(_this._plugins))}};fns[type](plugins)}}catch(err){}finally{return plugins}},GetYoDigits:function(length,namespace){return length=length||6,Math.round(Math.pow(36,length+1)-Math.random()*Math.pow(36,length)).toString(36).slice(1)+(namespace?"-"+namespace:"")},reflow:function(elem,plugins){"undefined"==typeof plugins?plugins=Object.keys(this._plugins):"string"==typeof plugins&&(plugins=[plugins]);var _this=this;$.each(plugins,function(i,name){var plugin=_this._plugins[name],$elem=$(elem).find("[data-"+name+"]").addBack("[data-"+name+"]");$elem.each(function(){var $el=$(this),opts={};if(!$el.data("zfPlugin")){if($el.attr("data-options")){$el.attr("data-options").split(";").forEach(function(e,i){var opt=e.split(":").map(function(el){return el.trim()});opt[0]&&(opts[opt[0]]=parseValue(opt[1]))})}try{$el.data("zfPlugin",new plugin($(this),opts))}catch(er){}finally{return}}})})},getFnName:functionName,transitionend:function($elem){var end,transitions={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},elem=document.createElement("div");for(var t in transitions)"undefined"!=typeof elem.style[t]&&(end=transitions[t]);return end?end:(end=setTimeout(function(){$elem.triggerHandler("transitionend",[$elem])},1),"transitionend")}};Foundation.util={throttle:function(func,delay){var timer=null;return function(){var context=this,args=arguments;null===timer&&(timer=setTimeout(function(){func.apply(context,args),timer=null},delay))}}};var foundation=function(method){var type=typeof method,$meta=$("meta.foundation-mq"),$noJS=$(".no-js");if($meta.length||$('<meta class="foundation-mq">').appendTo(document.head),$noJS.length&&$noJS.removeClass("no-js"),"undefined"===type)Foundation.MediaQuery._init(),Foundation.reflow(this);else{if("string"!==type)throw new TypeError("We're sorry, "+type+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var args=Array.prototype.slice.call(arguments,1),plugClass=this.data("zfPlugin");if(void 0===plugClass||void 0===plugClass[method])throw new ReferenceError("We're sorry, '"+method+"' is not an available method for "+(plugClass?functionName(plugClass):"this element")+".");1===this.length?plugClass[method].apply(plugClass,args):this.each(function(i,el){plugClass[method].apply($(el).data("zfPlugin"),args)})}return this};window.Foundation=Foundation,$.fn.foundation=foundation,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime)},nextTime-now)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(fNOP.prototype=this.prototype),fBound.prototype=new fNOP,fBound})}(jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){var Tabs=function(){function Tabs(element,options){_classCallCheck(this,Tabs),this.$element=element,this.options=$.extend({},Tabs.defaults,this.$element.data(),options),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(Tabs,[{key:"_init",value:function(){var _this=this;if(this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=$('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var $elem=$(this),$link=$elem.find("a"),isActive=$elem.hasClass("is-active"),hash=$link[0].hash.slice(1),linkId=$link[0].id?$link[0].id:hash+"-label",$tabContent=$("#"+hash);$elem.attr({role:"presentation"}),$link.attr({role:"tab","aria-controls":hash,"aria-selected":isActive,id:linkId}),$tabContent.attr({role:"tabpanel","aria-hidden":!isActive,"aria-labelledby":linkId}),isActive&&_this.options.autoFocus&&$link.focus()}),this.options.matchHeight){var $images=this.$tabContent.find("img");$images.length?Foundation.onImagesLoaded($images,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this.options.matchHeight&&$(window).on("changed.zf.mediaquery",this._setHeight.bind(this))}},{key:"_addClickHandler",value:function(){var _this=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("is-active")||_this._handleTabChange($(this))})}},{key:"_addKeyHandler",value:function(){var _this=this;_this.$element.find("li:first-of-type"),_this.$element.find("li:last-of-type");this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(e){if(9!==e.which){e.stopPropagation(),e.preventDefault();var $prevElement,$nextElement,$element=$(this),$elements=$element.parent("ul").children("li");$elements.each(function(i){if($(this).is($element))return void(_this.options.wrapOnKeys?($prevElement=0===i?$elements.last():$elements.eq(i-1),$nextElement=i===$elements.length-1?$elements.first():$elements.eq(i+1)):($prevElement=$elements.eq(Math.max(0,i-1)),$nextElement=$elements.eq(Math.min(i+1,$elements.length-1))))}),Foundation.Keyboard.handleKey(e,"Tabs",{open:function(){$element.find('[role="tab"]').focus(),_this._handleTabChange($element)},previous:function(){$prevElement.find('[role="tab"]').focus(),_this._handleTabChange($prevElement)},next:function(){$nextElement.find('[role="tab"]').focus(),_this._handleTabChange($nextElement)}})}})}},{key:"_handleTabChange",value:function($target){var $tabLink=$target.find('[role="tab"]'),hash=$tabLink[0].hash,$targetContent=this.$tabContent.find(hash),$oldTab=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"});$("#"+$oldTab.attr("aria-controls")).removeClass("is-active").attr({"aria-hidden":"true"}),$target.addClass("is-active"),$tabLink.attr({"aria-selected":"true"}),$targetContent.addClass("is-active").attr({"aria-hidden":"false"}),this.$element.trigger("change.zf.tabs",[$target])}},{key:"selectTab",value:function(elem){var idStr;idStr="object"==typeof elem?elem[0].id:elem,idStr.indexOf("#")<0&&(idStr="#"+idStr);var $target=this.$tabTitles.find('[href="'+idStr+'"]').parent("."+this.options.linkClass);this._handleTabChange($target)}},{key:"_setHeight",value:function(){var max=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var panel=$(this),isActive=panel.hasClass("is-active");isActive||panel.css({visibility:"hidden",display:"block"});var temp=this.getBoundingClientRect().height;isActive||panel.css({visibility:"",display:""}),max=temp>max?temp:max}).css("height",max+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&$(window).off("changed.zf.mediaquery"),Foundation.unregisterPlugin(this)}}]),Tabs}();Tabs.defaults={autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,linkClass:"tabs-title",panelClass:"tabs-panel"},Foundation.plugin(Tabs,"Tabs")}(jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){var AccordionMenu=function(){function AccordionMenu(element,options){_classCallCheck(this,AccordionMenu),this.$element=element,this.options=$.extend({},AccordionMenu.defaults,this.$element.data(),options),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll",TAB:"down",SHIFT_TAB:"up"})}return _createClass(AccordionMenu,[{key:"_init",value:function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tablist","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var linkId=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),$elem=$(this),$sub=$elem.children("[data-submenu]"),subId=$sub[0].id||Foundation.GetYoDigits(6,"acc-menu"),isActive=$sub.hasClass("is-active");$elem.attr({"aria-controls":subId,"aria-expanded":isActive,role:"tab",id:linkId}),$sub.attr({"aria-labelledby":linkId,"aria-hidden":!isActive,role:"tabpanel",id:subId})});var initPanes=this.$element.find(".is-active");if(initPanes.length){var _this=this;initPanes.each(function(){_this.down($(this))})}this._events()}},{key:"_events",value:function(){var _this=this;this.$element.find("li").each(function(){var $submenu=$(this).children("[data-submenu]");$submenu.length&&$(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(e){e.preventDefault(),_this.toggle($submenu)})}).on("keydown.zf.accordionmenu",function(e){var $prevElement,$nextElement,$element=$(this),$elements=$element.parent("ul").children("li"),$target=$element.children("[data-submenu]");$elements.each(function(i){if($(this).is($element))return $prevElement=$elements.eq(Math.max(0,i-1)).find("a").first(),$nextElement=$elements.eq(Math.min(i+1,$elements.length-1)).find("a").first(),$(this).children("[data-submenu]:visible").length&&($nextElement=$element.find("li:first-child").find("a").first()),$(this).is(":first-child")?$prevElement=$element.parents("li").first().find("a").first():$prevElement.children("[data-submenu]:visible").length&&($prevElement=$prevElement.find("li:last-child").find("a").first()),void($(this).is(":last-child")&&($nextElement=$element.parents("li").first().next("li").find("a").first()))}),Foundation.Keyboard.handleKey(e,"AccordionMenu",{open:function(){$target.is(":hidden")&&(_this.down($target),$target.find("li").first().find("a").first().focus())},close:function(){$target.length&&!$target.is(":hidden")?_this.up($target):$element.parent("[data-submenu]").length&&(_this.up($element.parent("[data-submenu]")),$element.parents("li").first().find("a").first().focus())},up:function(){$prevElement.attr("tabindex",-1).focus(),e.preventDefault()},down:function(){$nextElement.attr("tabindex",-1).focus(),e.preventDefault()},toggle:function(){$element.children("[data-submenu]").length&&_this.toggle($element.children("[data-submenu]"))},closeAll:function(){_this.hideAll()},handled:function(){e.stopImmediatePropagation()}})})}},{key:"hideAll",value:function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed)}},{key:"toggle",value:function($target){$target.is(":animated")||($target.is(":hidden")?this.down($target):this.up($target))}},{key:"down",value:function($target){var _this=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not($target.parentsUntil(this.$element).add($target))),$target.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),Foundation.Move(this.options.slideSpeed,$target,function(){$target.slideDown(_this.options.slideSpeed,function(){_this.$element.trigger("down.zf.accordionMenu",[$target])})})}},{key:"up",value:function($target){var _this=this;Foundation.Move(this.options.slideSpeed,$target,function(){$target.slideUp(_this.options.slideSpeed,function(){_this.$element.trigger("up.zf.accordionMenu",[$target])})});var $menus=$target.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0);$menus.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)}},{key:"destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)}}]),AccordionMenu}();AccordionMenu.defaults={slideSpeed:250,multiOpen:!0},Foundation.plugin(AccordionMenu,"AccordionMenu")}(jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){function iPhoneSniff(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}var Reveal=function(){function Reveal(element,options){_classCallCheck(this,Reveal),this.$element=element,this.options=$.extend({},Reveal.defaults,this.$element.data(),options),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}return _createClass(Reveal,[{key:"_init",value:function(){if(this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isiOS=iPhoneSniff(),this.isiOS&&this.$element.addClass("is-ios"),this.$anchor=$($('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.length){var anchorId=this.$anchor[0].id||Foundation.GetYoDigits(6,"reveal");this.$anchor.attr({"aria-controls":this.id,id:anchorId,"aria-haspopup":!0,tabindex:0}),this.$element.attr({"aria-labelledby":anchorId})}(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo($("body")),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&$(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(id){var $overlay=$("<div></div>").addClass("reveal-overlay").attr({tabindex:-1,"aria-hidden":!0}).appendTo("body");return $overlay}},{key:"_updatePosition",value:function(){var left,top,width=this.$element.outerWidth(),outerWidth=$(window).width(),height=this.$element.outerHeight(),outerHeight=$(window).height();left="auto"===this.options.hOffset?parseInt((outerWidth-width)/2,10):parseInt(this.options.hOffset,10),top="auto"===this.options.vOffset?height>outerHeight?parseInt(Math.min(100,outerHeight/10),10):parseInt((outerHeight-height)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:top+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:left+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var _this=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){_this._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(e){13!==e.which&&32!==e.which||(e.stopPropagation(),e.preventDefault(),_this.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(e){e.target===_this.$element[0]||$.contains(_this.$element[0],e.target)||_this.close()}),this.options.deepLink&&$(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(e){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){var _this2=this;if(this.options.deepLink){var hash="#"+this.id;window.history.pushState?window.history.pushState(null,null,hash):window.location.hash=hash}if(this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&this.$overlay.css({visibility:""}).hide(),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id),this.options.animationIn?(this.options.overlay&&Foundation.Motion.animateIn(this.$overlay,"fade-in"),Foundation.Motion.animateIn(this.$element,this.options.animationIn,function(){_this2.focusableElements=Foundation.Keyboard.findFocusable(_this2.$element)})):(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),this.$element.trigger("open.zf.reveal"),this.isiOS){var scrollPos=window.pageYOffset;$("html, body").addClass("is-reveal-open").scrollTop(scrollPos)}else $("body").addClass("is-reveal-open");$("body").addClass("is-reveal-open").attr("aria-hidden",!(!this.options.overlay&&!this.options.fullScreen)),setTimeout(function(){_this2._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var _this=this;this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||$("body").on("click.zf.reveal",function(e){e.target===_this.$element[0]||$.contains(_this.$element[0],e.target)||_this.close()}),this.options.closeOnEsc&&$(window).on("keydown.zf.reveal",function(e){Foundation.Keyboard.handleKey(e,"Reveal",{close:function(){_this.options.closeOnEsc&&(_this.close(),_this.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(e){var $target=$(this);Foundation.Keyboard.handleKey(e,"Reveal",{tab_forward:function(){_this.$element.find(":focus").is(_this.focusableElements.eq(-1))&&(_this.focusableElements.eq(0).focus(),e.preventDefault()),0===_this.focusableElements.length&&e.preventDefault()},tab_backward:function(){(_this.$element.find(":focus").is(_this.focusableElements.eq(0))||_this.$element.is(":focus"))&&(_this.focusableElements.eq(-1).focus(),e.preventDefault()),0===_this.focusableElements.length&&e.preventDefault()},open:function(){_this.$element.find(":focus").is(_this.$element.find("[data-close]"))?setTimeout(function(){_this.$anchor.focus()},1):$target.is(_this.focusableElements)&&_this.open()},close:function(){_this.options.closeOnEsc&&(_this.close(),_this.$anchor.focus())}})})}},{key:"close",value:function(){function finishUp(){_this.isiOS?$("html, body").removeClass("is-reveal-open"):$("body").removeClass("is-reveal-open"),$("body").attr({"aria-hidden":!1,tabindex:""}),_this.$element.attr("aria-hidden",!0),_this.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var _this=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",finishUp):finishUp(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,finishUp):finishUp(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&$(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&$("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,_this.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.pathname):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo($("body")),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),$(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),Reveal}();Reveal.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1},Foundation.plugin(Reveal,"Reveal")}(jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){var Orbit=function(){function Orbit(element,options){_classCallCheck(this,Orbit),this.$element=element,this.options=$.extend({},Orbit.defaults,this.$element.data(),options),this._init(),Foundation.registerPlugin(this,"Orbit"),Foundation.Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}return _createClass(Orbit,[{key:"_init",value:function(){this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var $images=this.$element.find("img"),initActive=this.$slides.filter(".is-active");initActive.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),$images.length?Foundation.onImagesLoaded($images,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}},{key:"geoSync",value:function(){var _this=this;this.timer=new Foundation.Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){_this.changeSlide(!0)}),this.timer.start()}},{key:"_prepareForOrbit",value:function(){var _this=this;this._setWrapperHeight(function(max){_this._setSlideHeight(max)})}},{key:"_setWrapperHeight",value:function(cb){var temp,max=0,counter=0;this.$slides.each(function(){temp=this.getBoundingClientRect().height,$(this).attr("data-slide",counter),counter&&$(this).css({position:"relative",display:"none"}),max=temp>max?temp:max,counter++}),counter===this.$slides.length&&(this.$wrapper.css({height:max}),cb(max))}},{key:"_setSlideHeight",value:function(height){this.$slides.each(function(){$(this).css("max-height",height)})}},{key:"_events",value:function(){var _this=this;if(this.$slides.length>1){if(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(e){e.preventDefault(),_this.changeSlide(!0)}).on("swiperight.zf.orbit",function(e){e.preventDefault(),_this.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){_this.$element.data("clickedOn",!_this.$element.data("clickedOn")),_this.timer[_this.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",function(){_this.timer.pause()}).on("mouseleave.zf.orbit",function(){_this.$element.data("clickedOn")||_this.timer.start()})),this.options.navButtons){var $controls=this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass);$controls.attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(e){e.preventDefault(),_this.changeSlide($(this).hasClass(_this.options.nextClass))})}this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var idx=$(this).data("slide"),ltr=idx>_this.$slides.filter(".is-active").data("slide"),$slide=_this.$slides.eq(idx);_this.changeSlide(ltr,$slide,idx)}),this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(e){Foundation.Keyboard.handleKey(e,"Orbit",{next:function(){_this.changeSlide(!0)},previous:function(){_this.changeSlide(!1)},handled:function(){$(e.target).is(_this.$bullets)&&_this.$bullets.filter(".is-active").focus()}})})}}},{key:"changeSlide",value:function(isLTR,chosenSlide,idx){var $curSlide=this.$slides.filter(".is-active").eq(0);if(/mui/g.test($curSlide[0].className))return!1;var $newSlide,$firstSlide=this.$slides.first(),$lastSlide=this.$slides.last(),dirIn=isLTR?"Right":"Left",dirOut=isLTR?"Left":"Right",_this=this;$newSlide=chosenSlide?chosenSlide:isLTR?this.options.infiniteWrap?$curSlide.next("."+this.options.slideClass).length?$curSlide.next("."+this.options.slideClass):$firstSlide:$curSlide.next("."+this.options.slideClass):this.options.infiniteWrap?$curSlide.prev("."+this.options.slideClass).length?$curSlide.prev("."+this.options.slideClass):$lastSlide:$curSlide.prev("."+this.options.slideClass),$newSlide.length&&(this.options.bullets&&(idx=idx||this.$slides.index($newSlide),this._updateBullets(idx)),this.options.useMUI?(Foundation.Motion.animateIn($newSlide.addClass("is-active").css({position:"absolute",top:0}),this.options["animInFrom"+dirIn],function(){$newSlide.css({position:"relative",display:"block"}).attr("aria-live","polite")}),Foundation.Motion.animateOut($curSlide.removeClass("is-active"),this.options["animOutTo"+dirOut],function(){$curSlide.removeAttr("aria-live"),_this.options.autoPlay&&!_this.timer.isPaused&&_this.timer.restart()})):($curSlide.removeClass("is-active is-in").removeAttr("aria-live").hide(),$newSlide.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[$newSlide]))}},{key:"_updateBullets",value:function(idx){var $oldBullet=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur(),span=$oldBullet.find("span:last").detach();this.$bullets.eq(idx).addClass("is-active").append(span)}},{key:"destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide(),Foundation.unregisterPlugin(this)}}]),Orbit}();Orbit.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0},Foundation.plugin(Orbit,"Orbit")}(jQuery),!function($){function getKeyCodes(kcs){var k={};for(var kc in kcs)k[kcs[kc]]=kcs[kc];return k}var keyCodes={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},commands={},Keyboard={keys:getKeyCodes(keyCodes),parseKey:function(event){var key=keyCodes[event.which||event.keyCode]||String.fromCharCode(event.which).toUpperCase();return event.shiftKey&&(key="SHIFT_"+key),event.ctrlKey&&(key="CTRL_"+key),event.altKey&&(key="ALT_"+key),key},handleKey:function(event,component,functions){var cmds,command,fn,commandList=commands[component],keyCode=this.parseKey(event);commandList&&(cmds="undefined"==typeof commandList.ltr?commandList:Foundation.rtl()?$.extend({},commandList.ltr,commandList.rtl):$.extend({},commandList.rtl,commandList.ltr),command=cmds[keyCode],fn=functions[command],fn&&"function"==typeof fn?(fn.apply(),(functions.handled||"function"==typeof functions.handled)&&functions.handled.apply()):(functions.unhandled||"function"==typeof functions.unhandled)&&functions.unhandled.apply())},findFocusable:function($element){return $element.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!(!$(this).is(":visible")||$(this).attr("tabindex")<0)})},register:function(componentName,cmds){commands[componentName]=cmds;
}};Foundation.Keyboard=Keyboard}(jQuery),!function($){function ImNotTouchingYou(element,parent,lrOnly,tbOnly){var top,bottom,left,right,eleDims=GetDimensions(element);if(parent){var parDims=GetDimensions(parent);bottom=eleDims.offset.top+eleDims.height<=parDims.height+parDims.offset.top,top=eleDims.offset.top>=parDims.offset.top,left=eleDims.offset.left>=parDims.offset.left,right=eleDims.offset.left+eleDims.width<=parDims.width}else bottom=eleDims.offset.top+eleDims.height<=eleDims.windowDims.height+eleDims.windowDims.offset.top,top=eleDims.offset.top>=eleDims.windowDims.offset.top,left=eleDims.offset.left>=eleDims.windowDims.offset.left,right=eleDims.offset.left+eleDims.width<=eleDims.windowDims.width;var allDirs=[bottom,top,left,right];return lrOnly?left===right==!0:tbOnly?top===bottom==!0:allDirs.indexOf(!1)===-1}function GetDimensions(elem,test){if(elem=elem.length?elem[0]:elem,elem===window||elem===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var rect=elem.getBoundingClientRect(),parRect=elem.parentNode.getBoundingClientRect(),winRect=document.body.getBoundingClientRect(),winY=window.pageYOffset,winX=window.pageXOffset;return{width:rect.width,height:rect.height,offset:{top:rect.top+winY,left:rect.left+winX},parentDims:{width:parRect.width,height:parRect.height,offset:{top:parRect.top+winY,left:parRect.left+winX}},windowDims:{width:winRect.width,height:winRect.height,offset:{top:winY,left:winX}}}}function GetOffsets(element,anchor,position,vOffset,hOffset,isOverflow){var $eleDims=GetDimensions(element),$anchorDims=anchor?GetDimensions(anchor):null;switch(position){case"top":return{left:Foundation.rtl()?$anchorDims.offset.left-$eleDims.width+$anchorDims.width:$anchorDims.offset.left,top:$anchorDims.offset.top-($eleDims.height+vOffset)};case"left":return{left:$anchorDims.offset.left-($eleDims.width+hOffset),top:$anchorDims.offset.top};case"right":return{left:$anchorDims.offset.left+$anchorDims.width+hOffset,top:$anchorDims.offset.top};case"center top":return{left:$anchorDims.offset.left+$anchorDims.width/2-$eleDims.width/2,top:$anchorDims.offset.top-($eleDims.height+vOffset)};case"center bottom":return{left:isOverflow?hOffset:$anchorDims.offset.left+$anchorDims.width/2-$eleDims.width/2,top:$anchorDims.offset.top+$anchorDims.height+vOffset};case"center left":return{left:$anchorDims.offset.left-($eleDims.width+hOffset),top:$anchorDims.offset.top+$anchorDims.height/2-$eleDims.height/2};case"center right":return{left:$anchorDims.offset.left+$anchorDims.width+hOffset+1,top:$anchorDims.offset.top+$anchorDims.height/2-$eleDims.height/2};case"center":return{left:$eleDims.windowDims.offset.left+$eleDims.windowDims.width/2-$eleDims.width/2,top:$eleDims.windowDims.offset.top+$eleDims.windowDims.height/2-$eleDims.height/2};case"reveal":return{left:($eleDims.windowDims.width-$eleDims.width)/2,top:$eleDims.windowDims.offset.top+vOffset};case"reveal full":return{left:$eleDims.windowDims.offset.left,top:$eleDims.windowDims.offset.top};case"left bottom":return{left:$anchorDims.offset.left-($eleDims.width+hOffset),top:$anchorDims.offset.top+$anchorDims.height};case"right bottom":return{left:$anchorDims.offset.left+$anchorDims.width+hOffset-$eleDims.width,top:$anchorDims.offset.top+$anchorDims.height};default:return{left:Foundation.rtl()?$anchorDims.offset.left-$eleDims.width+$anchorDims.width:$anchorDims.offset.left,top:$anchorDims.offset.top+$anchorDims.height+vOffset}}}Foundation.Box={ImNotTouchingYou:ImNotTouchingYou,GetDimensions:GetDimensions,GetOffsets:GetOffsets}}(jQuery),!function($){function Timer(elem,options,cb){var start,timer,_this=this,duration=options.duration,nameSpace=Object.keys(elem.data())[0]||"timer",remain=-1;this.isPaused=!1,this.restart=function(){remain=-1,clearTimeout(timer),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(timer),remain=remain<=0?duration:remain,elem.data("paused",!1),start=Date.now(),timer=setTimeout(function(){options.infinite&&_this.restart(),cb()},remain),elem.trigger("timerstart.zf."+nameSpace)},this.pause=function(){this.isPaused=!0,clearTimeout(timer),elem.data("paused",!0);var end=Date.now();remain-=end-start,elem.trigger("timerpaused.zf."+nameSpace)}}function onImagesLoaded(images,callback){function singleImageLoaded(){unloaded--,0===unloaded&&callback()}var unloaded=images.length;0===unloaded&&callback(),images.each(function(){this.complete?singleImageLoaded():"undefined"!=typeof this.naturalWidth&&this.naturalWidth>0?singleImageLoaded():$(this).one("load",function(){singleImageLoaded()})})}Foundation.Timer=Timer,Foundation.onImagesLoaded=onImagesLoaded}(jQuery),!function($){function parseStyleToObject(str){var styleObject={};return"string"!=typeof str?styleObject:(str=str.trim().slice(1,-1))?styleObject=str.split("&").reduce(function(ret,param){var parts=param.replace(/\+/g," ").split("="),key=parts[0],val=parts[1];return key=decodeURIComponent(key),val=void 0===val?null:decodeURIComponent(val),ret.hasOwnProperty(key)?Array.isArray(ret[key])?ret[key].push(val):ret[key]=[ret[key],val]:ret[key]=val,ret},{}):styleObject}var MediaQuery={queries:[],current:"",_init:function(){var namedQueries,self=this,extractedStyles=$(".foundation-mq").css("font-family");namedQueries=parseStyleToObject(extractedStyles);for(var key in namedQueries)self.queries.push({name:key,value:"only screen and (min-width: "+namedQueries[key]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(size){var query=this.get(size);return!!query&&window.matchMedia(query).matches},get:function(size){for(var i in this.queries){var query=this.queries[i];if(size===query.name)return query.value}return null},_getCurrentSize:function(){for(var matched,i=0;i<this.queries.length;i++){var query=this.queries[i];window.matchMedia(query.value).matches&&(matched=query)}return"object"==typeof matched?matched.name:matched},_watcher:function(){var _this=this;$(window).on("resize.zf.mediaquery",function(){var newSize=_this._getCurrentSize();newSize!==_this.current&&($(window).trigger("changed.zf.mediaquery",[newSize,_this.current]),_this.current=newSize)})}};Foundation.MediaQuery=MediaQuery,window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement("style"),script=document.getElementsByTagName("script")[0],info=null;style.type="text/css",style.id="matchmediajs-test",script.parentNode.insertBefore(style,script),info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle,styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";return style.styleSheet?style.styleSheet.cssText=text:style.textContent=text,"1px"===info.width}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}()),Foundation.MediaQuery=MediaQuery}(jQuery),!function($){function checkListeners(){eventsListener(),resizeListener(),scrollListener(),closemeListener()}function closemeListener(pluginName){var yetiBoxes=$("[data-yeti-box]"),plugNames=["dropdown","tooltip","reveal"];if(pluginName&&("string"==typeof pluginName?plugNames.push(pluginName):"object"==typeof pluginName&&"string"==typeof pluginName[0]&&plugNames.concat(pluginName)),yetiBoxes.length){var listeners=plugNames.map(function(name){return"closeme.zf."+name}).join(" ");$(window).off(listeners).on(listeners,function(e,pluginId){var plugin=e.namespace.split(".")[0],plugins=$("[data-"+plugin+"]").not('[data-yeti-box="'+pluginId+'"]');plugins.each(function(){var _this=$(this);_this.triggerHandler("close.zf.trigger",[_this])})})}}function resizeListener(debounce){var timer=void 0,$nodes=$("[data-resize]");$nodes.length&&$(window).off("resize.zf.trigger").on("resize.zf.trigger",function(e){timer&&clearTimeout(timer),timer=setTimeout(function(){MutationObserver||$nodes.each(function(){$(this).triggerHandler("resizeme.zf.trigger")}),$nodes.attr("data-events","resize")},debounce||10)})}function scrollListener(debounce){var timer=void 0,$nodes=$("[data-scroll]");$nodes.length&&$(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(e){timer&&clearTimeout(timer),timer=setTimeout(function(){MutationObserver||$nodes.each(function(){$(this).triggerHandler("scrollme.zf.trigger")}),$nodes.attr("data-events","scroll")},debounce||10)})}function eventsListener(){if(!MutationObserver)return!1;var nodes=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),listeningElementsMutation=function(mutationRecordsList){var $target=$(mutationRecordsList[0].target);switch($target.attr("data-events")){case"resize":$target.triggerHandler("resizeme.zf.trigger",[$target]);break;case"scroll":$target.triggerHandler("scrollme.zf.trigger",[$target,window.pageYOffset]);break;default:return!1}};if(nodes.length)for(var i=0;i<=nodes.length-1;i++){var elementObserver=new MutationObserver(listeningElementsMutation);elementObserver.observe(nodes[i],{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["data-events"]})}}var MutationObserver=function(){for(var prefixes=["WebKit","Moz","O","Ms",""],i=0;i<prefixes.length;i++)if(prefixes[i]+"MutationObserver"in window)return window[prefixes[i]+"MutationObserver"];return!1}(),triggers=function(el,type){el.data(type).split(" ").forEach(function(id){$("#"+id)["close"===type?"trigger":"triggerHandler"](type+".zf.trigger",[el])})};$(document).on("click.zf.trigger","[data-open]",function(){triggers($(this),"open")}),$(document).on("click.zf.trigger","[data-close]",function(){var id=$(this).data("close");id?triggers($(this),"close"):$(this).trigger("close.zf.trigger")}),$(document).on("click.zf.trigger","[data-toggle]",function(){triggers($(this),"toggle")}),$(document).on("close.zf.trigger","[data-closable]",function(e){e.stopPropagation();var animation=$(this).data("closable");""!==animation?Foundation.Motion.animateOut($(this),animation,function(){$(this).trigger("closed.zf")}):$(this).fadeOut().trigger("closed.zf")}),$(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var id=$(this).data("toggle-focus");$("#"+id).triggerHandler("toggle.zf.trigger",[$(this)])}),$(window).load(function(){checkListeners()}),Foundation.IHearYou=checkListeners}(jQuery),!function($){function Move(duration,elem,fn){function move(ts){start||(start=window.performance.now()),prog=ts-start,fn.apply(elem),prog<duration?anim=window.requestAnimationFrame(move,elem):(window.cancelAnimationFrame(anim),elem.trigger("finished.zf.animate",[elem]).triggerHandler("finished.zf.animate",[elem]))}var anim,prog,start=null;anim=window.requestAnimationFrame(move)}function animate(isIn,element,animation,cb){function finish(){isIn||element.hide(),reset(),cb&&cb.apply(element)}function reset(){element[0].style.transitionDuration=0,element.removeClass(initClass+" "+activeClass+" "+animation)}if(element=$(element).eq(0),element.length){var initClass=isIn?initClasses[0]:initClasses[1],activeClass=isIn?activeClasses[0]:activeClasses[1];reset(),element.addClass(animation).css("transition","none"),requestAnimationFrame(function(){element.addClass(initClass),isIn&&element.show()}),requestAnimationFrame(function(){element[0].offsetWidth,element.css("transition","").addClass(activeClass)}),element.one(Foundation.transitionend(element),finish)}}var initClasses=["mui-enter","mui-leave"],activeClasses=["mui-enter-active","mui-leave-active"],Motion={animateIn:function(element,animation,cb){animate(!0,element,animation,cb)},animateOut:function(element,animation,cb){animate(!1,element,animation,cb)}};Foundation.Move=Move,Foundation.Motion=Motion}(jQuery),!function($){var Nest={Feather:function(menu){var type=arguments.length<=1||void 0===arguments[1]?"zf":arguments[1];menu.attr("role","menubar");var items=menu.find("li").attr({role:"menuitem"}),subMenuClass="is-"+type+"-submenu",subItemClass=subMenuClass+"-item",hasSubClass="is-"+type+"-submenu-parent";menu.find("a:first").attr("tabindex",0),items.each(function(){var $item=$(this),$sub=$item.children("ul");$sub.length&&($item.addClass(hasSubClass).attr({"aria-haspopup":!0,"aria-expanded":!1,"aria-label":$item.children("a:first").text()}),$sub.addClass("submenu "+subMenuClass).attr({"data-submenu":"","aria-hidden":!0,role:"menu"})),$item.parent("[data-submenu]").length&&$item.addClass("is-submenu-item "+subItemClass)})},Burn:function(menu,type){var subMenuClass=(menu.find("li").removeAttr("tabindex"),"is-"+type+"-submenu"),subItemClass=subMenuClass+"-item",hasSubClass="is-"+type+"-submenu-parent";menu.find("*").removeClass(subMenuClass+" "+subItemClass+" "+hasSubClass+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=Nest}(jQuery),function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):root.MotionUI=factory(root.jQuery)}(this,function($){"use strict";function animate(isIn,element,animation,cb){function finish(){isIn||element.hide(),reset(),cb&&cb.apply(element)}function reset(){element[0].style.transitionDuration=0,element.removeClass(initClass+" "+activeClass+" "+animation)}if(element=$(element).eq(0),element.length){if(null===endEvent)return isIn?element.show():element.hide(),void cb();var initClass=isIn?initClasses[0]:initClasses[1],activeClass=isIn?activeClasses[0]:activeClasses[1];reset(),element.addClass(animation),element.css("transition","none"),requestAnimationFrame(function(){element.addClass(initClass),isIn&&element.show()}),requestAnimationFrame(function(){element[0].offsetWidth,element.css("transition",""),element.addClass(activeClass)}),element.one("transitionend",finish)}}!function(){Date.now||(Date.now=function(){return(new Date).getTime()});for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime)},nextTime-now)},window.cancelAnimationFrame=clearTimeout}}();var initClasses=["mui-enter","mui-leave"],activeClasses=["mui-enter-active","mui-leave-active"],endEvent=function(){var transitions={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},elem=window.document.createElement("div");for(var t in transitions)if("undefined"!=typeof elem.style[t])return transitions[t];return null}(),MotionUI={animateIn:function(element,animation,cb){animate(!0,element,animation,cb)},animateOut:function(element,animation,cb){animate(!1,element,animation,cb)}};return MotionUI}),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory(require,exports,module):root.ouibounce=factory()}(this,function(require,exports,module){return function(el,config){function setDefault(_property,_default){return"undefined"==typeof _property?_default:_property}function setDefaultCookieExpire(days){var ms=24*days*60*60*1e3,date=new Date;return date.setTime(date.getTime()+ms),"; expires="+date.toUTCString()}function attachOuiBounce(){_html.addEventListener("mouseleave",handleMouseleave),_html.addEventListener("mouseenter",handleMouseenter),_html.addEventListener("keydown",handleKeydown)}function handleMouseleave(e){e.clientY>sensitivity||checkCookieValue(cookieName,"true")&&!aggressive||(_delayTimer=setTimeout(_fireAndCallback,delay))}function handleMouseenter(e){_delayTimer&&(clearTimeout(_delayTimer),_delayTimer=null)}function handleKeydown(e){disableKeydown||checkCookieValue(cookieName,"true")&&!aggressive||e.metaKey&&76===e.keyCode&&(disableKeydown=!0,_delayTimer=setTimeout(_fireAndCallback,delay))}function checkCookieValue(cookieName,value){return parseCookies()[cookieName]===value}function parseCookies(){for(var cookies=document.cookie.split("; "),ret={},i=cookies.length-1;i>=0;i--){var el=cookies[i].split("=");ret[el[0]]=el[1]}return ret}function _fireAndCallback(){fire(),callback()}function fire(){el&&(el.style.display="block"),disable()}function disable(options){var options=options||{};"undefined"!=typeof options.cookieExpire&&(cookieExpire=setDefaultCookieExpire(options.cookieExpire)),options.sitewide===!0&&(sitewide=";path=/"),"undefined"!=typeof options.cookieDomain&&(cookieDomain=";domain="+options.cookieDomain),"undefined"!=typeof options.cookieName&&(cookieName=options.cookieName),document.cookie=cookieName+"=true"+cookieExpire+cookieDomain+sitewide,_html.removeEventListener("mouseleave",handleMouseleave),_html.removeEventListener("mouseenter",handleMouseenter),_html.removeEventListener("keydown",handleKeydown)}var config=config||{},aggressive=config.aggressive||!1,sensitivity=setDefault(config.sensitivity,20),timer=setDefault(config.timer,1e3),delay=setDefault(config.delay,0),callback=config.callback||function(){},cookieExpire=setDefaultCookieExpire(config.cookieExpire)||"",cookieDomain=config.cookieDomain?";domain="+config.cookieDomain:"",cookieName=config.cookieName?config.cookieName:"viewedOuibounceModal",sitewide=config.sitewide===!0?";path=/":"",_delayTimer=null,_html=document.documentElement;setTimeout(attachOuiBounce,timer);var disableKeydown=!1;return{fire:fire,disable:disable}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global.Vimeo=global.Vimeo||{},global.Vimeo.Player=factory())}(this,function(){"use strict";function getMethodName(prop,type){return 0===prop.indexOf(type.toLowerCase())?prop:""+type.toLowerCase()+prop.substr(0,1).toUpperCase()+prop.substr(1)}function isDomElement(element){return element instanceof window.HTMLElement}function isInteger(value){return!isNaN(parseFloat(value))&&isFinite(value)&&Math.floor(value)==value}function isVimeoUrl(url){return/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(url)}function getVimeoUrl(){var oEmbedParameters=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},id=oEmbedParameters.id,url=oEmbedParameters.url,idOrUrl=id||url;if(!idOrUrl)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger(idOrUrl))return"https://vimeo.com/"+idOrUrl;if(isVimeoUrl(idOrUrl))return idOrUrl.replace("http:","https:");if(id)throw new TypeError(""+id+" is not a valid video id.");throw new TypeError(""+idOrUrl+" is not a vimeo.com url.")}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}function storeCallback(player,name,callback){var playerCallbacks=callbackMap.get(player.element)||{};name in playerCallbacks||(playerCallbacks[name]=[]),playerCallbacks[name].push(callback),callbackMap.set(player.element,playerCallbacks)}function getCallbacks(player,name){var playerCallbacks=callbackMap.get(player.element)||{};return playerCallbacks[name]||[]}function removeCallback(player,name,callback){var playerCallbacks=callbackMap.get(player.element)||{};if(!playerCallbacks[name])return!0;if(!callback)return playerCallbacks[name]=[],callbackMap.set(player.element,playerCallbacks),!0;var index=playerCallbacks[name].indexOf(callback);return index!==-1&&playerCallbacks[name].splice(index,1),callbackMap.set(player.element,playerCallbacks),playerCallbacks[name]&&0===playerCallbacks[name].length}function shiftCallbacks(player,name){var playerCallbacks=getCallbacks(player,name);if(playerCallbacks.length<1)return!1;var callback=playerCallbacks.shift();return removeCallback(player,name,callback),callback}function swapCallbacks(oldElement,newElement){var playerCallbacks=callbackMap.get(oldElement);callbackMap.set(newElement,playerCallbacks),callbackMap["delete"](oldElement)}function getOEmbedParameters(element){var defaults=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oEmbedParameters.reduce(function(params,param){var value=element.getAttribute("data-vimeo-"+param);return(value||""===value)&&(params[param]=""===value?1:value),params},defaults)}function getOEmbedData(videoUrl){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(resolve,reject){if(!isVimeoUrl(videoUrl))throw new TypeError(""+videoUrl+" is not a vimeo.com url.");var url="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(videoUrl);for(var param in params)params.hasOwnProperty(param)&&(url+="&"+param+"="+encodeURIComponent(params[param]));var xhr="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;xhr.open("GET",url,!0),xhr.onload=function(){if(404===xhr.status)return void reject(new Error(""+videoUrl+" was not found."));if(403===xhr.status)return void reject(new Error(""+videoUrl+" is not embeddable."));try{var json=JSON.parse(xhr.responseText);resolve(json)}catch(error){reject(error)}},xhr.onerror=function(){var status=xhr.status?" ("+xhr.status+")":"";reject(new Error("There was an error fetching the embed code from Vimeo"+status+"."))},xhr.send()})}function createEmbed(_ref,element){var html=_ref.html;if(!element)throw new TypeError("An element must be provided");if(null!==element.getAttribute("data-vimeo-initialized"))return element.querySelector("iframe");var div=document.createElement("div");return div.innerHTML=html,element.appendChild(div.firstChild),element.setAttribute("data-vimeo-initialized","true"),element.querySelector("iframe")}function initializeEmbeds(){var parent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,elements=[].slice.call(parent.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),handleError=function(error){"console"in window&&console.error};elements.forEach(function(element){try{if(null!==element.getAttribute("data-vimeo-defer"))return;var params=getOEmbedParameters(element),url=getVimeoUrl(params);getOEmbedData(url,params).then(function(data){return createEmbed(data,element)})["catch"](handleError)}catch(error){handleError(error)}})}function resizeEmbeds(){var parent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,onMessage=function(event){if(isVimeoUrl(event.origin)&&event.data&&"spacechange"===event.data.event)for(var iframes=parent.querySelectorAll("iframe"),i=0;i<iframes.length;i++)if(iframes[i].contentWindow===event.source){var space=iframes[i].parentElement;space&&space.className.indexOf("vimeo-space")!==-1&&(space.style.paddingBottom=event.data.data[0].bottom+"px");break}};window.addEventListener?window.addEventListener("message",onMessage,!1):window.attachEvent&&window.attachEvent("onmessage",onMessage)}function parseMessageData(data){return"string"==typeof data&&(data=JSON.parse(data)),data}function postMessage(player,method,params){if(player.element.contentWindow&&player.element.contentWindow.postMessage){var message={method:method};void 0!==params&&(message.value=params);var ieVersion=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));ieVersion>=8&&ieVersion<10&&(message=JSON.stringify(message)),player.element.contentWindow.postMessage(message,player.origin)}}function processData(player,data){data=parseMessageData(data);var callbacks=[],param=void 0;if(data.event){if("error"===data.event){var promises=getCallbacks(player,data.data.method);promises.forEach(function(promise){var error=new Error(data.data.message);error.name=data.data.name,promise.reject(error),removeCallback(player,data.data.method,promise)})}callbacks=getCallbacks(player,"event:"+data.event),param=data.data}else if(data.method){var callback=shiftCallbacks(player,data.method);callback&&(callbacks.push(callback),param=data.value)}callbacks.forEach(function(callback){try{if("function"==typeof callback)return void callback.call(player,param);callback.resolve(param)}catch(e){}})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var isNode="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),arrayIndexOfSupport="undefined"!=typeof Array.prototype.indexOf,postMessageSupport="undefined"!=typeof window&&"undefined"!=typeof window.postMessage;if(!(isNode||arrayIndexOfSupport&&postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},npo_src=(createCommonjsModule(function(module,exports){!function(exports){function createCollection(proto,objectOnly){function Collection(a){return this&&this.constructor===Collection?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=objectOnly,void(a&&init.call(this,a))):new Collection(a)}return objectOnly||defineProperty(proto,"size",{get:sharedSize}),proto.constructor=Collection,Collection.prototype=proto,Collection}function init(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function sharedDelete(key){return this.has(key)&&(this._keys.splice(i,1),this._values.splice(i,1),this._itp.forEach(function(p){i<p[0]&&p[0]--})),-1<i}function sharedGet(key){return this.has(key)?this._values[i]:void 0}function has(list,key){if(this.objectOnly&&key!==Object(key))throw new TypeError("Invalid value used as weak collection key");if(key!=key||0===key)for(i=list.length;i--&&!is(list[i],key););else i=list.indexOf(key);return-1<i}function setHas(value){return has.call(this,this._values,value)}function mapHas(value){return has.call(this,this._keys,value)}function sharedSet(key,value){return this.has(key)?this._values[i]=value:this._values[this._keys.push(key)-1]=value,this}function sharedAdd(value){return this.has(value)||this._values.push(value),this}function sharedClear(){(this._keys||0).length=this._values.length=0}function sharedKeys(){return sharedIterator(this._itp,this._keys)}function sharedValues(){return sharedIterator(this._itp,this._values)}function mapEntries(){return sharedIterator(this._itp,this._keys,this._values)}function setEntries(){return sharedIterator(this._itp,this._values,this._values)}function sharedIterator(itp,array,array2){var p=[0],done=!1;return itp.push(p),{next:function(){var v,k=p[0];return!done&&k<array.length?(v=array2?[array[k],array2[k]]:array[k],p[0]++):(done=!0,itp.splice(itp.indexOf(p),1)),{done:done,value:v}}}}function sharedSize(){return this._values.length}function sharedForEach(callback,context){for(var it=this.entries();;){var r=it.next();if(r.done)break;callback.call(context,r.value[1],r.value[0],this)}}var i,defineProperty=Object.defineProperty,is=function(a,b){return a===b||a!==a&&b!==b};"undefined"==typeof WeakMap&&(exports.WeakMap=createCollection({"delete":sharedDelete,clear:sharedClear,get:sharedGet,has:mapHas,set:sharedSet},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(exports.Map=createCollection({"delete":sharedDelete,has:mapHas,get:sharedGet,set:sharedSet,keys:sharedKeys,values:sharedValues,entries:mapEntries,forEach:sharedForEach,clear:sharedClear})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(exports.Set=createCollection({has:setHas,add:sharedAdd,"delete":sharedDelete,clear:sharedClear,keys:sharedValues,values:sharedValues,entries:setEntries,forEach:sharedForEach})),"undefined"==typeof WeakSet&&(exports.WeakSet=createCollection({"delete":sharedDelete,add:sharedAdd,clear:sharedClear,has:setHas},!0))}("undefined"!=typeof commonjsGlobal?commonjsGlobal:window)}),createCommonjsModule(function(module){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(name,context,definition){context[name]=context[name]||definition(),module.exports&&(module.exports=context[name])}("Promise","undefined"!=typeof commonjsGlobal?commonjsGlobal:commonjsGlobal,function(){function schedule(fn,self){scheduling_queue.add(fn,self),cycle||(cycle=timer(scheduling_queue.drain))}function isThenable(o){var _then,o_type="undefined"==typeof o?"undefined":_typeof(o);return null==o||"object"!=o_type&&"function"!=o_type||(_then=o.then),"function"==typeof _then&&_then}function notify(){for(var i=0;i<this.chain.length;i++)notifyIsolated(this,1===this.state?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function notifyIsolated(self,cb,chain){var ret,_then;try{cb===!1?chain.reject(self.msg):(ret=cb===!0?self.msg:cb.call(void 0,self.msg),ret===chain.promise?chain.reject(TypeError("Promise-chain cycle")):(_then=isThenable(ret))?_then.call(ret,chain.resolve,chain.reject):chain.resolve(ret))}catch(err){chain.reject(err)}}function resolve(msg){var _then,self=this;if(!self.triggered){self.triggered=!0,self.def&&(self=self.def);try{(_then=isThenable(msg))?schedule(function(){var def_wrapper=new MakeDefWrapper(self);try{_then.call(msg,function(){resolve.apply(def_wrapper,arguments)},function(){reject.apply(def_wrapper,arguments)})}catch(err){reject.call(def_wrapper,err)}}):(self.msg=msg,self.state=1,self.chain.length>0&&schedule(notify,self))}catch(err){reject.call(new MakeDefWrapper(self),err)}}}function reject(msg){var self=this;self.triggered||(self.triggered=!0,self.def&&(self=self.def),self.msg=msg,self.state=2,self.chain.length>0&&schedule(notify,self))}function iteratePromises(Constructor,arr,resolver,rejecter){for(var idx=0;idx<arr.length;idx++)!function(idx){Constructor.resolve(arr[idx]).then(function(msg){resolver(idx,msg)},rejecter)}(idx)}function MakeDefWrapper(self){this.def=self,this.triggered=!1}function MakeDef(self){this.promise=self,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(executor){if("function"!=typeof executor)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var def=new MakeDef(this);this.then=function(success,failure){var o={success:"function"!=typeof success||success,failure:"function"==typeof failure&&failure};return o.promise=new this.constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");o.resolve=resolve,o.reject=reject}),def.chain.push(o),0!==def.state&&schedule(notify,def),o.promise},this["catch"]=function(failure){return this.then(void 0,failure)};try{executor.call(void 0,function(msg){resolve.call(def,msg)},function(msg){reject.call(def,msg)})}catch(err){reject.call(def,err)}}var builtInProp,cycle,scheduling_queue,ToString=Object.prototype.toString,timer="undefined"!=typeof setImmediate?function(fn){return setImmediate(fn)}:setTimeout;try{Object.defineProperty({},"x",{}),builtInProp=function(obj,name,val,config){return Object.defineProperty(obj,name,{value:val,writable:!0,configurable:config!==!1})}}catch(err){builtInProp=function(obj,name,val){return obj[name]=val,obj}}scheduling_queue=function(){function Item(fn,self){this.fn=fn,this.self=self,this.next=void 0}var first,last,item;return{add:function(fn,self){item=new Item(fn,self),last?last.next=item:first=item,last=item,item=void 0},drain:function(){var f=first;for(first=last=cycle=void 0;f;)f.fn.call(f.self),f=f.next}}}();var PromisePrototype=builtInProp({},"constructor",Promise,!1);return Promise.prototype=PromisePrototype,builtInProp(PromisePrototype,"__NPO__",0,!1),builtInProp(Promise,"resolve",function(msg){var Constructor=this;return msg&&"object"==("undefined"==typeof msg?"undefined":_typeof(msg))&&1===msg.__NPO__?msg:new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");
resolve(msg)})}),builtInProp(Promise,"reject",function(msg){return new this(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");reject(msg)})}),builtInProp(Promise,"all",function(arr){var Constructor=this;return"[object Array]"!=ToString.call(arr)?Constructor.reject(TypeError("Not an array")):0===arr.length?Constructor.resolve([]):new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");var len=arr.length,msgs=Array(len),count=0;iteratePromises(Constructor,arr,function(idx,msg){msgs[idx]=msg,++count===len&&resolve(msgs)},reject)})}),builtInProp(Promise,"race",function(arr){var Constructor=this;return"[object Array]"!=ToString.call(arr)?Constructor.reject(TypeError("Not an array")):new Constructor(function(resolve,reject){if("function"!=typeof resolve||"function"!=typeof reject)throw TypeError("Not a function");iteratePromises(Constructor,arr,function(idx,msg){resolve(msg)},reject)})}),Promise})})),callbackMap=new WeakMap,oEmbedParameters=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive","speed","background","transparent"],_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),playerMap=new WeakMap,readyMap=new WeakMap,Player=function(){function Player(element){var _this=this,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,Player),window.jQuery&&element instanceof jQuery&&(element.length>1&&window.console&&console.warn,element=element[0]),"string"==typeof element&&(element=document.getElementById(element)),!isDomElement(element))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==element.nodeName){var iframe=element.querySelector("iframe");iframe&&(element=iframe)}if("IFRAME"===element.nodeName&&!isVimeoUrl(element.getAttribute("src")||""))throw new Error("The player element passed isnt a Vimeo embed.");if(playerMap.has(element))return playerMap.get(element);this.element=element,this.origin="*";var readyPromise=new npo_src(function(resolve,reject){var onMessage=function(event){if(isVimeoUrl(event.origin)&&_this.element.contentWindow===event.source){"*"===_this.origin&&(_this.origin=event.origin);var data=parseMessageData(event.data),isReadyEvent="event"in data&&"ready"===data.event,isPingResponse="method"in data&&"ping"===data.method;return isReadyEvent||isPingResponse?(_this.element.setAttribute("data-ready","true"),void resolve()):void processData(_this,data)}};if(window.addEventListener?window.addEventListener("message",onMessage,!1):window.attachEvent&&window.attachEvent("onmessage",onMessage),"IFRAME"!==_this.element.nodeName){var params=getOEmbedParameters(element,options),url=getVimeoUrl(params);getOEmbedData(url,params).then(function(data){var iframe=createEmbed(data,element);return _this.element=iframe,swapCallbacks(element,iframe),playerMap.set(_this.element,_this),data})["catch"](function(error){return reject(error)})}});return readyMap.set(this,readyPromise),playerMap.set(this.element,this),"IFRAME"===this.element.nodeName&&postMessage(this,"ping"),this}return _createClass(Player,[{key:"callMethod",value:function(name){var _this2=this,args=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new npo_src(function(resolve,reject){return _this2.ready().then(function(){storeCallback(_this2,name,{resolve:resolve,reject:reject}),postMessage(_this2,name,args)})})}},{key:"get",value:function(name){var _this3=this;return new npo_src(function(resolve,reject){return name=getMethodName(name,"get"),_this3.ready().then(function(){storeCallback(_this3,name,{resolve:resolve,reject:reject}),postMessage(_this3,name)})})}},{key:"set",value:function(name,value){var _this4=this;return npo_src.resolve(value).then(function(val){if(name=getMethodName(name,"set"),void 0===val||null===val)throw new TypeError("There must be a value to set.");return _this4.ready().then(function(){return new npo_src(function(resolve,reject){storeCallback(_this4,name,{resolve:resolve,reject:reject}),postMessage(_this4,name,val)})})})}},{key:"on",value:function(eventName,callback){if(!eventName)throw new TypeError("You must pass an event name.");if(!callback)throw new TypeError("You must pass a callback function.");if("function"!=typeof callback)throw new TypeError("The callback must be a function.");var callbacks=getCallbacks(this,"event:"+eventName);0===callbacks.length&&this.callMethod("addEventListener",eventName)["catch"](function(){}),storeCallback(this,"event:"+eventName,callback)}},{key:"off",value:function(eventName,callback){if(!eventName)throw new TypeError("You must pass an event name.");if(callback&&"function"!=typeof callback)throw new TypeError("The callback must be a function.");var lastCallback=removeCallback(this,"event:"+eventName,callback);lastCallback&&this.callMethod("removeEventListener",eventName)["catch"](function(e){})}},{key:"loadVideo",value:function(id){return this.callMethod("loadVideo",id)}},{key:"ready",value:function(){var readyPromise=readyMap.get(this);return npo_src.resolve(readyPromise)}},{key:"addCuePoint",value:function(time){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:time,data:data})}},{key:"removeCuePoint",value:function(id){return this.callMethod("removeCuePoint",id)}},{key:"enableTextTrack",value:function(language,kind){if(!language)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:language,kind:kind})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(autopause){return this.set("autopause",autopause)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(color){return this.set("color",color)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(currentTime){return this.set("currentTime",currentTime)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(loop){return this.set("loop",loop)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(playbackRate){return this.set("playbackRate",playbackRate)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(volume){return this.set("volume",volume)}}]),Player}();return isNode||(initializeEmbeds(),resizeEmbeds()),Player}),function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){function update(){var counter=0;elements.each(function(){var $this=$(this);if(!settings.skip_invisible||$this.is(":visible"))if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if($.belowthefold(this,settings)||$.rightoffold(this,settings)){if(++counter>settings.failure_limit)return!1}else $this.trigger("appear"),counter=0})}var $container,elements=this,settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return options&&(undefined!==options.failurelimit&&(options.failure_limit=options.failurelimit,delete options.failurelimit),undefined!==options.effectspeed&&(options.effect_speed=options.effectspeed,delete options.effectspeed),$.extend(settings,options)),$container=settings.container===undefined||settings.container===window?$window:$(settings.container),0===settings.event.indexOf("scroll")&&$container.bind(settings.event,function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,$self.attr("src")!==undefined&&$self.attr("src")!==!1||$self.is("img")&&$self.attr("src",settings.placeholder),$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings)}$("<img />").bind("load",function(){var original=$self.attr("data-"+settings.data_attribute);$self.hide(),$self.is("img")?$self.attr("src",original):$self.css("background-image","url('"+original+"')"),$self[settings.effect](settings.effect_speed),self.loaded=!0;var temp=$.grep(elements,function(element){return!element.loaded});if(elements=$(temp),settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings)}}).attr("src",$self.attr("data-"+settings.data_attribute))}}),0!==settings.event.indexOf("scroll")&&$self.bind(settings.event,function(){self.loaded||$self.trigger("appear")})}),$window.bind("resize",function(){update()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&$window.bind("pageshow",function(event){event.originalEvent&&event.originalEvent.persisted&&elements.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){update()}),this},$.belowthefold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height(),fold<=$(element).offset().top-settings.threshold},$.rightoffold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width(),fold<=$(element).offset().left-settings.threshold},$.abovethetop=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollTop():$(settings.container).offset().top,fold>=$(element).offset().top+settings.threshold+$(element).height()},$.leftofbegin=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollLeft():$(settings.container).offset().left,fold>=$(element).offset().left+settings.threshold+$(element).width()},$.inviewport=function(element,settings){return!($.rightoffold(element,settings)||$.leftofbegin(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0})}})}(jQuery,window,document),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.dragula=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function lookupClass(className){var cached=cache[className];return cached?cached.lastIndex=0:cache[className]=cached=new RegExp(start+className+end,"g"),cached}function addClass(el,className){var current=el.className;current.length?lookupClass(className).test(current)||(el.className+=" "+className):el.className=className}function rmClass(el,className){el.className=el.className.replace(lookupClass(className)," ").trim()}var cache={},start="(?:^|\\s)",end="(?:\\s|$)";module.exports={add:addClass,rm:rmClass}},{}],2:[function(require,module,exports){(function(global){"use strict";function dragula(initialContainers,options){function isContainer(el){return drake.containers.indexOf(el)!==-1||o.isContainer(el)}function events(remove){var op=remove?"remove":"add";touchy(documentElement,op,"mousedown",grab),touchy(documentElement,op,"mouseup",release)}function eventualMovements(remove){var op=remove?"remove":"add";touchy(documentElement,op,"mousemove",startBecauseMouseMoved)}function movements(remove){var op=remove?"remove":"add";crossvent[op](documentElement,"selectstart",preventGrabbed),crossvent[op](documentElement,"click",preventGrabbed)}function destroy(){events(!0),release({})}function preventGrabbed(e){_grabbed&&e.preventDefault()}function grab(e){_moveX=e.clientX,_moveY=e.clientY;var ignore=1!==whichMouseButton(e)||e.metaKey||e.ctrlKey;if(!ignore){var item=e.target,context=canStart(item);context&&(_grabbed=context,eventualMovements(),"mousedown"===e.type&&(isInput(item)?item.focus():e.preventDefault()))}}function startBecauseMouseMoved(e){if(_grabbed){if(0===whichMouseButton(e))return void release({});if(void 0===e.clientX||e.clientX!==_moveX||void 0===e.clientY||e.clientY!==_moveY){if(o.ignoreInputTextSelection){var clientX=getCoord("clientX",e),clientY=getCoord("clientY",e),elementBehindCursor=doc.elementFromPoint(clientX,clientY);if(isInput(elementBehindCursor))return}var grabbed=_grabbed;eventualMovements(!0),movements(),end(),start(grabbed);var offset=getOffset(_item);_offsetX=getCoord("pageX",e)-offset.left,_offsetY=getCoord("pageY",e)-offset.top,classes.add(_copy||_item,"gu-transit"),renderMirrorImage(),drag(e)}}}function canStart(item){if(!(drake.dragging&&_mirror||isContainer(item))){for(var handle=item;getParent(item)&&isContainer(getParent(item))===!1;){if(o.invalid(item,handle))return;if(item=getParent(item),!item)return}var source=getParent(item);if(source&&!o.invalid(item,handle)){var movable=o.moves(item,source,handle,nextEl(item));if(movable)return{item:item,source:source}}}}function canMove(item){return!!canStart(item)}function manualStart(item){var context=canStart(item);context&&start(context)}function start(context){isCopy(context.item,context.source)&&(_copy=context.item.cloneNode(!0),drake.emit("cloned",_copy,context.item,"copy")),_source=context.source,_item=context.item,_initialSibling=_currentSibling=nextEl(context.item),drake.dragging=!0,drake.emit("drag",_item,_source)}function invalidTarget(){return!1}function end(){if(drake.dragging){var item=_copy||_item;drop(item,getParent(item))}}function ungrab(){_grabbed=!1,eventualMovements(!0),movements(!0)}function release(e){if(ungrab(),drake.dragging){var item=_copy||_item,clientX=getCoord("clientX",e),clientY=getCoord("clientY",e),elementBehindCursor=getElementBehindPoint(_mirror,clientX,clientY),dropTarget=findDropTarget(elementBehindCursor,clientX,clientY);dropTarget&&(_copy&&o.copySortSource||!_copy||dropTarget!==_source)?drop(item,dropTarget):o.removeOnSpill?remove():cancel()}}function drop(item,target){var parent=getParent(item);_copy&&o.copySortSource&&target===_source&&parent.removeChild(_item),isInitialPlacement(target)?drake.emit("cancel",item,_source,_source):drake.emit("drop",item,target,_source,_currentSibling),cleanup()}function remove(){if(drake.dragging){var item=_copy||_item,parent=getParent(item);parent&&parent.removeChild(item),drake.emit(_copy?"cancel":"remove",item,parent,_source),cleanup()}}function cancel(revert){if(drake.dragging){var reverts=arguments.length>0?revert:o.revertOnSpill,item=_copy||_item,parent=getParent(item),initial=isInitialPlacement(parent);initial===!1&&reverts&&(_copy?parent&&parent.removeChild(_copy):_source.insertBefore(item,_initialSibling)),initial||reverts?drake.emit("cancel",item,_source,_source):drake.emit("drop",item,parent,_source,_currentSibling),cleanup()}}function cleanup(){var item=_copy||_item;ungrab(),removeMirrorImage(),item&&classes.rm(item,"gu-transit"),_renderTimer&&clearTimeout(_renderTimer),drake.dragging=!1,_lastDropTarget&&drake.emit("out",item,_lastDropTarget,_source),drake.emit("dragend",item),_source=_item=_copy=_initialSibling=_currentSibling=_renderTimer=_lastDropTarget=null}function isInitialPlacement(target,s){var sibling;return sibling=void 0!==s?s:_mirror?_currentSibling:nextEl(_copy||_item),target===_source&&sibling===_initialSibling}function findDropTarget(elementBehindCursor,clientX,clientY){function accepted(){var droppable=isContainer(target);if(droppable===!1)return!1;var immediate=getImmediateChild(target,elementBehindCursor),reference=getReference(target,immediate,clientX,clientY),initial=isInitialPlacement(target,reference);return!!initial||o.accepts(_item,target,_source,reference)}for(var target=elementBehindCursor;target&&!accepted();)target=getParent(target);return target}function drag(e){function moved(type){drake.emit(type,item,_lastDropTarget,_source)}function over(){changed&&moved("over")}function out(){_lastDropTarget&&moved("out")}if(_mirror){e.preventDefault();var clientX=getCoord("clientX",e),clientY=getCoord("clientY",e),x=clientX-_offsetX,y=clientY-_offsetY;_mirror.style.left=x+"px",_mirror.style.top=y+"px";var item=_copy||_item,elementBehindCursor=getElementBehindPoint(_mirror,clientX,clientY),dropTarget=findDropTarget(elementBehindCursor,clientX,clientY),changed=null!==dropTarget&&dropTarget!==_lastDropTarget;(changed||null===dropTarget)&&(out(),_lastDropTarget=dropTarget,over());var parent=getParent(item);if(dropTarget===_source&&_copy&&!o.copySortSource)return void(parent&&parent.removeChild(item));var reference,immediate=getImmediateChild(dropTarget,elementBehindCursor);if(null!==immediate)reference=getReference(dropTarget,immediate,clientX,clientY);else{if(o.revertOnSpill!==!0||_copy)return void(_copy&&parent&&parent.removeChild(item));reference=_initialSibling,dropTarget=_source}(null===reference&&changed||reference!==item&&reference!==nextEl(item))&&(_currentSibling=reference,dropTarget.insertBefore(item,reference),drake.emit("shadow",item,dropTarget,_source))}}function spillOver(el){classes.rm(el,"gu-hide")}function spillOut(el){drake.dragging&&classes.add(el,"gu-hide")}function renderMirrorImage(){if(!_mirror){var rect=_item.getBoundingClientRect();_mirror=_item.cloneNode(!0),_mirror.style.width=getRectWidth(rect)+"px",_mirror.style.height=getRectHeight(rect)+"px",classes.rm(_mirror,"gu-transit"),classes.add(_mirror,"gu-mirror"),o.mirrorContainer.appendChild(_mirror),touchy(documentElement,"add","mousemove",drag),classes.add(o.mirrorContainer,"gu-unselectable"),drake.emit("cloned",_mirror,_item,"mirror")}}function removeMirrorImage(){_mirror&&(classes.rm(o.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",drag),getParent(_mirror).removeChild(_mirror),_mirror=null)}function getImmediateChild(dropTarget,target){for(var immediate=target;immediate!==dropTarget&&getParent(immediate)!==dropTarget;)immediate=getParent(immediate);return immediate===documentElement?null:immediate}function getReference(dropTarget,target,x,y){function outside(){var i,el,rect,len=dropTarget.children.length;for(i=0;i<len;i++){if(el=dropTarget.children[i],rect=el.getBoundingClientRect(),horizontal&&rect.left+rect.width/2>x)return el;if(!horizontal&&rect.top+rect.height/2>y)return el}return null}function inside(){var rect=target.getBoundingClientRect();return resolve(horizontal?x>rect.left+getRectWidth(rect)/2:y>rect.top+getRectHeight(rect)/2)}function resolve(after){return after?nextEl(target):target}var horizontal="horizontal"===o.direction,reference=target!==dropTarget?inside():outside();return reference}function isCopy(item,container){return"boolean"==typeof o.copy?o.copy:o.copy(item,container)}var len=arguments.length;1===len&&Array.isArray(initialContainers)===!1&&(options=initialContainers,initialContainers=[]);var _mirror,_source,_item,_offsetX,_offsetY,_moveX,_moveY,_initialSibling,_currentSibling,_copy,_renderTimer,_grabbed,_lastDropTarget=null,o=options||{};void 0===o.moves&&(o.moves=always),void 0===o.accepts&&(o.accepts=always),void 0===o.invalid&&(o.invalid=invalidTarget),void 0===o.containers&&(o.containers=initialContainers||[]),void 0===o.isContainer&&(o.isContainer=never),void 0===o.copy&&(o.copy=!1),void 0===o.copySortSource&&(o.copySortSource=!1),void 0===o.revertOnSpill&&(o.revertOnSpill=!1),void 0===o.removeOnSpill&&(o.removeOnSpill=!1),void 0===o.direction&&(o.direction="vertical"),void 0===o.ignoreInputTextSelection&&(o.ignoreInputTextSelection=!0),void 0===o.mirrorContainer&&(o.mirrorContainer=doc.body);var drake=emitter({containers:o.containers,start:manualStart,end:end,cancel:cancel,remove:remove,destroy:destroy,canMove:canMove,dragging:!1});return o.removeOnSpill===!0&&drake.on("over",spillOver).on("out",spillOut),events(),drake}function touchy(el,op,type,fn){var touch={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},pointers={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},microsoft={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};global.navigator.pointerEnabled?crossvent[op](el,pointers[type],fn):global.navigator.msPointerEnabled?crossvent[op](el,microsoft[type],fn):(crossvent[op](el,touch[type],fn),crossvent[op](el,type,fn))}function whichMouseButton(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var button=e.button;return void 0!==button?1&button?1:2&button?3:4&button?2:0:void 0}function getOffset(el){var rect=el.getBoundingClientRect();return{left:rect.left+getScroll("scrollLeft","pageXOffset"),top:rect.top+getScroll("scrollTop","pageYOffset")}}function getScroll(scrollProp,offsetProp){return"undefined"!=typeof global[offsetProp]?global[offsetProp]:documentElement.clientHeight?documentElement[scrollProp]:doc.body[scrollProp]}function getElementBehindPoint(point,x,y){var el,p=point||{},state=p.className;return p.className+=" gu-hide",el=doc.elementFromPoint(x,y),p.className=state,el}function never(){return!1}function always(){return!0}function getRectWidth(rect){return rect.width||rect.right-rect.left}function getRectHeight(rect){return rect.height||rect.bottom-rect.top}function getParent(el){return el.parentNode===doc?null:el.parentNode}function isInput(el){return"INPUT"===el.tagName||"TEXTAREA"===el.tagName||"SELECT"===el.tagName||isEditable(el)}function isEditable(el){return!!el&&("false"!==el.contentEditable&&("true"===el.contentEditable||isEditable(getParent(el))))}function nextEl(el){function manually(){var sibling=el;do sibling=sibling.nextSibling;while(sibling&&1!==sibling.nodeType);return sibling}return el.nextElementSibling||manually()}function getEventHost(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function getCoord(coord,e){var host=getEventHost(e),missMap={pageX:"clientX",pageY:"clientY"};return coord in missMap&&!(coord in host)&&missMap[coord]in host&&(coord=missMap[coord]),host[coord]}var emitter=require("contra/emitter"),crossvent=require("crossvent"),classes=require("./classes"),doc=document,documentElement=doc.documentElement;module.exports=dragula}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(require,module,exports){module.exports=function(a,n){return Array.prototype.slice.call(a,n)}},{}],4:[function(require,module,exports){"use strict";var ticky=require("ticky");module.exports=function(fn,args,ctx){fn&&ticky(function(){fn.apply(ctx||null,args||[])})}},{ticky:9}],5:[function(require,module,exports){"use strict";var atoa=require("atoa"),debounce=require("./debounce");module.exports=function(thing,options){var opts=options||{},evt={};return void 0===thing&&(thing={}),thing.on=function(type,fn){return evt[type]?evt[type].push(fn):evt[type]=[fn],thing},thing.once=function(type,fn){return fn._once=!0,thing.on(type,fn),thing},thing.off=function(type,fn){var c=arguments.length;if(1===c)delete evt[type];else if(0===c)evt={};else{var et=evt[type];if(!et)return thing;et.splice(et.indexOf(fn),1)}return thing},thing.emit=function(){var args=atoa(arguments);return thing.emitterSnapshot(args.shift()).apply(this,args)},thing.emitterSnapshot=function(type){var et=(evt[type]||[]).slice(0);return function(){var args=atoa(arguments),ctx=this||thing;if("error"===type&&opts["throws"]!==!1&&!et.length)throw 1===args.length?args[0]:args;return et.forEach(function(listen){opts.async?debounce(listen,args,ctx):listen.apply(ctx,args),listen._once&&thing.off(type,listen)}),thing}},thing}},{"./debounce":4,atoa:3}],6:[function(require,module,exports){(function(global){"use strict";function addEventEasy(el,type,fn,capturing){return el.addEventListener(type,fn,capturing)}function addEventHard(el,type,fn){return el.attachEvent("on"+type,wrap(el,type,fn))}function removeEventEasy(el,type,fn,capturing){return el.removeEventListener(type,fn,capturing)}function removeEventHard(el,type,fn){var listener=unwrap(el,type,fn);if(listener)return el.detachEvent("on"+type,listener)}function fabricateEvent(el,type,model){function makeClassicEvent(){var e;return doc.createEvent?(e=doc.createEvent("Event"),e.initEvent(type,!0,!0)):doc.createEventObject&&(e=doc.createEventObject()),e}function makeCustomEvent(){return new customEvent(type,{detail:model})}var e=eventmap.indexOf(type)===-1?makeCustomEvent():makeClassicEvent();el.dispatchEvent?el.dispatchEvent(e):el.fireEvent("on"+type,e)}function wrapperFactory(el,type,fn){return function(originalEvent){var e=originalEvent||global.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,fn.call(el,e)}}function wrap(el,type,fn){var wrapper=unwrap(el,type,fn)||wrapperFactory(el,type,fn);return hardCache.push({wrapper:wrapper,element:el,type:type,fn:fn}),wrapper}function unwrap(el,type,fn){var i=find(el,type,fn);if(i){var wrapper=hardCache[i].wrapper;return hardCache.splice(i,1),wrapper}}function find(el,type,fn){var i,item;for(i=0;i<hardCache.length;i++)if(item=hardCache[i],item.element===el&&item.type===type&&item.fn===fn)return i}var customEvent=require("custom-event"),eventmap=require("./eventmap"),doc=global.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];global.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard),module.exports={add:addEvent,remove:removeEvent,fabricate:fabricateEvent}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(require,module,exports){(function(global){"use strict";var eventmap=[],eventname="",ron=/^on/;for(eventname in global)ron.test(eventname)&&eventmap.push(eventname.slice(2));module.exports=eventmap}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(require,module,exports){(function(global){function useNative(){try{var p=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===p.type&&"bar"===p.detail.foo}catch(e){}return!1}var NativeCustomEvent=global.CustomEvent;module.exports=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(type,params){var e=document.createEvent("CustomEvent");return params?e.initCustomEvent(type,params.bubbles,params.cancelable,params.detail):e.initCustomEvent(type,!1,!1,void 0),e}:function(type,params){var e=document.createEventObject();return e.type=type,params?(e.bubbles=Boolean(params.bubbles),e.cancelable=Boolean(params.cancelable),e.detail=params.detail):(e.bubbles=!1,e.cancelable=!1,e.detail=void 0),e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(require,module,exports){var tick,si="function"==typeof setImmediate;tick=si?function(fn){setImmediate(fn)}:function(fn){setTimeout(fn,0)},module.exports=tick},{}]},{},[2])(2)}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.RSVP=global.RSVP||{})}(this,function(exports){"use strict";function indexOf(callbacks,callback){for(var i=0,l=callbacks.length;i<l;i++)if(callbacks[i]===callback)return i;return-1}function callbacksFor(object){var callbacks=object._promiseCallbacks;return callbacks||(callbacks=object._promiseCallbacks={}),callbacks}function configure(name,value){return 2!==arguments.length?config[name]:void(config[name]=value)}function objectOrFunction(x){var type=typeof x;return null!==x&&("object"===type||"function"===type)}function isFunction(x){return"function"==typeof x}function isObject(x){return null!==x&&"object"==typeof x}function isMaybeThenable(x){return null!==x&&"object"==typeof x}function scheduleFlush(){setTimeout(function(){for(var i=0;i<queue.length;i++){var entry=queue[i],payload=entry.payload;payload.guid=payload.key+payload.id,payload.childGuid=payload.key+payload.childId,payload.error&&(payload.stack=payload.error.stack),config.trigger(entry.name,entry.payload)}queue.length=0},50)}function instrument(eventName,promise,child){1===queue.push({name:eventName,payload:{key:promise._guidKey,id:promise._id,eventName:eventName,detail:promise._result,childId:child&&child._id,label:promise._label,timeStamp:now(),error:config["instrument-with-stack"]?new Error(promise._label):null}})&&scheduleFlush()}function resolve$1(object,label){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor(noop,label);return resolve(promise,object),promise}function withOwnPromise(){return new TypeError("A promises callback cannot return that same promise.")}function noop(){}function getThen(promise){try{return promise.then}catch(error){return GET_THEN_ERROR.error=error,GET_THEN_ERROR}}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){
config.async(function(promise){var sealed=!1,error=tryThen(then$$1,thenable,function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value,void 0):fulfill(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}function handleOwnThenable(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?(thenable._onError=null,reject(promise,thenable._result)):subscribe(thenable,void 0,function(value){thenable!==value?resolve(promise,value,void 0):fulfill(promise,value)},function(reason){return reject(promise,reason)})}function handleMaybeThenable(promise,maybeThenable,then$$1){var isOwnThenable=maybeThenable.constructor===promise.constructor&&then$$1===then&&promise.constructor.resolve===resolve$1;isOwnThenable?handleOwnThenable(promise,maybeThenable):then$$1===GET_THEN_ERROR?(reject(promise,GET_THEN_ERROR.error),GET_THEN_ERROR.error=null):isFunction(then$$1)?handleForeignThenable(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){promise===value?fulfill(promise,value):objectOrFunction(value)?handleMaybeThenable(promise,value,getThen(value)):fulfill(promise,value)}function publishRejection(promise){promise._onError&&promise._onError(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0===promise._subscribers.length?config.instrument&&instrument("fulfilled",promise):config.async(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,config.async(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onError=null,subscribers[length]=child,subscribers[length+FULFILLED]=onFulfillment,subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&config.async(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(config.instrument&&instrument(settled===FULFILLED?"fulfilled":"rejected",promise),0!==subscribers.length){for(var child=void 0,callback=void 0,result=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,result):callback(result);promise._subscribers.length=0}}function ErrorObject(){this.error=null}function tryCatch(callback,result){try{return callback(result)}catch(e){return TRY_CATCH_ERROR.error=e,TRY_CATCH_ERROR}}function invokeCallback(state,promise,callback,result){var hasCallback=isFunction(callback),value=void 0,error=void 0;if(hasCallback){if(value=tryCatch(callback,result),value===TRY_CATCH_ERROR)error=value.error,value.error=null;else if(value===promise)return void reject(promise,withOwnPromise())}else value=result;promise._state!==PENDING||(hasCallback&&void 0===error?resolve(promise,value):void 0!==error?reject(promise,error):state===FULFILLED?fulfill(promise,value):state===REJECTED&&reject(promise,value))}function initializePromise(promise,resolver){var resolved=!1;try{resolver(function(value){resolved||(resolved=!0,resolve(promise,value))},function(reason){resolved||(resolved=!0,reject(promise,reason))})}catch(e){reject(promise,e)}}function then(onFulfillment,onRejection,label){var parent=this,state=parent._state;if(state===FULFILLED&&!onFulfillment||state===REJECTED&&!onRejection)return config.instrument&&instrument("chained",parent,parent),parent;parent._onError=null;var child=new parent.constructor(noop,label),result=parent._result;if(config.instrument&&instrument("chained",parent,child),state===PENDING)subscribe(parent,child,onFulfillment,onRejection);else{var callback=state===FULFILLED?onFulfillment:onRejection;config.async(function(){return invokeCallback(state,child,callback,result)})}return child}function makeSettledResult(state,position,value){return state===FULFILLED?{state:"fulfilled",value:value}:{state:"rejected",reason:value}}function all(entries,label){return isArray(entries)?new Enumerator(this,entries,(!0),label).promise:this.reject(new TypeError("Promise.all must be called with an array"),label)}function race(entries,label){var Constructor=this,promise=new Constructor(noop,label);if(!isArray(entries))return reject(promise,new TypeError("Promise.race must be called with an array")),promise;for(var i=0;promise._state===PENDING&&i<entries.length;i++)subscribe(Constructor.resolve(entries[i]),void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)});return promise}function reject$1(reason,label){var Constructor=this,promise=new Constructor(noop,label);return reject(promise,reason),promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Result(){this.value=void 0}function getThen$1(obj){try{return obj.then}catch(error){return ERROR.value=error,ERROR}}function tryApply(f,s,a){try{f.apply(s,a)}catch(error){return ERROR.value=error,ERROR}}function makeObject(_,argumentNames){for(var obj={},length=_.length,args=new Array(length),x=0;x<length;x++)args[x]=_[x];for(var i=0;i<argumentNames.length;i++){var name=argumentNames[i];obj[name]=args[i+1]}return obj}function arrayResult(_){for(var length=_.length,args=new Array(length-1),i=1;i<length;i++)args[i-1]=_[i];return args}function wrapThenable(then,promise){return{then:function(onFulFillment,onRejection){return then.call(promise,onFulFillment,onRejection)}}}function denodeify(nodeFunc,options){var fn=function(){for(var self=this,l=arguments.length,args=new Array(l+1),promiseInput=!1,i=0;i<l;++i){var arg=arguments[i];if(!promiseInput){if(promiseInput=needsPromiseInput(arg),promiseInput===GET_THEN_ERROR$1){var p=new Promise(noop);return reject(p,GET_THEN_ERROR$1.value),p}promiseInput&&promiseInput!==!0&&(arg=wrapThenable(promiseInput,arg))}args[i]=arg}var promise=new Promise(noop);return args[l]=function(err,val){err?reject(promise,err):void 0===options?resolve(promise,val):options===!0?resolve(promise,arrayResult(arguments)):isArray(options)?resolve(promise,makeObject(arguments,options)):resolve(promise,val)},promiseInput?handlePromiseInput(promise,args,nodeFunc,self):handleValueInput(promise,args,nodeFunc,self)};return fn.__proto__=nodeFunc,fn}function handleValueInput(promise,args,nodeFunc,self){var result=tryApply(nodeFunc,self,args);return result===ERROR&&reject(promise,result.value),promise}function handlePromiseInput(promise,args,nodeFunc,self){return Promise.all(args).then(function(args){var result=tryApply(nodeFunc,self,args);return result===ERROR&&reject(promise,result.value),promise})}function needsPromiseInput(arg){return!(!arg||"object"!=typeof arg)&&(arg.constructor===Promise||getThen$1(arg))}function all$1(array,label){return Promise.all(array,label)}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function allSettled(entries,label){return isArray(entries)?new AllSettled(Promise,entries,label).promise:Promise.reject(new TypeError("Promise.allSettled must be called with an array"),label)}function race$1(array,label){return Promise.race(array,label)}function _possibleConstructorReturn$1(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$1(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function hash(object,label){return isObject(object)?new PromiseHash(Promise,object,label).promise:Promise.reject(new TypeError("Promise.hash must be called with an object"),label)}function _possibleConstructorReturn$2(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits$2(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function hashSettled(object,label){return isObject(object)?new HashSettled(Promise,object,(!1),label).promise:Promise.reject(new TypeError("RSVP.hashSettled must be called with an object"),label)}function rethrow(reason){throw setTimeout(function(){throw reason}),reason}function defer(label){var deferred={resolve:void 0,reject:void 0};return deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve,deferred.reject=reject},label),deferred}function map(promises,mapFn,label){return isArray(promises)?isFunction(mapFn)?Promise.all(promises,label).then(function(values){for(var length=values.length,results=new Array(length),i=0;i<length;i++)results[i]=mapFn(values[i]);return Promise.all(results,label)}):Promise.reject(new TypeError("RSVP.map expects a function as a second argument"),label):Promise.reject(new TypeError("RSVP.map must be called with an array"),label)}function resolve$2(value,label){return Promise.resolve(value,label)}function reject$2(reason,label){return Promise.reject(reason,label)}function resolveAll(promises,label){return Promise.all(promises,label)}function resolveSingle(promise,label){return Promise.resolve(promise,label).then(function(promises){return resolveAll(promises,label)})}function filter(promises,filterFn,label){if(!(isArray(promises)||isObject(promises)&&void 0!==promises.then))return Promise.reject(new TypeError("RSVP.filter must be called with an array or promise"),label);if(!isFunction(filterFn))return Promise.reject(new TypeError("RSVP.filter expects function as a second argument"),label);var promise=isArray(promises)?resolveAll(promises,label):resolveSingle(promises,label);return promise.then(function(values){for(var length=values.length,filtered=new Array(length),i=0;i<length;i++)filtered[i]=filterFn(values[i]);return resolveAll(filtered,label).then(function(filtered){for(var results=new Array(length),newLength=0,_i=0;_i<length;_i++)filtered[_i]&&(results[newLength]=values[_i],newLength++);return results.length=newLength,results})})}function asap(callback,arg){queue$1[len]=callback,queue$1[len+1]=arg,len+=2,2===len&&scheduleFlush$1()}function useNextTick(){var nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(version)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),function(){return nextTick(flush)}}function useVertxTimer(){return"undefined"!=typeof vertxNext?function(){vertxNext(flush)}:useSetTimeout()}function useMutationObserver(){var iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){return node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=flush,function(){return channel.port2.postMessage(0)}}function useSetTimeout(){return function(){return setTimeout(flush,1)}}function flush(){for(var i=0;i<len;i+=2){var callback=queue$1[i],arg=queue$1[i+1];callback(arg),queue$1[i]=void 0,queue$1[i+1]=void 0}len=0}function attemptVertex(){try{var r=require,vertx=r("vertx");return vertxNext=vertx.runOnLoop||vertx.runOnContext,useVertxTimer()}catch(e){return useSetTimeout()}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function on(){config.on.apply(config,arguments)}function off(){config.off.apply(config,arguments)}var EventTarget={mixin:function(object){return object.on=this.on,object.off=this.off,object.trigger=this.trigger,object._promiseCallbacks=void 0,object},on:function(eventName,callback){if("function"!=typeof callback)throw new TypeError("Callback must be a function");var allCallbacks=callbacksFor(this),callbacks=void 0;callbacks=allCallbacks[eventName],callbacks||(callbacks=allCallbacks[eventName]=[]),indexOf(callbacks,callback)===-1&&callbacks.push(callback)},off:function(eventName,callback){var allCallbacks=callbacksFor(this),callbacks=void 0,index=void 0;return callback?(callbacks=allCallbacks[eventName],index=indexOf(callbacks,callback),void(index!==-1&&callbacks.splice(index,1))):void(allCallbacks[eventName]=[])},trigger:function(eventName,options,label){var allCallbacks=callbacksFor(this),callbacks=void 0,callback=void 0;if(callbacks=allCallbacks[eventName])for(var i=0;i<callbacks.length;i++)(callback=callbacks[i])(options,label)}},config={instrument:!1};EventTarget.mixin(config);var _isArray=void 0;_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var isArray=_isArray,now=Date.now||function(){return(new Date).getTime()},queue=[],PENDING=void 0,FULFILLED=1,REJECTED=2,GET_THEN_ERROR=new ErrorObject,TRY_CATCH_ERROR=new ErrorObject,Enumerator=function(){function Enumerator(Constructor,input,abortOnReject,label){this._instanceConstructor=Constructor,this.promise=new Constructor(noop,label),this._abortOnReject=abortOnReject,this._init.apply(this,arguments)}return Enumerator.prototype._init=function(Constructor,input){var len=input.length||0;this.length=len,this._remaining=len,this._result=new Array(len),this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result)},Enumerator.prototype._enumerate=function(input){for(var length=this.length,promise=this.promise,i=0;promise._state===PENDING&&i<length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._settleMaybeThenable=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var then$$1=getThen(entry);if(then$$1===then&&entry._state!==PENDING)entry._onError=null,this._settledAt(entry._state,i,entry._result);else if("function"!=typeof then$$1)this._remaining--,this._result[i]=this._makeResult(FULFILLED,i,entry);else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,then$$1),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._eachEntry=function(entry,i){isMaybeThenable(entry)?this._settleMaybeThenable(entry,i):(this._remaining--,this._result[i]=this._makeResult(FULFILLED,i,entry))},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._abortOnReject&&state===REJECTED?reject(promise,value):(this._remaining--,this._result[i]=this._makeResult(state,i,value),0===this._remaining&&fulfill(promise,this._result)))},Enumerator.prototype._makeResult=function(state,i,value){return value},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}(),guidKey="rsvp_"+now()+"-",counter=0,Promise=function(){function Promise(resolver,label){this._id=counter++,this._label=label,this._state=void 0,this._result=void 0,this._subscribers=[],config.instrument&&instrument("created",this),noop!==resolver&&("function"!=typeof resolver&&needsResolver(),this instanceof Promise?initializePromise(this,resolver):needsNew())}return Promise.prototype._onError=function(reason){var _this=this;config.after(function(){_this._onError&&config.trigger("error",reason,_this._label)})},Promise.prototype["catch"]=function(onRejection,label){return this.then(void 0,onRejection,label)},Promise.prototype["finally"]=function(callback,label){var promise=this,constructor=promise.constructor;return promise.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})},label)},Promise}();Promise.cast=resolve$1,Promise.all=all,Promise.race=race,Promise.resolve=resolve$1,Promise.reject=reject$1,Promise.prototype._guidKey=guidKey,Promise.prototype.then=then;var ERROR=new Result,GET_THEN_ERROR$1=new Result,AllSettled=function(_Enumerator){function AllSettled(Constructor,entries,label){return _possibleConstructorReturn(this,_Enumerator.call(this,Constructor,entries,!1,label))}return _inherits(AllSettled,_Enumerator),AllSettled}(Enumerator);AllSettled.prototype._makeResult=makeSettledResult;var hasOwnProperty=Object.prototype.hasOwnProperty,PromiseHash=function(_Enumerator){function PromiseHash(Constructor,object){var abortOnReject=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],label=arguments[3];return _possibleConstructorReturn$1(this,_Enumerator.call(this,Constructor,object,abortOnReject,label))}return _inherits$1(PromiseHash,_Enumerator),PromiseHash.prototype._init=function(Constructor,object){this._result={},this._enumerate(object),0===this._remaining&&fulfill(this.promise,this._result)},PromiseHash.prototype._enumerate=function(input){var promise=this.promise,results=[];for(var key in input)hasOwnProperty.call(input,key)&&results.push({position:key,entry:input[key]});var length=results.length;this._remaining=length;for(var result=void 0,i=0;promise._state===PENDING&&i<length;i++)result=results[i],this._eachEntry(result.entry,result.position)},PromiseHash}(Enumerator),HashSettled=function(_PromiseHash){function HashSettled(Constructor,object,label){return _possibleConstructorReturn$2(this,_PromiseHash.call(this,Constructor,object,!1,label))}return _inherits$2(HashSettled,_PromiseHash),HashSettled}(PromiseHash);HashSettled.prototype._makeResult=makeSettledResult;var len=0,vertxNext=void 0,browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,queue$1=new Array(1e3),scheduleFlush$1=void 0;scheduleFlush$1=isNode?useNextTick():BrowserMutationObserver?useMutationObserver():isWorker?useMessageChannel():void 0===browserWindow&&"function"==typeof require?attemptVertex():useSetTimeout();var platform=void 0;if("object"==typeof self)platform=self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");platform=global}var _asap$cast$Promise$Ev;config.async=asap,config.after=function(cb){return setTimeout(cb,0)};var cast=resolve$2,async=function(callback,arg){return config.async(callback,arg)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var callbacks=window.__PROMISE_INSTRUMENTATION__;configure("instrument",!0);for(var eventName in callbacks)callbacks.hasOwnProperty(eventName)&&on(eventName,callbacks[eventName])}var rsvp=(_asap$cast$Promise$Ev={asap:asap,cast:cast,Promise:Promise,EventTarget:EventTarget,all:all$1,allSettled:allSettled,race:race$1,hash:hash,hashSettled:hashSettled,rethrow:rethrow,defer:defer,denodeify:denodeify,configure:configure,on:on,off:off,resolve:resolve$2,reject:reject$2,map:map},_defineProperty(_asap$cast$Promise$Ev,"async",async),_defineProperty(_asap$cast$Promise$Ev,"filter",filter),_asap$cast$Promise$Ev);exports["default"]=rsvp,exports.asap=asap,exports.cast=cast,exports.Promise=Promise,exports.EventTarget=EventTarget,exports.all=all$1,exports.allSettled=allSettled,exports.race=race$1,exports.hash=hash,exports.hashSettled=hashSettled,exports.rethrow=rethrow,exports.defer=defer,exports.denodeify=denodeify,exports.configure=configure,exports.on=on,exports.off=off,exports.resolve=resolve$2,exports.reject=reject$2,exports.map=map,exports.async=async,exports.filter=filter,Object.defineProperty(exports,"__esModule",{value:!0})}),window.Kit=window.Kit||{},window.Kit.ShareData=function($){function ShareData($el,data){if(this.ref=[],this.params={},this.fbid=FB.getUserID(),this.queryString="",this.response="",this.user_id=GFM.analytics.data.user_id?GFM.analytics.data.user_id:0,this.$el=$el,$el instanceof jQuery&&(this.pc=$el.data("pc")||"",this.rcid=$el.data("rcid")||"",this.url=$el.data("shareurl")||"",this.area=$el.data("area")||"",this.title=$el.data("title")||"",this.body=$el.data("body")||"",this.cat=$el.data("cat")||0,this.page=$el.data("page")||0,this.donationId=$el.data("donationId")||0,this.gfmAnalyticsElement=$el.data("gfmAnalyticsElement")||"",this.gfmAnalyticsMeta=$el.data("gfmAnalyticsMeta")||""),!this.fbid&&"undefined"!=typeof FB&&FB.getAuthResponse()&&(this.fbid=FB.getAuthResponse().userID||""),"object"==typeof data)for(var key in data)data.hasOwnProperty(key)&&(this[key]=data[key]);try{var orcs=GFM.analytics.data.out_rcid_candidates;"object"==typeof orcs&&orcs.hasOwnProperty(this.rcid)&&(this.rcid=orcs[this.rcid].rcid)}catch(ignore){}if($el instanceof jQuery){var elementData=$el.data();for(var dataKey in elementData)if(elementData.hasOwnProperty(dataKey)&&dataKey.length>0&&0==dataKey.indexOf("shareParam")){var start="shareParam".length,paramName=dataKey.substring(start).toLowerCase();this.params[paramName]=elementData[dataKey]}}this.pc&&(this.params.pc=this.pc,this.ref.push(this.pc)),this.rcid&&(this.params.rcid=this.rcid,this.ref.push(this.rcid)),$.isEmptyObject(this.params)||(this.queryString="?"+$.param(this.params)),this.ref=this.ref.length?this.ref.join("__"):"",this.hasResponse=function(){return!$.isEmptyObject(this.response)},this.getResponse=function(){return this.response},this.setResponse=function(response){this.response=response},this.getElement=function(){return this.$el},this.get=function(key,defaultValue){var value="undefined"!=typeof defaultValue?defaultValue:"";return this.hasOwnProperty(key)&&(value=this[key]),value}}return ShareData}(jQuery),window.Kit=window.Kit||{},Kit.FacebookLogger=function(GFM,$,RSVP,Kit){function getAPI(){var root="";return window.location.origin.indexOf("funds")===-1&&(root="/iapi"),root}function getPlatform(asInt){var platform=GFM.analytics.data.gfm.platform;return asInt&&(platform="desktop"===platform?0:1),platform}function request(options){return new RSVP.Promise(function(resolve,reject){options.success=resolve,options.error=reject,$.ajax(options)},"Facebook Logger")}function recordShareClick(status,data){GFM.analytics.track_event("mp_page_click",{elementid:data.get("gfmAnalyticsElement"),elementmeta:data.get("gfmAnalyticsMeta"),viewid:GFM.analytics.data.viewid,fund_url:GFM.analytics.data.fund_url,status:status,out_rcid:data.get("rcid")})}function recordFBShare(data){try{return request({type:"GET",url:getAPI()+"/index.php?route=share3/record_fbshare",data:{cat:data.get("cat",0),page:data.get("page",0),pc:data.get("pc"),fbid:data.get("fbid"),rcid:data.get("rcid"),platform:getPlatform(!0),fid:GFM.analytics.data.fund_id,user_id:GFM.analytics.data.user_id,url:data.get("url"),donationId:data.get("donationId",0)}})}catch(e){}}function recordShareES(data){try{var shareData={a:data.get("area",""),p:getPlatform(),e:data.get("event","fbpost"),pc:data.get("pc")};try{GFM.globals&&GFM.globals.start?shareData.start=GFM.global.start:data.get("start")&&(shareData.start=data.get("start"))}catch(ignore){}return request({type:"GET",url:getAPI()+"/index.php?route=share3/record_share_stat",data:shareData})}catch(e){}}function recordShareEvent(event,data){var status=Kit.FacebookLogger.getStatus(event,data),shareProperties={viewid:GFM.analytics.data.viewid,fund_id:GFM.analytics.data.fund_id,user_id:GFM.analytics.data.user_id,person_id:GFM.analytics.data.person_id,elementid:data.get("gfmAnalyticsElement"),elementmeta:data.get("gfmAnalyticsMeta"),gfm:{share:{status:status,fund_id:GFM.analytics.data.fund_id,user_id:GFM.analytics.data.user_id,person_id:GFM.analytics.data.person_id,channelfrom:data.get("fbid")}}};if(data.get("rcid"))try{var targetRCID=data.get("rcid"),candidates=GFM.analytics.data.out_rcid_candidates;if(shareProperties.gfm.share.channelfrom=data.get("fbid"),shareProperties.gfm.share.rcid=data.get("rcid"),data.get("pc")&&(shareProperties.gfm.share.pc_code=data.get("pc")),"object"==typeof candidates)for(var candidateID in candidates)if(candidates.hasOwnProperty(candidateID)){var candidate=candidates[candidateID];if(targetRCID===candidateID||targetRCID===candidate.rcid)for(var rcidProp in candidate)candidate.hasOwnProperty(rcidProp)&&!shareProperties.gfm.share.hasOwnProperty(rcidProp)&&(shareProperties.gfm.share[rcidProp]=candidate[rcidProp])}}catch(ignore){}GFM.analytics.track_event("share",shareProperties)}function getStatus(event,data){var eventToStatusMap={};eventToStatusMap[Kit.Facebook.events.intent]=Kit.FacebookLogger.status.intent,eventToStatusMap[Kit.Facebook.events.success]=Kit.FacebookLogger.status.success,eventToStatusMap[Kit.Facebook.events.failure]=Kit.FacebookLogger.status.fail;var status=eventToStatusMap[event];return status!==Kit.FacebookLogger.status.success||data.hasResponse()||(status=Kit.FacebookLogger.status.unknown),status}function setupDefaultShareClickHandlers($shareElements){$shareElements.on(Kit.Facebook.events.success,function(event,data){var status=getStatus(Kit.Facebook.events.success,data);recordShareClick(status,data),recordFBShare(data),recordShareES(data)}),$shareElements.on(Kit.Facebook.events.failure,function(event,data){var status=getStatus(Kit.Facebook.events.failure,data);recordShareClick(status,data)})}var status={intent:"intent",success:"success",fail:"fail",unknown:"unknown"};return{recordShareClick:recordShareClick,recordFBShare:recordFBShare,recordShareEvent:recordShareEvent,recordShareES:recordShareES,setupDefaultShareClickHandlers:setupDefaultShareClickHandlers,status:status,getStatus:getStatus}}(GFM,jQuery,RSVP,Kit);var Kit=window.Kit||{};!function($,RSVP){"use strict";var initialize,LISTENER_CLASS="js-share-facebook",LISTENER_SELECTOR="."+LISTENER_CLASS,FACEBOOK_SETTINGS={appId:window.FACEBOOK_APP_ID||"407682420960",version:"v2.8",cookie:!0,status:!0,xfbml:!0},events={intent:"share:intent",success:"share:success",failure:"share:failure",done:"share:done"};window.FACEBOOK_APP_ID=window.FACEBOOK_APP_ID||"407682420960",Kit.Facebook=function(){function request(options){return new RSVP.Promise(function(resolve,reject){options.success=resolve,options.error=reject,$.ajax(options)})}function getLoginStatusResponse(){return new RSVP.Promise(function(resolve,reject){initialize.then(function(){FB.getLoginStatus(function(response){resolve(response)})})})}function share(url,callback,data,mobile_iframe){logDefaultEvent(Kit.Facebook.events.intent,data);var done=function(response){"function"==typeof callback&&callback(response,data)};return new RSVP.Promise(function(resolve,reject){fbui({method:"share",href:url+data.get("queryString"),mobile_iframe:mobile_iframe||!1}).then(function(response){data.setResponse(response),logDefaultEvent(Kit.Facebook.events.success,data),done(response),resolve(response)},function(response){data.setResponse(response),logDefaultEvent(Kit.Facebook.events.failure,data),done(response),reject(response)})})}function privateMessenger(shareUrl,data){return logDefaultEvent(Kit.Facebook.events.intent,data),new RSVP.Promise(function(resolve,reject){FB.ui({method:"send",link:shareUrl},function(response){response&&response.success===!0?(logDefaultEvent(Kit.Facebook.events.success,data),resolve(response)):(logDefaultEvent(Kit.Facebook.events.failure,data),reject(response))})})}function updateSessionToken(accessToken,userID){var baseUrl="";return window.location.origin.indexOf("funds")===-1&&(baseUrl="/iapi"),request({url:baseUrl+"/index.php?route=fbengine/updateSessionToken&token="+encodeURIComponent(accessToken)+"&id="+encodeURIComponent(userID),type:"GET"})}function updateToken(){getLoginStatusResponse().then(function(response){"connected"===response.status&&response.authResponse&&updateSessionToken(response.authResponse.accessToken,response.authResponse.userID)})}function getPermissions(type){return"post"===type?postPerms:"read"===type?readPerms:"info"===type?infoPerms:"donor"===type?donorPerms:null}function arrayIsSubsetOf(subset,fullset){return subset.reduce(function(hasFound,perm){return hasFound&&fullset.indexOf(perm)>=0},!0)}function askForPermissions(permsList){var requestedPermsArray="string"==typeof permsList?permsList.split(",").map(function(p){return p.trim()}):permsList;return new RSVP.Promise(function(resolve,reject){FB.login(function(response){if(response&&response.authResponse){var grantedArray=response.authResponse.grantedScopes.split(",").map(function(p){return p.trim()});return void(arrayIsSubsetOf(requestedPermsArray,grantedArray)?resolve(response):reject(response))}reject(response)},{scope:permsList,return_scopes:!0})})}function intentHandler(){function shareSuccess(response){data.setResponse(response),$this.trigger(Kit.Facebook.events.success,data),logDefaultEvent(Kit.Facebook.events.success,data)}function shareFailure(response){data.setResponse(response),$this.trigger(Kit.Facebook.events.failure,data),logDefaultEvent(Kit.Facebook.events.failure,data)}function shareDone(){$this.trigger(Kit.Facebook.events.done,data)}var $this=$(this),data=new Kit.ShareData($this);return $this.trigger(Kit.Facebook.events.intent,data),logDefaultEvent(Kit.Facebook.events.intent,data),_share(data.get("url")+data.get("queryString")).then(shareSuccess,shareFailure)["finally"](shareDone)}function logDefaultEvent(event,data){Kit.FacebookLogger&&Kit.FacebookLogger.recordShareEvent(event,data)}function _share(href){var params={method:"share",href:href,app_id:FACEBOOK_APP_ID};return fbui(params)}function isSuccessResponse(response){return"undefined"!=typeof response&&(!(!response.hasOwnProperty("length")||0!==response.length)||(!(!response.post_id&&!response.postId)||(response.didComplete&&response.completionGesture?"post"===response.completionGesture:!response.error_code&&!response.error_message)))}function fbui(params){return new RSVP.Promise(function(resolve,reject){FB.ui(params,function(response){isSuccessResponse(response)?resolve(response):reject(response)})},"FB.ui wrapper")}function fbapi(path,method,params){var fbapiFunc=function(){return method=method||"get",params=params||{},new RSVP.Promise(function(resolve,reject){FB.api(path,method,params,function(response){!response||response.error?reject(response):resolve(response)})},"FB.api wrapper")};return FB.getAccessToken()?fbapiFunc():getLoginStatusResponse().then(fbapiFunc)}function eventListener(event){event.preventDefault(),initialize.then(intentHandler.bind(this))["catch"](function(e){});
}function init(){initialize=new RSVP.Promise(function(resolve,reject){window.fbAsyncInit=function(){FB.init(FACEBOOK_SETTINGS),resolve()}},"Facebook Initializing"),initialize.then(function(){})["catch"](function(error){}),function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="https://connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk"),$(function(){$(LISTENER_SELECTOR).click(eventListener)})}function initForObject($obj){var $listenTo=$obj.hasClass(LISTENER_CLASS)?$obj:$obj.find(LISTENER_SELECTOR);$listenTo.click(eventListener)}function getShareElements(){return $(LISTENER_SELECTOR)}function getShareListener(){return LISTENER_SELECTOR}var appId=FACEBOOK_APP_ID,postPerms="publish_actions,user_photos,email,user_friends",readPerms="user_photos,email,user_friends",infoPerms="user_birthday,user_likes",donorPerms="email,user_friends,public_profile",login=function(){var handleAuthorizedUser=function(options,response,alreadyLoggedIn){alreadyLoggedIn||options.skipUpdateFbToken||updateSessionToken(response.authResponse.accessToken,response.authResponse.userID),options.connectSuccess&&"function"==typeof options.connectSuccess&&options.connectSuccess(response)},handleUserLoginFail=function(options,response){options.connectFail&&"function"==typeof options.connectFail&&options.connectFail(response)},facebookLoginPrompt=function(options){var permissions=options.permissions?options.permissions:void 0;if(options.useAndroidFix){var callbackIndex=0;FB.login(function(response){callbackIndex++;var localCallbackIndex=callbackIndex;setTimeout(function(){localCallbackIndex===callbackIndex&&(response&&response.authResponse?handleAuthorizedUser(options,response,!1):handleUserLoginFail(options,response))},200)},permissions)}else FB.login(function(response){response&&response.authResponse?handleAuthorizedUser(options,response,!1):handleUserLoginFail(options,response)},permissions)},facebookLoginRedirect=function(options){var redirect="https://www.facebook.com/dialog/oauth",params={client_id:options.clientId||appId,redirect_uri:options.redirectUri||window.location.href,response_type:options.responseType||"token",scope:options.permissions.scope||"email"};window.location.href=redirect+"?"+$.param(params)},handleUserLogin=function(options){var ua=navigator.userAgent.toLowerCase(),isIOS="undefined"!=typeof ua&&ua.match(/(iphone|ipod|ipad)/),isChrome="undefined"!=typeof ua&&ua.match(/(chrome|crios)/);isIOS&&isChrome?facebookLoginRedirect(options):facebookLoginPrompt(options)},checkFbAuthorized=function(options){FB.getLoginStatus(function(response){response&&"connected"===response.status?handleAuthorizedUser(options,response,!0):handleUserLogin(options)})},initLogin=function(options){var options=options||{};initialize.then(function(){checkFbAuthorized(options)})};return initLogin}(jQuery),checkFBLoggedIn=function(){return new RSVP.Promise(function(resolve,reject){initialize.then(function(){FB.getLoginStatus(function(response){"connected"===response.status?resolve(response):reject(response)})})})};return init(),{init:initialize,events:events,getLoginStatusResponse:getLoginStatusResponse,share:share,privateMessenger:privateMessenger,login:login,checkFBLoggedIn:checkFBLoggedIn,getPermissions:getPermissions,askForPermissions:askForPermissions,initForObject:initForObject,getShareElements:getShareElements,getShareListener:getShareListener,updateToken:updateToken,fbapi:fbapi}}()}($,RSVP);var GFM=GFM||{};window.GFM_DOMAIN=window.GFM_DOMAIN||"gofundme.com",GFM.FBcallback=function(){"use strict";function shareFlowMobileCallback(response,data){if(shareSuccess(response))Kit.FacebookLogger.recordFBShare(data),Kit.FacebookLogger.recordShareES(data),GFM.analytics.track_event("mp_page_click",{elementid:data.element_id,status:"success",out_rcid:data.rcid}),GFM.remote.request({url:"/mobile/share/fbpost_ok"});else if($.ajax({url:"/dashboard/"+data.fund_url+"/share/ajax_TrackPanelEvent?action=cancel&from_panel="+(data.start?"start_":"")+"fbpost"}),GFM.analytics.track_event("mp_page_click",{elementid:data.element_id,status:"fail",out_rcid:data.rcid}),data.start)if(isAndroid()){var ssTrackerUrl="/dashboard/"+GFM.storage.get("current_fund")+"/share/funnel_update?event=facebook_post";GFM.remote.request({url:ssTrackerUrl,method:"get"}),GFM.remote.request({url:"/mobile/share/fbshare3"})}else GFM.remote.request({url:data.skipUrl});else $(".loady-line").remove(),$("#post2feed").show()}function shareFlowDesktopCallback(response,data){if(shareSuccess(response)){Kit.FacebookLogger.recordFBShare(data),Kit.FacebookLogger.recordShareES(data),GFM.analytics.track_event("mp_page_click",{elementid:data.get("element_id"),status:"success",out_rcid:data.get("rcid")});var next_url="/dashboard/"+GFM.globals.fund_url+"/share/getpanel?panel=fbok",funnel_url="/dashboard/"+GFM.globals.fund_url+"/share/funnel_update?event=facebook_post";data.fb2&&(funnel_url+="&fb2=1"),linkGFMAccount(),GFM.globals.start?(next_url+="&start=1",GFM.remote.request({url:funnel_url,method:"get"})):GFM.globals.share_menu&&(next_url+="&menu=1"),GFM.remote.request({url:next_url,method:"get"})}else $.ajax({url:"/dashboard/"+GFM.globals.fund_url+"/share/ajax_TrackPanelEvent?action=cancel&from_panel="+(GFM.globals.start?"start_":"")+"fbpost"}),GFM.analytics.track_event("mp_page_click",{elementid:data.element_id,status:"fail",out_rcid:data.rcid}),data.skip_fbshare.length&&data.skip_fbshare.click(["fb_fail"]),$(".fbadd_loading").hide(),$(".fbadd_container").show()}function postDonateDesktopCallback(response,data){"object"!=typeof response||response.error_code?(GFM.analytics.track_event("mp_page_click",{viewid:data.get("viewid"),elementid:data.get("elementid"),status:"fail",out_rcid:data.get("rcid")}),$("#fbsharebox2").hide(),$("#fblike_frame").show()):(Kit.FacebookLogger.recordFBShare(data),GFM.analytics.track_event("mp_page_click",{viewid:data.get("viewid"),elementid:data.get("elementid"),status:"success",out_rcid:data.get("rcid")}),Kit.FacebookLogger.recordShareES(data).then(function(){$.get("/mvc.php?route=postdonate/funnel_update",{event:"ty_tw"},function(){$.get("/mvc.php?route=postdonate/funnel_update",{event:"ty_fbp_complete"})})}),$("#details").is(":visible")||$("#details").slideDown(),$("#skip_fblike").hide(),$("#skip_twitter").show(),$(".js-headline").text(_t("Please take a moment to Tweet this campaign...")),$("#fblike_frame").hide(),$("#tw_share").show(),$("#fbsharebox2").hide())}function shareThankDonorCallback(response,action,properties){var status="";response&&!response.error_message?(status="success",$.ajax({type:"GET",url:"//funds."+GFM_DOMAIN+"/index.php?route=share3/record_fbshare",async:!0,data:{cat:0,page:6,pc:properties.pc_code,platform:0,fbid:properties.fbid,url:properties.campaign,fb_action_ids:response.post_id,fb_action_types:properties.fb_action_types,rcid:properties.rcid},complete:function(){}}),GFM.analytics.track_event("mp_page_view",{lightboxid:"lb_brandedfb_success",fbid:properties.fbid,referer_code:properties.rcid}),GFM.remote.request({url:"/dashboard/"+GFM.globals.fund_url+"/dashboard3/brandedfb_success_lb",data:{d_id:$("#d_id").val(),activity:$("#activity").val(),offset:$("#offset").val()}})):status="fail",""!==properties.rcid&&GFM.analytics.track_event("mp_page_click",{elementid:properties.elementid,viewid:properties.viewid,rcid:properties.rcid,status:status})}function shareCallback(response,data){shareSuccess(response)?(GFM.analytics.track_event("mp_page_click",{elementid:data.element_id,status:"success",out_rcid:data.rcid}),Kit.FacebookLogger.recordFBShare(data),Kit.FacebookLogger.recordShareES(data).then(function(){data.callback&&"function"==typeof data.callback&&data.callback(!0)})):(GFM.analytics.track_event("mp_page_click",{elementid:data.element_id,status:"fail",out_rcid:data.rcid}),data.callback&&"function"==typeof data.callback&&data.callback(!1))}function linkGFMAccount(){GFM.globals.fbconnect||Kit.Facebook.getLoginStatusResponse().then(function(response){"connected"===response.status&&response.authResponse&&response.authResponse.accessToken&&response.authResponse.userID&&GFM.facebook.connectAccount(response.authResponse.userID,response.authResponse.accessToken)})}function isAndroid(){return!!navigator.userAgent.match(/Android/gi)}function shareSuccess(shareResponse){try{var status=GFM.facebook.currentStatus().status;if(""===status||"unknown"===status||"not_authorized"===status)return!0}catch(ignore){}return!!(shareResponse&&!shareResponse.error_message&&shareResponse.post_id&&parseInt(shareResponse.post_id)>0)}return{shareFlowMobileCallback:shareFlowMobileCallback,shareFlowDesktopCallback:shareFlowDesktopCallback,postDonateDesktopCallback:postDonateDesktopCallback,shareCallback:shareCallback,shareThankDonorCallback:shareThankDonorCallback}}(),function(GFM,Kit){"use strict";function postShareSuccessHandler(){var hasSkippedPostShareConnectInPast=document.cookie.includes("ask_for_postshare_connect");GFM.intent.util.trackSharedFund(GFM.donateVariables.fundId),void 0===GFM.donateVariables||GFM.donateVariables.showShareUpsellModal!==!0||GFM.intent.util.hasDonatedFund(GFM.donateVariables.fundId)||GFM.intent.util.hasSeenForFund(GFM.donateVariables.fundId)?void 0===GFM.donateVariables||GFM.donateVariables.fbAuthed||hasSkippedPostShareConnectInPast||(selectors.postShareConnect.foundation("open"),GFM.analytics.track_event("mp_page_view",{viewid:"post_share_connect_modal"}),GFM.donateVariables.wasAskedForPostShareConnect=!0):(selectors.shareUpsellModal.foundation("open"),GFM.analytics.track_event("mp_page_view",{viewid:"ol_donate_shareupsell"}))}function skipUpsellPostShareConnectHandler(){var hasSkippedPostShareConnectInPast=document.cookie.includes("ask_for_postshare_connect");GFM.donateVariables.fbAuthed||hasSkippedPostShareConnectInPast?selectors.shareUpsellModal.foundation("close"):(selectors.upsellMain.fadeOut("fast"),selectors.upsellMain.hide(),selectors.upsellConnect.fadeIn("fast"),GFM.analytics.track_event("mp_page_view",{viewid:"post_share_connect_modal"}),GFM.donateVariables.wasAskedForPostShareConnect=!0)}var selectors={shareUpsellModal:$("#share-upsell-modal"),postShareConnect:$("#post-share-connect"),notNow:$("#notnow"),upsellMain:$("#upsell-main"),upsellConnect:$("#upsell-connect")};$(function(){var $shareElements=Kit.Facebook.getShareElements();$shareElements.on(Kit.Facebook.events.success,function(event,data){GFM.donateVariables.lastShareRcid=data.rcid,postShareSuccessHandler()}),selectors.notNow.on("click",function(){skipUpsellPostShareConnectHandler()})})}(GFM,Kit),function(GFM,Kit){"use strict";function recordShareAlooma(status,data,$el){GFM.analytics.track_event("mp_page_click",{elementid:$el.data("gfmAnalyticsElement"),elementmeta:$el.data("gfmAnalyticsMeta"),viewid:GFM.analytics.data.viewid,fund_url:GFM.analytics.data.fund_url,status:status,out_rcid:data.get("rcid")})}$(function(){var $shareElements=Kit.Facebook.getShareListener();$(document).on(Kit.Facebook.events.success,$shareElements,function(event,data){recordShareAlooma(Kit.FacebookLogger.getStatus(event,data),data,$(this)),Kit.FacebookLogger.recordFBShare(data),Kit.FacebookLogger.recordShareES(data)}),$(document).on(Kit.Facebook.events.failure,$shareElements,function(event,data){recordShareAlooma(Kit.FacebookLogger.getStatus(event,data),data,$(this))})})}(GFM,Kit);var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.stringUtils=function(){var capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},validateEmail=function(string){var re=/\S+@\S+\.\S+/;return re.test(string)},getUrlVars=function(){var vars={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value}),vars},makeRandomPassword=function(length){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},getURLParameter=function(name){return decodeURIComponent((new RegExp("[?|&]"+name+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},userIsInFlow=function(flow){return GFM.donateVariables.flow.indexOf(flow)>-1},makeSentenceFromWords=function(words){if(words instanceof Array&&0!==words.length){if(1===words.length)return words[0];if(2===words.length)return words[0]+" and "+words[1];var last=words.pop(),sentence=words.join(", ")+_t(" and ")+last;return sentence}return""};return{capitalizeFirstLetter:capitalizeFirstLetter,validateEmail:validateEmail,getUrlVars:getUrlVars,makeRandomPassword:makeRandomPassword,getURLParameter:getURLParameter,userIsInFlow:userIsInFlow,makeSentenceFromWords:makeSentenceFromWords}}();var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.numberUtils=function(){var formatFaves=function(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},roundFaves=function(num){if(num>=1e3){var rounded=Math.floor(num/1e3);return _t("{numOfThousands}k",[{numOfThousands:rounded}])}return num},formatShareCount=function(num){return num>=1e6?_t("{numOfMillions}M",[{numOfMillions:Math.floor(num/1e5).toFixed(1)/10}]):num>=1e4?_t("{numOfThousands}K",[{numOfThousands:Math.floor(num/1e3)}]):num>=1e3?_t("{numOfThousands}K",[{numOfThousands:Math.floor(num/100).toFixed(1)/10}]):num},getRandomIntBetween=function(min,max){return Math.floor(Math.random()*(max-min))+min};return{formatFaves:formatFaves,roundFaves:roundFaves,formatShareCount:formatShareCount,getRandomIntBetween:getRandomIntBetween}}();var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.originUtils=function(){var validOrigin=function($form){var re=/^(\w+[.])?(gofundme[.](com|co[.]uk)|gofund[.]me|crowdfunding[.]com)[.]?[:]?\d*$/gm;return null!==re.exec(window.location.host.toLowerCase())||window.location.host.indexOf(GFM_DOMAIN)!==-1||($.ajax("/index.php?route=home/jsorigin&origin="+window.location.host+"&location="+window.location.href),void 0!==$form&&($form.children("input[type=password]").each(function(i,e){var length=$(e).val().length;$(e).val(GFM.utils.stringUtils.makeRandomPassword(length))}),$.post({url:"/index.php?route=home/nonoriginpost&location="+window.location.href,data:$form.serialize()})),!1)};return{validOrigin:validOrigin}}();var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.userAgentUtils=function(){var ua=navigator.userAgent.toLowerCase(),isAndroid=function(){return!!ua.match(/android/i)},isIOS=function(){return!!ua.match(/(iphone|ipod|ipad)/i)},isFacebookBrowser=function(){return!!ua.match(/(fban|fbav|fbios|fbiab)/i)},isChromeIOS=function(){return isIOS()&&!!ua.match(/crios/i)},isFacebookAppOnIOS=function(){return isIOS()&&isFacebookBrowser()},isNotFacebookAppOnIOS=function(){return isIOS()&&!isFacebookBrowser()};return{isAndroid:isAndroid,isIOS:isIOS,isFacebookBrowser:isFacebookBrowser,isChromeIOS:isChromeIOS,isFacebookAppOnIOS:isFacebookAppOnIOS,isNotFacebookAppOnIOS:isNotFacebookAppOnIOS}}();var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.animationUtils=function($){var scrollElementTop=function($el,duration){$el.animate({scrollTop:0},duration)},scrollContainerTo=function($container,$element,duration){$container.animate({scrollTop:$element.position().top},duration)},scrollPageTo=function($element,duration,offsetHeight){$("html, body").animate({scrollTop:$element.offset().top-offsetHeight},duration)};return{scrollElementTop:scrollElementTop,scrollContainerTo:scrollContainerTo,scrollPageTo:scrollPageTo}}(jQuery);var GFM=GFM||{};GFM.gaEventTracking=function(){var trackDesktopCheckoutEvent=function(eventAction,eventLabel,eventValue){return"undefined"==typeof eventValue&&(eventValue=null),trackEvent("desktop-checkout",eventAction,eventLabel,eventValue)},trackMobileCheckoutEvent=function(eventAction,eventLabel,eventValue){return"undefined"==typeof eventValue&&(eventValue=null),trackEvent("mobile-checkout",eventAction,eventLabel,eventValue)},trackResponsiveCampaignEvent=function(eventAction,eventLabel){return trackEvent("responsive-campaign",eventAction,eventLabel)},trackSearch=function(eventAction,eventLabel){return trackEvent("search",eventAction,eventLabel)},trackThankATeacher=function(eventAction,eventLabel){return trackEvent("thankateacher",eventAction,eventLabel)},trackLIFG=function(eventAction,eventLabel){return trackEvent("linkedinforgood",eventAction,eventLabel)},trackMobilePostDonate=function(eventAction,eventLabel,screenOrder){if("comment-fb"===eventAction&&eventLabel===GFM.postdonateCommon.actions.accept){var $privateDonation=$("#private-donation-checked-before"),screenNumber=$privateDonation.closest(".success-steps").prevAll(".js-postdonate-screen-number").first().attr("name");"1"===$privateDonation.val()?trackMobilePostDonate("comment-fb-made-private",GFM.postdonateCommon.actions.accept,screenNumber):trackMobilePostDonate("comment-fb-made-private",GFM.postdonateCommon.actions.skip,screenNumber)}if("more-share"===eventAction&&eventLabel===GFM.postdonateCommon.actions.show){var screenNumber=$(".success-step-3").prevAll(".js-postdonate-screen-number").first().attr("name");GFM.utils.userAgentUtils.isIOS()&&trackMobilePostDonate("more-share-sms",eventLabel,screenNumber),trackMobilePostDonate("more-share-email",eventLabel,screenNumber),trackMobilePostDonate("more-share-tweet",eventLabel,screenNumber),trackMobilePostDonate("more-share-back-to-campaign",eventLabel,screenNumber),trackMobilePostDonate("more-share-another-campaign",eventLabel,screenNumber)}return screenOrder&&(eventAction=eventAction+" ("+String(screenOrder)+")"),trackEvent("mobile-postdonate",eventAction,eventLabel)},track3dsRedirection=function(eventAction,eventLabel,eventValue,eventCallback){return trackEvent("3ds",eventAction,eventLabel,eventValue,eventCallback)},trackPostShareUpsell=function(eventAction,eventLabel,eventValue,eventCallback){return trackEvent("post-share-upsell",eventAction,eventLabel,eventValue,eventCallback)},trackEvent=function(eventCategory,eventAction,eventLabel,eventValue,eventCallback){pushRawEvent("trigger-ga-event",eventCategory,eventAction,eventLabel,eventValue,eventCallback)},trackVirtualPageView=function(pagePath){window.dataLayer&&window.dataLayer instanceof Array&&window.dataLayer.push({event:"trigger-page-view",pagePath:pagePath})},pushRawEvent=function(event,eventCategory,eventAction,eventLabel,eventValue,eventCallback){window.dataLayer&&window.dataLayer instanceof Array?("customizeComplete"==event&&GFM.gaEventTracking.trackVirtualPageView("customizeComplete"),window.dataLayer.push({event:event,eventCategory:eventCategory,eventAction:eventAction,eventLabel:eventLabel,eventValue:eventValue,nonInteraction:!0,eventCallback:eventCallback})):null!=eventCallback&&eventCallback()};return{trackDesktopCheckoutEvent:trackDesktopCheckoutEvent,trackMobileCheckoutEvent:trackMobileCheckoutEvent,trackResponsiveCampaignEvent:trackResponsiveCampaignEvent,trackEvent:trackEvent,trackSearch:trackSearch,trackThankATeacher:trackThankATeacher,trackLIFG:trackLIFG,trackMobilePostDonate:trackMobilePostDonate,track3dsRedirection:track3dsRedirection,trackPostShareUpsell:trackPostShareUpsell,pushRawEvent:pushRawEvent,trackVirtualPageView:trackVirtualPageView}}();var GFM=GFM||{};GFM.analyticsEventTracking=function(){var steelSwanTrack=function(event,paymentProcessor,donationId,params){var url="/mvc.php?route=track/donation";return params=void 0===params||null===params?{}:params,params.e=event,params.p_proc=paymentProcessor,params.donation_id=donationId,$.ajax({method:"GET",url:url,data:params})},steelSwanTrackBundle=function(events){var url="/mvc.php?route=track/donationbundle";return $.post({method:"POST",url:url,data:events})},impressionTrack=function(commonUuid,interactionType,itemId){if(void 0!==GFM.analytics){var params={},impression={};impression.common_uuid=commonUuid,impression.type=interactionType,impression.item_id=itemId,params.impression_choice=impression,GFM.analytics.track_event("impression_interaction",params,!0,"impression")}};return{impressionTrack:impressionTrack,steelSwanTrack:steelSwanTrack,steelSwanTrackBundle:steelSwanTrackBundle}}();var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.TruncateText=function($){var TruncateText=function($el){if($el.length<1)throw new Error("No element selected for TruncateText");this.$el=$el,this.disableNonOverflowTruncation(),this._addFullTextClickHandler()};return TruncateText}(jQuery),GFM.components.TruncateText.prototype={_addFullTextClickHandler:function(){var _this=this,$expandLink=(this.$el.find(".js-truncate"),this.$el.find(".read-more"));$expandLink.on("click",function(e){e.preventDefault(),_this.expandText()})},expandText:function(){var $content=this.$el.find(".js-truncate"),$expandLink=this.$el.find(".read-more");$content.removeClass("truncate-text"),$expandLink.addClass("hide")},shrinkText:function(){var $content=this.$el.find(".js-truncate"),$expandLink=this.$el.find(".read-more");$content.addClass("truncate-text"),$expandLink.removeClass("hide")},disableNonOverflowTruncation:function(){var $content=this.$el.find(".js-truncate");$content.prop("scrollHeight")&&$content.prop("scrollHeight")<=$content.outerHeight()&&this.expandText()}};var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.ScrollingPagination=function($){var ScrollingPagination=function($el,options){$el.length<1||(this.$el=$el,this.options=$.extend({},options),this.currentPageIndex=this.$el.find("."+this.options.selectedLinkClass).data("page-index")||0,this.pagesLoaded=$el.find(".js-pagination-panel").length,this.linkRenderMap=[],Array.prototype.push.apply(this.linkRenderMap,$.makeArray($el.find(".js-pagination-prev-link").not(".hide"))),Array.prototype.push.apply(this.linkRenderMap,$.makeArray($el.find(".js-pagination-link").not(".hide"))),Array.prototype.push.apply(this.linkRenderMap,$.makeArray($el.find(".js-pagination-next-link").not(".hide"))),this._addNavClickHandler(),this._addLoadMoreClickHandler(),this._addNextScrollClickHandler(),this._addPrevScrollClickHandler())};return ScrollingPagination}(jQuery),GFM.components.ScrollingPagination.prototype={_addNavClickHandler:function(){var _this=this,$navLink=this.$el.find(".js-pagination-link"),selectedLinkClass=this.options.selectedLinkClass;$navLink.on("click",function(e){var nextPageIndex=$(this).data("page-index"),triggerData={prevPageIndex:_this.currentPageIndex,nextPageIndex:nextPageIndex};e.preventDefault(),_this.displayPanel(nextPageIndex),$navLink.removeClass(selectedLinkClass),$(this).addClass(selectedLinkClass),$(this).trigger("pagination.pageChanged",triggerData),_this.currentPageIndex=nextPageIndex})},_addNextScrollClickHandler:function(){var _this=this,$scrollNextLink=this.$el.find(".js-pagination-next-link"),$scrollPrevLink=this.$el.find(".js-pagination-prev-link"),$navLink=this.$el.find(".js-pagination-link"),hideLinkArrowsAtEnd=this.options.hideLinkArrowsAtEnd;$scrollNextLink.on("click",function(e){var linkRenderMap=_this.linkRenderMap,$nextLinkToDisplay=$navLink.not(".hide").last().next(".js-pagination-link"),$firstVisibleLink=$(linkRenderMap[0]);if(e.preventDefault(),hideLinkArrowsAtEnd&&$nextLinkToDisplay[0]===$navLink.eq($navLink.length-2)[0])linkRenderMap[linkRenderMap.length-1]=$navLink.last()[0];else if($nextLinkToDisplay.length<1)return;linkRenderMap.splice(1,1),linkRenderMap.splice(-1,0,$nextLinkToDisplay[0]),$firstVisibleLink.hasClass(".js-pagination-prev-link")||(linkRenderMap[0]=$scrollPrevLink[0]),_this._renderLinks()})},_addLoadMoreClickHandler:function(){var _this=this,$scrollNextLink=this.$el.find(".js-pagination-next-link"),$navLink=this.$el.find(".js-pagination-link"),hideLinkArrowsAtEnd=this.options.hideLinkArrowsAtEnd;$scrollNextLink.on("click",function(e){var $nextLinkToDisplay=$navLink.not(".hide").last().next(".js-pagination-link"),nextLinkIndex=$nextLinkToDisplay.data("pageIndex");e.preventDefault(),nextLinkIndex>=_this.pagesLoaded&&(_this.pagesLoaded+=Math.min(_this.options.pageLoadLimit,_this.options.totalPages-nextLinkIndex)||0,$(this).trigger("pagination.loadMorePages",{offsetIndex:nextLinkIndex})),hideLinkArrowsAtEnd&&$nextLinkToDisplay[0]===$navLink.eq($navLink.length-2)[0]&&$navLink.last().data("pageIndex")>=_this.pagesLoaded&&(_this.pagesLoaded+=Math.min(_this.options.pageLoadLimit,_this.options.totalPages-$navLink.last().data("pageIndex"))||0,$(this).trigger("pagination.loadMorePages",{offsetIndex:$navLink.last().data("pageIndex")}))})},_addPrevScrollClickHandler:function(){var _this=this,$scrollNextLink=this.$el.find(".js-pagination-next-link"),$scrollPrevLink=this.$el.find(".js-pagination-prev-link"),$navLink=this.$el.find(".js-pagination-link"),hideLinkArrowsAtEnd=this.options.hideLinkArrowsAtEnd;$scrollPrevLink.on("click",function(e){var linkRenderMap=_this.linkRenderMap,$prevLinkToDisplay=$navLink.not(".hide").first().prev(".js-pagination-link"),$lastVisibleLink=$(linkRenderMap[linkRenderMap.length-1]);if(e.preventDefault(),hideLinkArrowsAtEnd&&$prevLinkToDisplay[0]===$navLink.eq(1)[0])linkRenderMap[0]=$navLink.first()[0];else if($prevLinkToDisplay.length<1)return;linkRenderMap.splice(-2,1),linkRenderMap.splice(1,0,$prevLinkToDisplay[0]),$lastVisibleLink.hasClass(".js-pagination-next-link")||(linkRenderMap[linkRenderMap.length-1]=$scrollNextLink[0]),_this._renderLinks()})},_renderLinks:function(){var $scrollNextLink=this.$el.find(".js-pagination-next-link"),$scrollPrevLink=this.$el.find(".js-pagination-prev-link"),$navLink=this.$el.find(".js-pagination-link");$scrollNextLink.addClass("hide"),$scrollPrevLink.addClass("hide"),$navLink.addClass("hide"),this.linkRenderMap.forEach(function(el,index){$(el).removeClass("hide")})},renderLinksAt:function(linkIndex){var navLinksToShow,$scrollNextLink=this.$el.find(".js-pagination-next-link"),$scrollPrevLink=this.$el.find(".js-pagination-prev-link"),$navLink=this.$el.find(".js-pagination-link"),hideLinkArrowsAtEnd=this.options.hideLinkArrowsAtEnd,selectedLinkClass=this.options.selectedLinkClass,totalPages=this.options.totalPages,maxButtons=this.options.maxButtons,totalDisplayedLinks=this.linkRenderMap.length,i=linkIndex;for(this.linkRenderMap=[],navLinksToShow=totalPages<=maxButtons?totalDisplayedLinks:hideLinkArrowsAtEnd&&(0===linkIndex||linkIndex>totalPages-totalDisplayedLinks)?totalDisplayedLinks-1:totalDisplayedLinks-2,hideLinkArrowsAtEnd&&0===linkIndex||this.linkRenderMap.push($scrollPrevLink[0]),i>=totalPages-navLinksToShow&&(i=totalPages-navLinksToShow),i;i<linkIndex+navLinksToShow;i++){var $currentNavLink=$navLink.filter('[data-page-index="'+i+'"]');$currentNavLink.length&&this.linkRenderMap.push($currentNavLink[0])}this.linkRenderMap.length<totalDisplayedLinks&&this.linkRenderMap.push($scrollNextLink[0]),$navLink.removeClass(selectedLinkClass),$navLink.filter('[data-page-index="'+linkIndex+'"]').addClass(selectedLinkClass),this._renderLinks()},displayPanel:function(pageIndex){var $content=this.$el.find(".js-pagination-content");$content.find(".js-pagination-panel").addClass("hide"),$content.find('.js-pagination-panel[data-offset="'+pageIndex+'"]').removeClass("hide")}};var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.globalNav=function(){function assignElementRefs(){$navbar=$("#nav-menu"),$hamburgerIcon=$navbar.find("#nav-menu-hamburger-icon"),$searchIcon=$navbar.find("#nav-menu-search-icon"),$hamburgerMenu=$navbar.find("#nav-menu-hamburger-dropdown"),$searchMenu=$navbar.find("#nav-menu-search-dropdown"),$desktopSearchInput=$navbar.find(".js-search-nav-bar-large"),$mobileSearchInput=$navbar.find(".js-search-nav-bar-small"),$navFundsCarousel=$searchMenu.find(".js-carousel-contain"),$navCarouselLeft=$searchMenu.find(".js-carousel-left"),$navCarouselRight=$searchMenu.find(".js-carousel-right"),cookieBannerHeight=0,$mainColumn=void 0!==$(".main-column")[0]?$(".main-column"):$("body"),$campaignColumn=void 0!==$(".pg-campaign")[0]?$(".pg-campaign"):$("body")}function setHideCookieBanner(hide){if($(".js-cookie-banner").length>0){if(0===cookieBannerHeight&&(cookieBannerHeight=$(".js-cookie-banner")[0].offsetHeight),hide&&!$(".js-cookie-banner").is(":visible"))return;var isCampaign=$campaignColumn&&$campaignColumn.length,isHomepage=$mainColumn&&$campaignColumn.length;if(isCampaign)var currentMarginTop=parseInt($campaignColumn.css("marginTop").replace("px",""),10);else if(isHomepage)var currentMarginTop=parseInt($mainColumn.css("marginTop").replace("px",""),10);hide?($(".js-cookie-banner").hide("fast"),isCampaign?$campaignColumn.animate({marginTop:currentMarginTop-cookieBannerHeight+"px"},200):isHomepage&&$mainColumn.animate({marginTop:currentMarginTop-cookieBannerHeight+"px"},200)):($(".js-cookie-banner").show("fast"),isCampaign?$campaignColumn.animate({marginTop:currentMarginTop+cookieBannerHeight+"px"},200):isHomepage&&$mainColumn.animate({marginTop:currentMarginTop+cookieBannerHeight+"px"},200))}}function menuActive(){setHideCookieBanner(!0),$("body").addClass("is-locked"),$navbar.trigger("globalNav.menuOpen")}function menuClosed(){setHideCookieBanner(!1),$("body").removeClass("is-locked"),$navbar.trigger("globalNav.menuClose")}function hideSearchPrompt(){$searchMenu.find(".js-search-prompt").hide()}function showSearchPrompt(){$searchMenu.find(".js-search-prompt").show()}function activateHamburgerMenu(){$hamburgerMenu.show(),$searchMenu.hide(),transformicons.transform("#nav-menu-hamburger-icon"),transformicons.revert("#nav-menu-search-icon"),$navbar.find("js-nav-hamburger-icon"),$hamburgerIcon.addClass("is-open"),$searchIcon.removeClass("is-open"),$hamburgerIcon.hasClass("icon-badge")&&($.cookie("givingclubnotification_shown",1,{expires:30,path:"/"}),$hamburgerIcon.removeClass("icon-badge")),$hamburgerIcon.data("showingProfileBadge")&&($.cookie("profileLinkNotification_Shown",1,{expires:30,path:"/"}),$hamburgerIcon.removeClass("icon-badge")),menuActive()}function activateMobileSearchMenu(){$hamburgerMenu.hide(),$searchMenu.show(),transformicons.revert("#nav-menu-hamburger-icon"),transformicons.transform("#nav-menu-search-icon"),$hamburgerIcon.removeClass("is-open"),$searchIcon.addClass("is-open"),$(".js-nav-reveal-overlay").fadeIn(),menuActive()}function activateDesktopSearchMenu(){$navbar.find(".js-hide-desktop-nav-search").hide(),showSearchPrompt(),$(".js-nav-reveal-overlay").fadeIn(),$("body").css({overflow:"hidden"}),$hamburgerMenu.hide(),$searchMenu.show(),$hamburgerIcon.addClass(SWITCH_HAMBURGER_FUNCTIONALITY_CLASS),transformicons.transform("#nav-menu-hamburger-icon"),$hamburgerIcon.removeClass("is-open"),menuActive()}function hideMenus(){$navbar.find(".js-hide-desktop-nav-search").show(),hideSearchPrompt(),$(".js-nav-reveal-overlay").fadeOut(),$desktopSearchInput.val(""),$("body").css({overflow:""}),$hamburgerMenu.hide(),$searchMenu.hide(),$hamburgerIcon.removeClass(SWITCH_HAMBURGER_FUNCTIONALITY_CLASS),transformicons.revert("#nav-menu-hamburger-icon"),transformicons.revert("#nav-menu-search-icon"),$hamburgerIcon.add($searchIcon).removeClass("is-open"),menuClosed()}function hideRecommendedCampaignTiles(){$searchMenu.find(".js-nav-recommended-campaigns").hide()}function showRecommendedCampaignTiles(){$searchMenu.find(".js-nav-recommended-campaigns").show()}function getRecommendedCampaigns(showLoadyGuy){var params={};return params.pageSource="globalNav",GFM&&GFM.donateVariables&&(params.currentFundId=GFM.donateVariables.fundId),showLoadyGuy?$searchMenu.find(".js-nav-loady-guy").show():$searchMenu.find(".js-nav-recommended-campaigns").hide(),$.ajax({url:"/mvc.php?route=recommendedfunds",type:"GET",data:params})}function renderRecommendedCampaignsMobile(response){if(response){var $campaignTiles=$(response).find(".js-tile"),$campaignTileColumn=$searchMenu.find(".js-nav-recommended-campaigns"),tileWidth=$campaignTileColumn.width(),tileImgMaxHeight=Math.round(tileWidth/1.5);$searchMenu.find(".js-nav-loady-guy").hide(),$navFundsCarousel.append($campaignTiles),$campaignTiles.find(".tile-img").css({"max-height":tileImgMaxHeight}),initializeLazyLoad(),$searchMenu.find(".js-nav-recommended-campaigns").slideDown();
}}function renderRecommendedCampaignsDesktop(response){if(response){var $campaignTiles=$(response).find(".js-tile");$searchMenu.find(".js-nav-loady-guy").hide(),$navFundsCarousel.append($campaignTiles),initializeLazyLoad(),$searchMenu.find(".js-nav-recommended-campaigns").slideDown(),$navFundsCarousel.trigger(CAROUSEL_LOAD_MORE_FUNDS_EVENT)}}function handleGetCampaignsError(response){}function isRecommendedFundsTilesLoaded(){return $searchMenu.find(".js-tile").length>0}function initializeLazyLoad(){function setupLazyload(){$searchMenu.find(".js-tile").each(function(index){var eventString=EVENT_STRING_PREFIX+index;$(this).find("img").lazyload({event:eventString,skip_invisible:!0})})}function loadNextBatchOfImagesStartingAtIndex(startIndex){$searchMenu.find(".js-tile").slice(startIndex,startIndex+FUNDS_TO_SHOW).each(function(index){var currentIndex=index+startIndex,eventString=EVENT_STRING_PREFIX+currentIndex;$(this).find("img").trigger(eventString)})}function displayNextSetOfFunds(){$searchMenu.find(".js-tile:hidden").slice(0,FUNDS_TO_SHOW).each(function(){$(this).slideDown(400),hiddenFunds--,hiddenFunds<=0&&$searchMenu.find(".js-more-rec-funds").hide()})}var FUNDS_TO_SHOW=3,EVENT_STRING_PREFIX="load_img_",totalFunds=$searchMenu.find(".js-tile").length,hiddenFunds=totalFunds-FUNDS_TO_SHOW;$searchMenu.find(".js-tile").slice(0,FUNDS_TO_SHOW).each(function(){$(this).show()}),setupLazyload(),loadNextBatchOfImagesStartingAtIndex(0),loadNextBatchOfImagesStartingAtIndex(FUNDS_TO_SHOW),hiddenFunds>0?$searchMenu.find(".js-more-rec-funds").show():$searchMenu.find(".js-more-rec-funds").hide(),$navFundsCarousel.on(CAROUSEL_LOAD_MORE_FUNDS_EVENT,function(){displayNextSetOfFunds(),loadNextBatchOfImagesStartingAtIndex(totalFunds-hiddenFunds),hiddenFunds<=0&&$(this).off(CAROUSEL_LOAD_MORE_FUNDS_EVENT).off("scroll.loadMoreFunds")})}function init(){function activateSubmenu(row){if($row=$(row),$row.find(".fa-chevron-right").is(":visible"))return $(".primary-category").removeClass("active"),$row.addClass("active"),!1}assignElementRefs(),isRecommendedFundsTilesLoaded()&&initializeLazyLoad(),$hamburgerIcon.on("click",function(){$hamburgerMenu.is(":visible")||$hamburgerIcon.hasClass(SWITCH_HAMBURGER_FUNCTIONALITY_CLASS)?hideMenus():activateHamburgerMenu()}),$searchIcon.on("click",function(){$searchMenu.is(":visible")?hideMenus():(showRecommendedCampaignTiles(),hideSearchPrompt(),activateMobileSearchMenu())}),$searchIcon.on("click.loadCampaigns",function(){isRecommendedFundsTilesLoaded()||getRecommendedCampaigns(!0).done(renderRecommendedCampaignsMobile).fail(handleGetCampaignsError),$(this).off("click.loadCampaigns")}),$mobileSearchInput.on("focus",function(){hideRecommendedCampaignTiles(),showSearchPrompt()}),$mobileSearchInput.on("gfmSearch.searchTermEntered",function(ev,data){data.isDropdownVisible?hideSearchPrompt():showSearchPrompt()}),$searchMenu.find(".js-more-rec-funds").on("click.loadMoreRecFunds",function(){$navFundsCarousel.trigger(CAROUSEL_LOAD_MORE_FUNDS_EVENT)}),$desktopSearchInput.on("focus",function(){$(".search-drop").is(":visible")||$(".categories-container").is(":visible")||activateDesktopSearchMenu()}),$desktopSearchInput.on("hover",function(){$(".search-drop").is(":visible")||$(".categories-container").is(":visible")||activateDesktopSearchMenu()}),$desktopSearchInput.focus(function(){$(this).attr("placeholder",_t("Try searching locations, campaign titles and names"))}).blur(function(){$(this).attr("placeholder",_t("Search"))}),$desktopSearchInput.on("keydown",function(e){var keyCode=e.which;9==keyCode&&hideMenus()}),$navbar.find(".js-search-nav-contain-large").on("click",function(){$desktopSearchInput.focus()}),$(".js-nav-reveal-overlay").on("click",function(){hideMenus()}),$(".js-nav-reveal-overlay").on("mouseover",function(){hideMenus()}),$menu=$(".primary-categories"),$menu.menuAim({activate:activateSubmenu}),$(".category-header").on("click",function(e){$(this).find(".fa-chevron-up").is(":visible")&&($(".primary-category").removeClass("active"),e.preventDefault())}),$(".category-selector").on("click",function(e){if(!$(this).find(".fa-chevron-right").is(":visible"))return $(".primary-category").removeClass("active"),$(this).parent("li").addClass("active"),e.preventDefault(),!1}),$(window).resize(function(){$(".category-selector .fa-chevron-right").is(":visible")&&$(".primary-category.active").length<1&&$(".primary-category").first().addClass("active")}),$desktopSearchInput.on("focus.loadCampaigns",function(){isRecommendedFundsTilesLoaded()?$navFundsCarousel.trigger(CAROUSEL_LOAD_MORE_FUNDS_EVENT):getRecommendedCampaigns(!1).done(renderRecommendedCampaignsDesktop).fail(handleGetCampaignsError),$(this).off("focus.loadCampaigns")}),$desktopSearchInput.on("hover.loadCampaigns",function(){isRecommendedFundsTilesLoaded()?$navFundsCarousel.trigger(CAROUSEL_LOAD_MORE_FUNDS_EVENT):getRecommendedCampaigns(!1).done(renderRecommendedCampaignsDesktop).fail(handleGetCampaignsError),$(this).off("focus.loadCampaigns")}),$navCarouselLeft.on("click",function(){var tileWidth=$navFundsCarousel.find(".js-tile").outerWidth(!0),scrollDistance=Math.floor($navFundsCarousel.width()/tileWidth)*tileWidth,scrollArrowWidth=$navCarouselRight.width();$navCarouselRight.is(":hidden")?$navFundsCarousel.animate({scrollLeft:$navFundsCarousel.scrollLeft()-scrollDistance+scrollArrowWidth},500):$navFundsCarousel.animate({scrollLeft:$navFundsCarousel.scrollLeft()-scrollDistance},500)}),$navCarouselRight.on("click",function(){var tileWidth=$navFundsCarousel.find(".js-tile").outerWidth(!0),scrollDistance=Math.floor($navFundsCarousel.width()/tileWidth)*tileWidth,scrollArrowWidth=$navCarouselLeft.width();$navCarouselLeft.is(":hidden")?$navFundsCarousel.animate({scrollLeft:$navFundsCarousel.scrollLeft()+scrollDistance-scrollArrowWidth},500):$navFundsCarousel.animate({scrollLeft:$navFundsCarousel.scrollLeft()+scrollDistance},500)}),$navFundsCarousel.on("scroll",function(){var scrollWidth=$(this)[0].scrollWidth,scrollLeft=$(this).scrollLeft(),scrollRight=scrollLeft+$(this).innerWidth();scrollLeft<=0?$navCarouselLeft.hide():scrollRight>=scrollWidth-1?$navCarouselRight.hide():($navCarouselLeft.show(),$navCarouselRight.show())}),$navFundsCarousel.on("scroll.loadMoreFunds",function(){var scrollWidth=$(this)[0].scrollWidth,scrollLeft=$(this).scrollLeft(),scrollRight=scrollLeft+$(this).innerWidth();scrollRight>=scrollWidth-500&&$(this).trigger(CAROUSEL_LOAD_MORE_FUNDS_EVENT)}),$desktopSearchInput.on("gfmSearch.searchTermEntered",function(){$searchMenu.hide()}),new Search("js-search-nav-bar-small","js-search-nav-drop-small","js-search-nav-contain-small",new GlobalSearchDelegate),new Search("js-search-nav-bar-large","js-search-nav-drop-large","js-search-nav-contain-large",new GlobalSearchDelegate)}var $navbar,$hamburgerIcon,$searchIcon,$hamburgerMenu,$searchMenu,$desktopSearchInput,$mobileSearchInput,$navFundsCarousel,$navCarouselLeft,$navCarouselRight,cookieBannerHeight,$campaignColumn,$mainColumn,SWITCH_HAMBURGER_FUNCTIONALITY_CLASS="js-desktop-search-open",CAROUSEL_LOAD_MORE_FUNDS_EVENT="nav.carousel.loadMoreFunds";return{init:init}}(),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.transformicons=factory()}(this||window,function(){"use strict";var tcon={},_transformClass="tcon-transform",DEFAULT_EVENTS={},getElementList=function(elements){return"string"==typeof elements?Array.prototype.slice.call(document.querySelectorAll(elements)):"undefined"==typeof elements||elements instanceof Array?elements:[elements]},getEventList=function(events){return"string"==typeof events?events.toLowerCase().split(" "):events},setListeners=function(elements,events,remove){var method=(remove?"remove":"add")+"EventListener",elementList=getElementList(elements),currentElement=elementList.length,eventLists={};for(var prop in DEFAULT_EVENTS)eventLists[prop]=events&&events[prop]?getEventList(events[prop]):DEFAULT_EVENTS[prop];for(;currentElement--;)for(var occasion in eventLists)for(var currentEvent=eventLists[occasion].length;currentEvent--;)elementList[currentElement][method](eventLists[occasion][currentEvent],handleEvent)},handleEvent=function(event){tcon.toggle(event.currentTarget)};return tcon.add=function(elements,events){return setListeners(elements,events),tcon},tcon.remove=function(elements,events){return setListeners(elements,events,!0),tcon},tcon.transform=function(elements){return getElementList(elements).forEach(function(element){element.classList.add(_transformClass)}),tcon},tcon.revert=function(elements){return getElementList(elements).forEach(function(element){element.classList.remove(_transformClass)}),tcon},tcon.toggle=function(elements){return getElementList(elements).forEach(function(element){tcon[element.classList.contains(_transformClass)?"revert":"transform"](element)}),tcon},tcon}),$(function(){GFM.components.globalNav.init()}),$(function(){var $globalNav=$(".fixed-container"),$navbar=$("#nav-menu"),$searchIcon=$navbar.find("#nav-menu-search-icon"),$desktopSearchInput=$navbar.find(".js-search-nav-bar-large"),$mobileSearchInput=$navbar.find(".js-search-nav-bar-small"),analyticsEvent="global_nav_search",impressionInteractionClick="click",redshiftClickTrack=function($element,overlayViewId){var trackOptions={};overlayViewId&&(trackOptions.viewid=overlayViewId),$element.data("gfmAnalyticsElement")&&(trackOptions.elementid=$element.data("gfmAnalyticsElement")),$element.data("gfmAnalyticsMeta")&&(trackOptions.elementmeta=$element.data("gfmAnalyticsMeta")),GFM.analytics.track_event("mp_page_click",trackOptions)};$globalNav.on("click","[data-gfm-analytics-element]",function(){redshiftClickTrack($(this));var commonId=$(this).data("impressionsCommonId")||0,itemId=$(this).data("impressionId")||0;void 0!==GFM.analyticsEventTracking&&0!=commonId&&0!=itemId&&GFM.analyticsEventTracking.impressionTrack(commonId,impressionInteractionClick,itemId)}),$searchIcon.on("click.searchIntentEvent",function(){GFM.analytics.track_client_event(analyticsEvent,"search_intent_button_clicked"),$(this).off("click.searchIntentEvent")}),$("#global-nav-search").on("focus.searchIntentEvent",function(){GFM.analytics.track_client_event(analyticsEvent,"search_intent_button_clicked"),$(this).off("focus.searchIntentEvent")}),$desktopSearchInput.add($mobileSearchInput).on("gfmSearch.searchTermEntered.trackAnalytics",function(e,data){GFM.analytics.track_client_event(analyticsEvent,"search_term_entered",null,data),$(this).off("gfmSearch.searchTermEntered.trackAnalytics")}),$desktopSearchInput.add($mobileSearchInput).on("gfmSearch.searchExecuted",function(e,data){GFM.analytics.track_client_event(analyticsEvent,"search_executed",null,data)})}),function($){function init(opts){var $menu=$(this),activeRow=null,mouseLocs=[],lastDelayLoc=null,timeoutId=null,options=$.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:$.noop,exit:$.noop,activate:$.noop,deactivate:$.noop,exitMenu:$.noop},opts),MOUSE_LOCS_TRACKED=3,DELAY=300,mousemoveDocument=function(e){mouseLocs.push({x:e.pageX,y:e.pageY}),mouseLocs.length>MOUSE_LOCS_TRACKED&&mouseLocs.shift()},mouseleaveMenu=function(){timeoutId&&clearTimeout(timeoutId),options.exitMenu(this)&&(activeRow&&options.deactivate(activeRow),activeRow=null)},mouseenterRow=function(){timeoutId&&clearTimeout(timeoutId),options.enter(this),possiblyActivate(this)},mouseleaveRow=function(){options.exit(this)},clickRow=function(){activate(this)},activate=function(row){row!=activeRow&&(activeRow&&options.deactivate(activeRow),options.activate(row),activeRow=row)},possiblyActivate=function(row){var delay=activationDelay();delay?timeoutId=setTimeout(function(){possiblyActivate(row)},delay):activate(row)},activationDelay=function(){function slope(a,b){return(b.y-a.y)/(b.x-a.x)}if(!activeRow||!$(activeRow).is(options.submenuSelector))return 0;var offset=$menu.offset(),upperLeft={x:offset.left,y:offset.top-options.tolerance},upperRight={x:offset.left+$menu.outerWidth(),y:upperLeft.y},lowerLeft={x:offset.left,y:offset.top+$menu.outerHeight()+options.tolerance},lowerRight={x:offset.left+$menu.outerWidth(),y:lowerLeft.y},loc=mouseLocs[mouseLocs.length-1],prevLoc=mouseLocs[0];if(!loc)return 0;if(prevLoc||(prevLoc=loc),prevLoc.x<offset.left||prevLoc.x>lowerRight.x||prevLoc.y<offset.top||prevLoc.y>lowerRight.y)return 0;if(lastDelayLoc&&loc.x==lastDelayLoc.x&&loc.y==lastDelayLoc.y)return 0;var decreasingCorner=upperRight,increasingCorner=lowerRight;"left"==options.submenuDirection?(decreasingCorner=lowerLeft,increasingCorner=upperLeft):"below"==options.submenuDirection?(decreasingCorner=lowerRight,increasingCorner=lowerLeft):"above"==options.submenuDirection&&(decreasingCorner=upperLeft,increasingCorner=upperRight);var decreasingSlope=slope(loc,decreasingCorner),increasingSlope=slope(loc,increasingCorner),prevDecreasingSlope=slope(prevLoc,decreasingCorner),prevIncreasingSlope=slope(prevLoc,increasingCorner);return decreasingSlope<prevDecreasingSlope&&increasingSlope>prevIncreasingSlope?(lastDelayLoc=loc,DELAY):(lastDelayLoc=null,0)};$menu.mouseleave(mouseleaveMenu).find(options.rowSelector).mouseenter(mouseenterRow).mouseleave(mouseleaveRow).click(clickRow),$(document).mousemove(mousemoveDocument)}$.fn.menuAim=function(opts){return this.each(function(){init.call(this,opts)}),this}}(jQuery);var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.Heart=function($){var Heart=function($el){$el.length<1||(this.$el=$el,this.networking=!1,this._addLikeHeartHandler(),this.supporterEmail="")};return Heart}(jQuery),GFM.components.Heart.prototype={_addLikeHeartHandler:function(){var _this=this,$el=this.$el,$emailFavoriteButton=($("#js-fb-favorite"),$("#js-email-favorite")),$emailLoadingButton=($("#js-fb-favorite-loading"),$("#js-email-favorite-loading"));$el.click(function(ev){if(!_this.networking)if(ev.preventDefault(),_this._hideErrors(),_this.isFavorite())_this.unfavoriteIt();else{var $likeLoginModal=$("#like-login-modal"),$emailTextInput=$("#txt-email-favorite"),likeType=GFM.utils.stringUtils.capitalizeFirstLetter($el.data("contentType"));if("Fund"===likeType&&(likeType="Campaign"),$likeLoginModal.data("heartContentId",$el.data("contentId")),$likeLoginModal.data("heartContentType",$el.data("contentType")),$likeLoginModal.data("isCampaignLike",!0),void 0!==GFM.userEmail)return void _this.favoriteIt(GFM.userEmail);Kit.Facebook.checkFBLoggedIn().then(function(){FB.api("/me",{fields:"email, name, id"},function(res){_this.favoriteIt(res.email,res.name,res.id)})},function(){$(".js-like-type").html(likeType),GFM.utils.modalBehaviors.open("#"+$likeLoginModal.attr("id")),$(window).resize(function(){"txt-email-favorite"===document.activeElement.id&&GFM.utils.userAgentUtils.isAndroid()&&GFM.utils.animationUtils.scrollContainerTo($likeLoginModal,$emailTextInput,50)}),GFM.analytics.track_event("mp_page_view",{viewid:$likeLoginModal.data("gfm-analytics-viewid")}),$emailFavoriteButton.off("click.emailFavorite"),$emailFavoriteButton.on("click.emailFavorite",function(ev){if(ev.preventDefault(),_this._hideErrors(),!GFM.utils.originUtils.validOrigin())return void _this._closeModals();$(this).addClass("hide"),$emailLoadingButton.removeClass("hide");var email=$("#txt-email-favorite").val().trim();if(!GFM.utils.stringUtils.validateEmail(email))return $(".email-invalid-error").show(),GFM.utils.animationUtils.scrollElementTop($("#like-login-modal")),void _this._resetButtons();GFM.userEmail=email;var emailopt=null;$(".facheckbox").length>0&&(emailopt=$(".facheckbox").hasClass("ischecked")?1:0),_this.favoriteIt(email,void 0,void 0,emailopt)}),$.ajax({type:"GET",url:"/mvc.php?route=track/donation&e=heart_lb"})})}})},_resetButtons:function(){$("#js-fb-favorite").removeClass("hide"),$("#js-email-favorite").removeClass("hide"),$("#js-fb-favorite-loading").addClass("hide"),$("#js-email-favorite-loading").addClass("hide")},_closeModals:function(){$("#like-login-modal").foundation("close"),this._resetButtons()},_hideErrors:function(){$(".alert").hide()},favoriteIt:function(email,fbname,fbid,emailopt){this.networking=!0;var _this=this,el=$(".heart-"+_this.$el.data("contentId"));el.addClass("is-fave"),_this.supporterEmail=email;var data={contentId:el.data("contentId"),contentType:el.data("contentType"),fid:GFM.donateVariables.fundId,email:email};"undefined"!=typeof fbname&&"undefined"!=typeof fbid&&(data.fbname=fbname,data.fbid=fbid,"fund"===data.contentType&&this.likeCampaign()),null!==emailopt&&(data.emailopt=emailopt),$.ajax({type:"POST",url:"/mvc.php?route=socialcontent/heartIt",data:data,dataType:"json"}).done(function(res){!res.success,_this.setHeartCount(_this.getHeartCount()+1),_this._closeModals(),GFM.components.Heart.getAllHearts(),_this.networking=!1})},unfavoriteIt:function(){this.networking=!0;var _this=this,el=$(".heart-"+_this.$el.data("contentId"));el.removeClass("is-fave"),$.ajax({type:"POST",url:"/mvc.php?route=socialcontent/unheartIt",data:{fid:GFM.donateVariables.fundId,contentId:el.data("contentId"),contentType:el.data("contentType"),email:_this.supporterEmail}}).done(function(){_this.setHeartCount(_this.getHeartCount()-1),GFM.components.Heart.getAllHearts(),_this.networking=!1})},getHeartCount:function(){return parseInt(this.$el.find(".fave-raw").first().val())},setHeartCount:function(heartCount){var el=$(".heart-"+this.$el.data("contentId")),faveNum=el.children(".fave-num.campaign-sp--heart"),faveNumShort=el.children(".fave-num-short"),faveRaw=el.children(".fave-raw"),heartCountFormatted=GFM.utils.numberUtils.formatFaves(heartCount),contentType=el.data("contentType");"fund"==contentType&&(contentType="campaign"),faveNum.html(heartCountFormatted),faveNumShort.html("<i class='fa fa-heart'></i>&#13;&#10;"+("content"==contentType?'<span class="roundedNum">&nbsp;'+GFM.utils.numberUtils.roundFaves(heartCount)+"</span>":GFM.utils.numberUtils.roundFaves(heartCount))),heartCount<=0&&(heartCount=Math.max(0,heartCount),faveNum.html("&nbsp;"+("content"==contentType?_t("Like"):"")),faveNumShort.html("<i class='fa fa-heart'></i>&#13;&#10;"+("content"==contentType?'<span class="roundedNum">&nbsp;'+_t("Like")+"</span>":""))),faveRaw.val(heartCount)},isFavorite:function(){return this.$el.hasClass("is-fave")},constructFBLoginOptions:function(){var _this=this,heartId=this.$el.data("contentId")?this.$el.data("contentId"):"",emailopt=null;$(".facheckbox").length>0&&(emailopt=$(".facheckbox").hasClass("ischecked")?1:0);var fbLoginOptions={connectSuccess:function(){FB.api("/me",{fields:"email, name, id"},function(res){_this.favoriteIt(res.email,res.name,res.id,emailopt)})},connectFail:function(){_this._resetButtons()},permissions:{scope:"email, publish_actions"},redirectUri:GFM.donateVariables.shareUrl+"?fbfavorite=1&target="+heartId};return fbLoginOptions},likeCampaign:function(){"undefined"!=typeof FB&&new RSVP.Promise(function(resolve,reject){FB.api("/me/permissions",function(res){if(res&&res.data&&res.data.length)for(var i in res.data)if(res.data[i].hasOwnProperty("permission")&&"publish_actions"===res.data[i].permission)return void resolve("granted"===res.data[i].status);reject()})}).then(function(success){success&&(GFM.analytics.track_client_event("heart_campaign","fb_connect_permissions"),FB.api("/me/og.likes","POST",{object:GFM.donateVariables.shareUrl}))})}},GFM.components.Heart.getAllHearts=function(callback){var fundId=GFM.donateVariables.fundId;$.ajax({url:"/mvc.php?route=socialcontent/gethearts&fund_id="+fundId,async:!0,type:"GET"}).done(function(resp){GFM.components.Heart.allHearts=resp,void 0!==callback&&callback(resp)}).error(function(jqXHR,textStatus,errorThrown){})},GFM.components.Heart.isHearted=function(type,id){if(void 0===type||""===type||void 0===id||""===id)return!1;if(void 0===GFM.components.Heart.allHearts)return GFM.components.Heart.getAllHearts(),!1;var allHeartsSpecificType=GFM.components.Heart.allHearts[type];return void 0!==allHeartsSpecificType&&allHeartsSpecificType.length>0&&allHeartsSpecificType.indexOf(id)>=0};var urlVars=GFM.utils.stringUtils.getUrlVars();if(1===parseInt(urlVars.fbfavorite)&&location.hash.indexOf("#access_token")>-1){var $likedHeart=$(".heart-"+urlVars.target.split("#")[0]);if($likedHeart.length){var heart=new GFM.components.Heart($likedHeart);Kit.Facebook.login(heart.constructFBLoginOptions())}}var Search=function(){function Search(searchBar,searchBarDrop,searchContain,searchDelegate){this.searchDelegate=searchDelegate,this.$searchBar=$("."+searchBar),this.$searchBarDrop=$("."+searchBarDrop),this.analyticsElement=searchBar.replace(/-/g,"_"),this.searchContain=searchContain,this.hoverIndex=0,this.lastQuery="",this.lastBadQuery="",this.resultsShowing=0,this.categoryTerm="undefined"!=typeof category?"&cat="+category:"",this.$searchBarDrop.append(this.searchDelegate.buildQueryLink("")),this.$searchBar.on("keyup",function(e){var keyCode=e.keyCode||e.which,query=this.$searchBar.val().trim(),hoverIndex=this.hoverIndex;if(keyCode!==KEY_UP&&keyCode!==KEY_DOWN&&keyCode!==KEY_RETURN)this.shouldSearchOnQuery(query)&&this.searchDelegate.search(query,this.handleSearch.bind(this));else if(keyCode===KEY_RETURN){if(0!==hoverIndex)return this.triggerSearchExecuted(),top.location=this.$searchBarDrop.find("a:eq("+hoverIndex+")").attr("href"),!1;query.length>0&&this.gotoTerm(query)}else keyCode!==KEY_UP&&keyCode!==KEY_DOWN||(hoverIndex=keyCode===KEY_UP?Math.max(hoverIndex-1,0):Math.min(hoverIndex+1,this.resultsShowing-1));return query?(this.updateQueryLink(query),this.$searchBarDrop.removeClass("hide")):(hoverIndex=0,this.$searchBarDrop.find("a").not(":first").remove(),this.$searchBarDrop.addClass("hide")),this.updateHover(hoverIndex),this.lastQuery=query,this.triggerSearchEntered(this.$searchBarDrop.is(":visible")),!1}.bind(this)),this.$searchBar.on("keydown",function(e){var keyCode=e.keyCode||e.which;return keyCode!==KEY_UP&&keyCode!==KEY_DOWN}),$(document).on("click","body",function(e){var selector="."+this.searchContain+" *, ."+this.searchContain;$(e.target).is(selector)||this.$searchBarDrop.addClass("hide")}.bind(this)),this.$searchBarDrop.on("click",".js-search-link",function(){this.triggerSearchExecuted()}.bind(this))}var KEY_UP=38,KEY_DOWN=40,KEY_RETURN=13;return Search.prototype.shouldSearchOnQuery=function(query){return query&&query!==this.lastQuery&&(!this.lastBadQuery||query.indexOf(this.lastBadQuery)===-1)},Search.prototype.updateQueryLink=function(query){var searchLink=this.searchDelegate.getQueryLink(query),$anchor=this.$searchBarDrop.children().first(),$childElements=$anchor.children();$anchor.attr("href",searchLink),$anchor.text(query).prepend("&nbsp;&nbsp;").prepend($childElements)},Search.prototype.updateHover=function(hoverIndex){hoverIndex!==this.hoverIndex&&(this.hoverIndex=hoverIndex,this.$searchBarDrop.find("a").not(":eq("+hoverIndex+")").removeClass("hover")),this.$searchBarDrop.find("a:eq("+hoverIndex+")").addClass("hover")},Search.prototype.gotoTerm=function(query){this.triggerSearchExecuted(),top.location=this.searchDelegate.getQueryLink(query)},Search.prototype.handleSearch=function(url,buildFunc,query){$.getJSON(url,null,function(data){var $contain=$("<ul></ul>"),previousResultsShowing=this.resultsShowing;this.resultsShowing=1,$.each(data,function(index,location){var $link=buildFunc.call(this,location);$contain.append($link),this.resultsShowing++}.bind(this)),this.$searchBarDrop.find("a").not(":first").remove(),this.$searchBarDrop.append($contain.children()),previousResultsShowing!==this.resultsShowing&&this.updateHover(0),this.resultsShowing<=1?this.lastBadQuery=query:this.lastBadQuery=""}.bind(this))},Search.prototype.triggerSearchEntered=function(isDropdownVisible){this.$searchBar.trigger("gfmSearch.searchTermEntered",{analyticsElement:this.analyticsElement,isDropdownVisible:isDropdownVisible})},Search.prototype.triggerSearchExecuted=function(){this.$searchBar.trigger("gfmSearch.searchExecuted",{analyticsElement:this.analyticsElement})},Search}(),GlobalSearchDelegate=function(){function GlobalSearchDelegate(optionalParams){var params=$.extend(defaultOptionalParams,optionalParams);params.category?this.categoryTerm="&cat="+params.category:this.categoryTerm="",params.initialTerm&&params.allowRefineSearch?this.initialTerm="&initialTerm="+params.initialTerm:this.initialTerm="",params.country&&params.allowRefineSearch?this.countryTerm="&country="+params.country:this.countryTerm=""}var ZIP_SEARCH_BASE_URL="//www."+GFM_DOMAIN+"/iapi/index.php?route=location/zipsearch&exact=1&predict=1&all=1&limit=8&zip=",LOC_SEARCH_BASE_URL="//www."+GFM_DOMAIN+"/iapi/index.php?route=location/locationsearch&exact=0&predict=1&all=1&limit=8&location=",SEARCH_LINK_URL="//www."+GFM_DOMAIN+"/mvc.php?route=category&term=",SEARCH_ANCHOR='<a class="zip-choice"></a>',ICON_EL='<i class="fa" aria-hidden="true"></i>',SEARCH_TEXT="<span></span>",defaultOptionalParams={category:null,allowRefineSearch:!1,initialTerm:null,country:null};return GlobalSearchDelegate.prototype.getQueryLink=function(query){return SEARCH_LINK_URL+encodeURIComponent(query)+this.categoryTerm+this.initialTerm+this.countryTerm},GlobalSearchDelegate.prototype.search=function(query,callback){var url="";this.isPotentialZipCode(query)?(url=ZIP_SEARCH_BASE_URL+query,callback(url,this.buildZipLink.bind(this),query)):this.isPotentialLocation(query)&&(url=LOC_SEARCH_BASE_URL+query,callback(url,this.buildLocLink.bind(this),query))},GlobalSearchDelegate.prototype.isPotentialZipCode=function(query){var regex=/\d/g;return query.length>2&&regex.test(query)},GlobalSearchDelegate.prototype.isPotentialLocation=function(query){var regex=/[^a-z0-9\, ]/i;return query.length>2&&!query.match(regex)},GlobalSearchDelegate.prototype.buildQueryLink=function(query){var $anchor=$(SEARCH_ANCHOR),$icon=$(ICON_EL),$searchText=$(SEARCH_TEXT),searchLink=SEARCH_LINK_URL+encodeURIComponent(query)+this.categoryTerm;return $anchor.addClass("query-result"),$anchor.addClass("js-search-link"),$icon.addClass("fa-search"),$anchor.attr("href",searchLink),$searchText.html("<strong>"+query+"</strong>"),$anchor.append($icon),$anchor.append("&nbsp;&nbsp;"),$anchor.append($searchText),$anchor},GlobalSearchDelegate.prototype.buildZipLink=function(locationObj){var $anchor=$(SEARCH_ANCHOR),$icon=$(ICON_EL),$searchText=$(SEARCH_TEXT),searchLink=SEARCH_LINK_URL+encodeURIComponent(locationObj.zip_code)+"&country="+encodeURIComponent(locationObj.country)+this.categoryTerm,zipText=locationObj.zip_code+" - "+locationObj.locationtext;return $icon.addClass("fa-map-marker"),$anchor.addClass("js-search-link"),$anchor.attr("href",searchLink),$anchor.attr("text2",zipText),$anchor.attr("city",locationObj.city),$anchor.attr("state",locationObj.state_prefix),$anchor.attr("country",locationObj.country),$anchor.attr("value",locationObj.zip_code),$searchText.html("<strong>"+locationObj.zip_code+"</strong> - "+locationObj.locationtext),$anchor.append($icon),$anchor.append("&nbsp;&nbsp;"),$anchor.append($searchText),$anchor},GlobalSearchDelegate.prototype.buildLocLink=function(locationObj){var $anchor=$(SEARCH_ANCHOR),$icon=$(ICON_EL),$searchText=$(SEARCH_TEXT),href=SEARCH_LINK_URL+encodeURIComponent(locationObj.zip_code)+"&country="+encodeURIComponent(locationObj.country)+this.categoryTerm;return $icon.addClass("fa-map-marker"),$anchor.addClass("js-search-link"),$anchor.attr("href",href),$anchor.attr("text2",locationObj.locationtext),$anchor.attr("city",locationObj.city),$anchor.attr("state",locationObj.state_prefix),$anchor.attr("country",locationObj.country),$anchor.attr("value",locationObj.locationtext),$searchText.text(locationObj.locationtext),$anchor.append($icon),$anchor.append("&nbsp;&nbsp;"),$anchor.append($searchText),$anchor},GlobalSearchDelegate}(),GFM=GFM||{};GFM.intent=GFM.intent||{},GFM.intent.util=function(){var donatedCookie="rdc",sharedCookie="has-shared",modalTracking="js-exit-funds",hasDonatedFund=function(fundid){var cookie=$.cookie(donatedCookie);if("undefined"!=typeof cookie)for(var cookieKeys=Object.keys(JSON.parse(cookie)),i=0;i<cookieKeys.length;i++){var fundAndDId=cookieKeys[i];if(fundAndDId.indexOf("_")!==-1&&fundid.toString()===fundAndDId.split("_")[0])return!0}return!1},trackDonatedFund=function(fundid){addFundToCookie(donatedCookie,fundid)},hasSharedFund=function(fundid){return doesCookieHaveFund(sharedCookie,fundid)},trackSharedFund=function(fundid){addFundToCookie(sharedCookie,fundid)},doesCookieHaveFund=function(cookieName,fundid){var cookie=$.cookie(cookieName);return"undefined"!=typeof cookie&&cookie.indexOf(fundid)!==-1},addFundToCookie=function(cookieName,fundid,expires){var delim=",",expiration=expires||30,cookie_val=$.cookie(cookieName)||"",funds=cookie_val.length>0?cookie_val.split(delim):[];funds.indexOf(fundid)===-1&&funds.push(fundid),funds.length>50&&funds.shift(),cookie_val=funds.join(delim),$.cookie(cookieName,cookie_val,{expires:expiration})},expireOldFunds=function(trackingObject){for(var fundid in trackingObject)if(trackingObject.hasOwnProperty(fundid)){var setDate=parseInt(trackingObject[fundid]);Date.now()-setDate>=864e5&&delete trackingObject[fundid]}return trackingObject},getSeenFunds=function(){var trackingObject={};try{trackingObject=localStorage.getItem(modalTracking)||{}}catch(e){}if("string"==typeof trackingObject)try{trackingObject=expireOldFunds(JSON.parse(atob(trackingObject)))}catch(e){}return trackingObject},hasSeenForFund=function(fundId){return getSeenFunds().hasOwnProperty(fundId)},trackSeenForFund=function(fundid){var trackingObject=getSeenFunds();trackingObject[fundid]=Date.now(),localStorage.setItem(modalTracking,btoa(JSON.stringify(trackingObject)))},areOtherModalsVisible=function(){return $("#like-login-modal, .gfm-modal").is(":visible")},canDisplayExitModal=function(){var donationsDisabled=GFM.donateVariables.fundDonationsDisabled,isDonationOwnedByLoginUser=GFM.donateVariables.fundOwnerUserId&&GFM.donateVariables.currentLoginUserId&&GFM.donateVariables.fundOwnerUserId===GFM.donateVariables.currentLoginUserId,hasDonated=GFM.intent.util.hasDonatedFund(GFM.donateVariables.fundId),hasSeenForFund=GFM.intent.util.hasSeenForFund(GFM.donateVariables.fundId);return!(hasDonated||hasSeenForFund||isDonationOwnedByLoginUser||donationsDisabled||GFM.intent.util.areOtherModalsVisible())},canDisplayToastBanner=function(){var donationsDisabled=GFM.donateVariables.fundDonationsDisabled,isDonationOwnedByLoginUser=GFM.donateVariables.fundOwnerUserId&&GFM.donateVariables.currentLoginUserId&&GFM.donateVariables.fundOwnerUserId===GFM.donateVariables.currentLoginUserId,hasDonated=GFM.intent.util.hasDonatedFund(GFM.donateVariables.fundId);return!donationsDisabled&&!isDonationOwnedByLoginUser&&!hasDonated};return{canDisplayToastBanner:canDisplayToastBanner,canDisplayExitModal:canDisplayExitModal,areOtherModalsVisible:areOtherModalsVisible,hasDonatedFund:hasDonatedFund,trackSeenForFund:trackSeenForFund,hasSeenForFund:hasSeenForFund,trackSharedFund:trackSharedFund,hasSharedFund:hasSharedFund,trackDonatedFund:trackDonatedFund}}(),$(function(){var $categoryCarouselContain=$(".category-carousel-contain"),$categoryLeftArrow=$(".js-categories-left-arrow"),$categoryRightArrow=$(".js-categories-right-arrow");$categoryLeftArrow.on("click",function(){$categoryCarouselContain.animate({scrollLeft:$categoryCarouselContain.scrollLeft()-$categoryCarouselContain.width()+160},500)}),$categoryRightArrow.on("click",function(){$categoryCarouselContain.animate({scrollLeft:$categoryCarouselContain.scrollLeft()+$categoryCarouselContain.width()-160},500)}),$categoryCarouselContain.scroll(function(){$categoryCarouselContain.scrollLeft()<=$categoryLeftArrow.width()?$categoryLeftArrow.hide():$categoryLeftArrow.show(),$categoryCarouselContain.scrollLeft()+$categoryCarouselContain[0].offsetWidth===$categoryCarouselContain[0].scrollWidth?$categoryRightArrow.hide():$categoryRightArrow.show()}),$categoryCarouselContain.length&&($categoryCarouselContain[0].scrollWidth!==$categoryCarouselContain[0].offsetWidth?($categoryLeftArrow.hide(),$categoryRightArrow.show()):($categoryRightArrow.hide(),
$categoryLeftArrow.hide()))}),$(function(){var $localeSelect=$(".js-locale-select");if(0!==$localeSelect.length){var first=null,rest=[];$localeSelect.children().each(function(){this.value===GFM.components.VisitorCookie.getVisitorCookie("locale")?first=this:rest.push(this)}),$localeSelect.empty(),$localeSelect.append(first),$localeSelect.append(rest),$localeSelect[0].selectedIndex=0,$(document).on("change",".js-locale-select",function(e){if(GFM.components.VisitorCookie.setVisitorCookie("locale",e.target.value),GFM.analytics.getPerson()){var data={locale:e.target.value,_token:$("#_token").val()},prefix="/iapi/";document.domain==="funds."+GFM_DOMAIN&&(prefix="/");var action=prefix+"index.php?route=customize/postPersonLanguage";$.ajax({url:action,type:"POST",data:data,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(response){response.success&&location.reload()}})}else location.reload()})}}),$(window).load(function(){var iframe=$(".campaign-img-contain").find("iframe"),vplayer=null;iframe.length&&iframe.attr("src").match(/player.vimeo.com/gi)&&(vplayer=new Vimeo.Player(iframe[0]),vplayer.on("timeupdate",function(data){data.seconds>=data.duration-1&&vplayer.unload()}))});var GFM=GFM||{};GFM.updates=function(){var finishFollowingCampaign=function(){var containerWidth=$("#js-subscribe-to-updates-orbit").width();GFM.utils.modalBehaviors.animatePanelIn("#js-subscribe-to-updates-orbit",".js-success-panel-contain",containerWidth),$(".js-subscribe-enter-text").slideUp(function(){$(".js-subscribe-success-text").slideDown()}),$(".js-subscribe-to-updates").html(_t("Subscribed to Updates")+' <i class="fa fa-check"></i>')},followCampaign=function(response){FB.api("/me",{fields:"name, email"},function(resp){resp&&resp.hasOwnProperty("name")&&$.post({url:"iapi/index.php?route=follow/post_follow_ajax",data:{n:resp.name,e:resp.email,fb:!0,id:response.authResponse.userID,tk:response.authResponse.accessToken,fid:GFM.donateVariables.fundId,src:"js-fb-follow-campaign"},success:finishFollowingCampaign,dataType:"json"})})},fbLoginOptions={connectSuccess:followCampaign,connectFail:function(){},permissions:{scope:"email,user_friends"},redirectUri:GFM.donateVariables.shareUrl+"?fbfollow=1"},initialize=function(){var $followCampaignButton=$("#js-fb-follow-campaign"),$isLoading=$("#subscribe-updates-modal").find(".is-loading"),facebookLogin=function(){$followCampaignButton.addClass("hide"),$isLoading.removeClass("hide"),Kit.Facebook.login(fbLoginOptions)};$followCampaignButton.click(facebookLogin);var $subscribeUpdatesModal=$("#subscribe-updates-modal");$subscribeUpdatesModal.hasClass("show-initial")&&facebookLogin()};return{initialize:initialize}}(jQuery),$(function(){GFM.updates.initialize()});var GFM=GFM||{};GFM.campaignAnalytics=GFM.campaignAnalytics||{},GFM.components.Heart.allHeartsHash={};var heartFbLoginCallback=function(){var $likeLoginModal=$("#like-login-modal"),heartContentId=$likeLoginModal.data("heartContentId"),specificHeart=GFM.components.Heart.allHeartsHash[heartContentId];if(GFM.campaignAnalytics.fbFavoriteTrack($("#js-fb-favorite")),void 0!==$likeLoginModal.data("isCampaignLike")&&$likeLoginModal.data("isCampaignLike")){var $fbLoginButton=$("#js-fb-favorite");GFM.analytics.track_event("mp_page_click",{elementid:$fbLoginButton.data("gfm-analytics-element"),viewid:$likeLoginModal.data("gfm-analytics-viewid")})}if(void 0!==specificHeart){var emailopt;$(".facheckbox").length>0&&(emailopt=$(".facheckbox").hasClass("ischecked")?1:0),FB.api("/me",{fields:"email, name, id"},function(res){specificHeart.favoriteIt(res.email,res.name,res.id,emailopt)}),"function"==typeof fbReviewSendEmail&&FB.api("/me",{fields:"email, first_name"},function(res){fbReviewSendEmail(res.email,res.first_name)})}};$(function(){GFM.components.Heart.getAllHearts(function(resp){var $likeCampaignHeart=$('.js-heart[data-content-type="fund"]').eq(0),$likeUpdateHearts=$('.js-heart[data-content-type="update"]'),$likeDonationHearts=$('.js-heart[data-content-type="donation"]'),$likeCommentHearts=$('.js-heart[data-content-type="comment"]'),$likeContentHearts=$('.js-heart[data-content-type="content"]');resp.email&&(supporterEmail=resp.email);var allHearted=[["fund",$likeCampaignHeart],["comment",$likeCommentHearts],["donation",$likeDonationHearts],["update",$likeUpdateHearts],["content",$likeContentHearts]];allHearted.forEach(function(typeHearted){typeHearted[1].each(function(){var heart=new GFM.components.Heart($(this)),heartId=$(this).data("contentId").toString();GFM.components.Heart.isHearted(typeHearted[0],heartId)&&!heart.isFavorite()&&$(this).addClass("is-fave"),GFM.components.Heart.allHeartsHash[heartId]=heart})})})}),$(function(){var saveSocialCount=function(type,count){$.ajax({type:"GET",dataType:"json",contentType:"application/json",url:"/mvc.php?route=donate/reset&t="+type+"&c="+count+"&u="+GFM.donateVariables.shareUrl})},displayNewSocialCount=function(type,count){var $shareCountTextElements=$(".js-share-count-text");$shareCountTextElements.text(" "+GFM.utils.numberUtils.formatShareCount(count))};GFM.donateVariables.fetchSocialCounts&&Kit.Facebook.checkFBLoggedIn().then(function(){FB.api("/?id="+GFM.donateVariables.shareUrl,function(data){var total;data&&data.share&&data.share.share_count&&(total=parseInt(data.share.share_count,10)),(!total||total<0||"number"!=typeof total)&&(total=0),total>0&&total>GFM.donateVariables.campaignShares&&(saveSocialCount("fb",total),displayNewSocialCount("fb",total))})})}),$(function(){function window_open(url){var width=626,height=436,leftPosition=window.screen.width/2-(width/2+10),topPosition=window.screen.height/2-(height/2+50),windowFeatures="status=no,height="+height+",width="+width+",resizable=yes,left="+leftPosition+",top="+topPosition+",screenX="+leftPosition+",screenY="+topPosition+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no",social_w=window.open(url,"_blank",windowFeatures);return social_w&&social_w.focus(),!1}$(".js-share-linkedin").on("click",function(){var fundUrl=GFM.donateVariables.fundUrl;window_open("https://www.linkedin.com/cws/share?url="+encodeURIComponent("https://www."+GFM_DOMAIN+"/"+decodeURIComponent(fundUrl)+"?pc="+$(this).data("pc")+(void 0!==$(this).data("rcid")?"&rcid="+$(this).data("rcid"):"")))})}),$(function(){$(".js-share-whatsapp").on("click",function(e){e.preventDefault();var location=$(this).attr("href")+encodeURIComponent("?pc="+$(this).data("pc"));window.location.href=location})});var GFM=GFM||{};GFM.responsiveCampaign=GFM.responsiveCampaign||{},GFM.responsiveCampaign.StickyHeader={enable:function(){var $offsetElement=$(".sticky-btn-contain"),$bottomElement=$(".js-static-cta-contain").find(".js-main-donate-btn");$offsetElement.length>0&&$bottomElement.length>0&&($(window).scrollTop()>=$bottomElement.offset().top&&$offsetElement.addClass("is-stuck"),$(document).on("scroll touchstart touchend",function(){var offset=$(window).scrollTop(),bottomOffset=$bottomElement.offset().top;offset>=bottomOffset?$offsetElement.addClass("is-stuck"):$offsetElement.removeClass("is-stuck")}))},checkToDisable:function(){var $offsetElement=$(".sticky-btn-contain"),$bottomElement=$(".js-static-cta-contain").find(".js-main-donate-btn");$offsetElement.length>0&&$bottomElement.length>0&&$(window).scrollTop()<$bottomElement.offset().top&&$offsetElement.removeClass("is-stuck")}},$(function(){GFM.responsiveCampaign.StickyHeader.enable()});var GFM=GFM||{};GFM.responsiveCampaign=GFM.responsiveCampaign||{},GFM.responsiveCampaign.campaignState=function($){var hasCampaignState=function(){return".js-campaign-state-large".length>0},selectedDonationHrefHandler=function(event){event.preventDefault();var $selectedDonationRow=$(".showcontrol-donations .supporter.selected"),headerHeight=$("#nav-menu").position().top+$("#nav-menu").outerHeight(),scrollTop=$selectedDonationRow.position().top-headerHeight,$stickyShareButton=$(".sticky-btn-contain");$stickyShareButton&&(scrollTop-=$stickyShareButton.height()),$("html, body").animate({scrollTop:scrollTop})},setupCampaignStateHrefHandler=function(){$(".js-campaign-state-link").click(function(event){var $campaignStateElement=$(".js-campaign-state-small, .js-campaign-state-large"),identifier=$campaignStateElement.data("identifier");"selected_donation"===identifier?selectedDonationHrefHandler(event):"selected_update"===identifier?selectedUpdateHrefHandler(event):"view_referred"===identifier&&referredDonationsHrefHandler(event)})},initCampaignState=function(){if(hasCampaignState()){setupCampaignStateHrefHandler();var $large=$(".js-campaign-state-large"),$small=$(".js-campaign-state-small"),currentSize=Foundation.MediaQuery.current;"medium"===currentSize||"small"===currentSize?($small.finish().fadeTo(500,1),$large.show()):($large.finish().fadeTo(500,1),$small.show())}},referredDonationsHrefHandler=function(event){event.preventDefault(),scrollToDonationFeed()},scrollToDonationFeed=function(){var currentSize=Foundation.MediaQuery.current,stickyHeaderHeight="medium"===currentSize||"small"===currentSize?115:59,$containDiv=$(".js-donations-column-contain");GFM.utils.animationUtils.scrollPageTo($containDiv,400,stickyHeaderHeight)},setProfileBannerCookie=function(){$.cookie("shouldShowCampaignPageProfileBanner","false",{expires:3650,path:"/"})},showProfileBanner=function(banner,clickHandler){$("#profile-banner-contain").slideUp({duration:"slow",always:function(){$("#profile-banner-contain").empty(),$("#profile-banner-contain").append(banner),$("#profile-banner-contain").slideDown({duration:"slow",always:function(){null!==clickHandler&&"function"==typeof clickHandler&&$(".profile-banner-clickable").click(function(){clickHandler(),setProfileBannerCookie(),GFM.analytics.track_event("mp_page_click",{elementid:$("#profile-banner").data("gfm-analytics-element")})}),$("#profile-banner-close").click(function(){setProfileBannerCookie(),$("#profile-banner-contain").slideUp("slow"),GFM.analytics.track_event("mp_page_click",{elementid:$("#profile-banner-close").data("gfm-analytics-element")})})}})}})},ajaxFetch=function(hasReferredDonations){var fundUrl=GFM.analytics.data.fund_url,selectedDonation=void 0!==GFM.donateVariables?GFM.donateVariables.selectedDonation:null,teamMemberId=GFM&&GFM.donateVariables?GFM.donateVariables.referringTeamMemberId:null,teamInvitationHash=GFM&&GFM.donateVariables?GFM.donateVariables.teamInvitationHash:null;if(fundUrl.length>1){var requestData={fundUrl:fundUrl,hasReferredDonations:hasReferredDonations,d:selectedDonation};teamMemberId&&(requestData.member=teamMemberId,requestData.sharetype="teams"),teamInvitationHash&&(requestData.teamInvite=teamInvitationHash),$.ajax({url:"/mvc.php?route=donate/GetSmartBannerHtmlContent",type:"GET",dataType:"json",data:requestData,success:function(data,textStatus,jqXHR){if(null!=data&&"object"==typeof data&&data.hasOwnProperty("mobile")&&data.hasOwnProperty("desktop")){var $mobile=$(data.mobile).hide();$("#campaignStateBannerMobileThroughAjax").replaceWith($mobile);var $desktop=$(data.desktop).hide();$("#campaignStateBannerDesktopThroughAjax").replaceWith($desktop),initCampaignState()}else if(null!=data&&"object"==typeof data&&data.hasOwnProperty("profBanner")&&data.hasOwnProperty("meta")){var clickHandler;clickHandler="prof_banner_no_acc"===data.meta.bannerType?function(){$.ajax({url:data.meta.url,type:"POST",data:{email:data.meta.email,personId:data.meta.personId},success:function(response){showProfileBanner(response.html)}})}:function(){window.location.href=data.meta.url},showProfileBanner(data.profBanner,clickHandler)}},error:function(){}})}};return{loadByAjax:ajaxFetch}}(jQuery),$(function(){var requestPaging=function(options){if(!options.route)throw new Error("route param not provided for requestPaging");return $.ajax({url:location.origin+"/mvc.php?route="+options.route,data:{url:options.fundUrl||GFM.donateVariables.fundUrl,idx:options.index,type:options.sortType},async:!0,type:"GET"})};$(".dropdown-container").on("click",".js-show-sort-menu",function(e){e.preventDefault(),$(this).closest(".dropdown-container").find(".js-sort-menu").toggleClass("hide")}),$(".dropdown-container").on("click",".js-sort-link",function(e){var $dropdownContain=$(this).closest(".dropdown-container"),$dropdownLink=$dropdownContain.find(".js-show-sort-menu"),dropdownType=$dropdownLink.data("dropdownType"),sortType=$(this).data("sortType"),linkText=$(this).data("selectedText");e.preventDefault(),void 0!==GFM.responsiveCampaign.bubbleDonations.removeBubbledDonations&&GFM.responsiveCampaign.bubbleDonations.removeBubbledDonations(),$('.campaign-state[data-identifier="view_referred"]').length&&$('.campaign-state[data-identifier="view_referred"]').hide(),$("#aggregate-referred-donations").length&&$("#aggregate-referred-donations").hide(),requestPaging({route:$dropdownLink.data("route"),index:$(this).data("index")||0,sortType:sortType}).then(function(response){var triggerData={$newPages:$(response),$dropdownContain:$dropdownContain,sortType:sortType,linkText:linkText};$dropdownContain.trigger("paging.sortedPagesLoaded."+dropdownType,triggerData)}).fail(function(err){})}),$(".js-donations-contain").on("click",".js-load-more",function(e){var $container=$(this).closest(".js-donations-column-contain").length?$(this).closest(".js-donations-column-contain"):$(this).closest(".modal-donations"),sortType=$container.find(".js-show-sort-menu").data("dropdownSortType");e.preventDefault(),$(this).addClass("hide").closest(".donations-control-footer").find(".is-loading").removeClass("hide"),requestPaging({route:"donate/pagingDonationsFoundation",index:$(this).data("idx")||0,sortType:sortType||"recent"}).then(function(response){var $donations=$container.find(".js-donations-contain"),$newDonations=$(response).find(".supporters-list").children(),$newFooter=$(response).find(".donations-control-footer"),triggerData={$newPages:$newDonations};response.length&&($donations.find(".supporters-list").append($newDonations),$donations.trigger("paging.additionalPagesLoaded.donations",triggerData),$newDonations.hide().slideDown(""),$donations.find(".donations-control-footer").replaceWith($newFooter),void 0!==GFM.responsiveCampaign.bubbleDonations.suppressAlreadyBubbledDonationsOnLoadMoreDonations&&GFM.responsiveCampaign.bubbleDonations.suppressAlreadyBubbledDonationsOnLoadMoreDonations($newDonations),$container.find(".js-donation-count").html($container.find(".showcontrol-donations .supporters-list .supporter:visible").length))}).fail(function(err){})}),$(".js-comments-contain").on("click",".js-load-more",function(e){var $container=$(this).closest(".js-comments-column-contain"),sortType=$container.find(".js-show-sort-menu").data("dropdownSortType");e.preventDefault(),$(this).addClass("hide").closest(".comments-control-footer").find(".is-loading").removeClass("hide"),requestPaging({route:"donate/pagingCommentsFoundation",index:$(this).data("idx")||0,sortType:sortType||"hearts"}).then(function(response){var $comments=$container.find(".js-comments-contain"),$newComments=$(response).find(".supporters-list").children(),$newFooter=$(response).find(".comments-control-footer"),triggerData={$newPages:$newComments};response.length&&($comments.find(".supporters-list").append($newComments),$comments.trigger("paging.additionalPagesLoaded.comments",triggerData),$newComments.hide().slideDown(),$comments.find(".comments-control-footer").replaceWith($newFooter))}).fail(function(err){})});var bubbleReferredDonationsToTopOfFeed=function(campaignStateBannerCallback){var fundUrl=GFM.analytics.data.fund_url;fundUrl.length>1&&$.ajax({url:"/mvc.php?route=donateajax/getReferredDonations",type:"GET",dataType:"json",data:{url:fundUrl},success:function(data,textStatus,jqXHR){if(data&&void 0!==GFM.responsiveCampaign.bubbleDonations.bubbleDonation&&(data.referredTotal&&data.referredTotal.length>0&&($new=$(data.referredTotal),$(".js-donations-contain").prepend($new),Kit.Facebook.initForObject($new)),data.referredDonations&&data.referredDonations.length>0))for(var i=0;i<data.referredDonations.length;i++)GFM.responsiveCampaign.bubbleDonations.bubbleDonation(data.referredDonations[i].id,data.referredDonations[i].html)},error:function(){},complete:function(){var hasReferredDonations=$(".js-referred-supporter").length>0;campaignStateBannerCallback&&campaignStateBannerCallback(hasReferredDonations)}})},loadCampaignStateByAJax=void 0!==GFM.responsiveCampaign&&void 0!==GFM.responsiveCampaign.campaignState&&void 0!==GFM.responsiveCampaign.campaignState.loadByAjax?GFM.responsiveCampaign.campaignState.loadByAjax:null;GFM.donateVariables.exptG536ImpactEmailEnabled===!0&&$(".supporters-list").children().length>0&&"donations"==$(".js-dropdown-donations .js-show-sort-menu").data("dropdown-type")?bubbleReferredDonationsToTopOfFeed(loadCampaignStateByAJax):loadCampaignStateByAJax&&loadCampaignStateByAJax(),$(".js-contents-contain").on("click",".js-load-more",function(e){var $container=$(this).closest(".js-comments-column-contain");$container.find(".js-show-sort-menu").data("dropdownSortType");e.preventDefault(),$(this).addClass("hide").closest(".comments-control-footer").find(".is-loading").removeClass("hide"),requestPaging({route:"donate/pagingContentsFoundation",index:$(this).data("idx")||0}).then(function(response){var $comments=$container.find(".js-contents-contain"),$newComments=$(response).find(".supporters-list").children(),$newFooter=$(response).find(".comments-control-footer"),triggerData={$newPages:$newComments};response.length&&($comments.find(".supporters-list").append($newComments),$comments.trigger("paging.additionalPagesLoaded.contents",triggerData),GFM.content.init($comments),$newComments.hide().slideDown(),$comments.find(".comments-control-footer").replaceWith($newFooter))}).fail(function(err){})});var bubbleDonationsToTopOfFeed=function(){var rcid=GFM.analytics.data.rcid,fundUrl=GFM.analytics.data.fund_url;rcid.length>1&&fundUrl.length>1&&$.ajax({url:"/mvc.php?route=donate/GetDonationsBubbledToTop",type:"GET",dataType:"json",data:{originalSharedRcid:rcid,url:fundUrl},success:function(data,textStatus,jqXHR){data&&void 0!==GFM.responsiveCampaign.bubbleDonations.bubbleDonation&&(data.rcidDonationId&&data.rcidDonationId>0&&GFM.responsiveCampaign.bubbleDonations.bubbleDonation(data.rcidDonationId,data.rcidDonationHtml),data.myDonationId&&data.myDonationId>0&&GFM.responsiveCampaign.bubbleDonations.bubbleDonation(data.myDonationId,data.myDonationHtml))},error:function(){}})};1==GFM.donateVariables.exptG396RcidBannerEnabled&&$(".supporters-list").children().length>0&&"donations"==$(".js-dropdown-donations .js-show-sort-menu").data("dropdown-type")&&bubbleDonationsToTopOfFeed()});var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.PostComment=function($){var PostComment=function($el){this.$contain=$el,this.$inputContain=$el.find(".js-comment-input-contain"),this.$commentInput=$el.find(".js-comment-input"),this.fbNameAttr="user_name",this.fbTokenAttr="facebook_token",this.fbIdAttr="facebook_id",this.addPostCommentHandlers()};return PostComment}(jQuery),GFM.components.PostComment.prototype=function($){var displayShowInputBtn=function(){this.$contain.find(".js-show-comment-trigger").removeClass("hide"),this.$contain.find(".is-loading").addClass("hide"),this.$contain.find(".js-post-comment").addClass("hide")},displayPostCommentBtn=function(){this.$contain.find(".js-post-comment").removeClass("hide"),this.$contain.find(".js-show-comment-trigger").addClass("hide"),this.$contain.find(".is-loading").addClass("hide")},displayIsLoadingBtn=function(){this.$contain.find(".is-loading").removeClass("hide"),this.$contain.find(".js-post-comment").addClass("hide"),this.$contain.find(".js-show-comment-trigger").addClass("hide")},showCommentInput=function(){this.$inputContain.hide().removeClass("hide").slideDown("fast")},hideCommentInput=function(){this.$inputContain.slideUp("fast",function(){$(this).addClass("hide").show()})},displayCommentError=function(){var $error=this.$contain.find(".js-comment-error:hidden");$error.slideDown("fast")},hideCommentError=function(){this.$contain.find(".js-comment-error").slideUp("fast",function(){$(this).fadeOut()})},prependNewComment=function($comment){var tempComment,$commentsContain=this.$contain.find(".supporters-list");0===$commentsContain.length&&($commentsContain=this.$contain.find(".js-comments-contain")),$commentsContain.prepend($comment),tempComment=new GFM.components.TruncateText($comment),$comment.hide().slideDown("fast")},postComment=function(){var postData={Comments:{text:this.$commentInput.val(),firstname:this.$contain.find(".js-comment-entry-contain").attr(this.fbNameAttr)},FBLogin:{uid:this.$contain.find(".js-comment-entry-contain").attr(this.fbIdAttr),token:this.$contain.find(".js-comment-entry-contain").attr(this.fbTokenAttr)},fid:this.$contain.find(".js-comment-entry-contain").attr("fid"),fid2:this.$contain.find(".js-comment-entry-contain").attr("fid2")};return displayIsLoadingBtn.call(this),hideCommentError.call(this),$.ajax({url:"//www."+GFM_DOMAIN+"/mvc.php?route=donate/postcomment",data:postData,async:!0,type:"POST"})},handleCommentResponse=function(response){response&&"string"==typeof response&&"{"!==response[0]&&"<"===response[0]?(prependNewComment.call(this,$(response)),hideCommentInput.call(this),displayShowInputBtn.call(this),this.$commentInput.val("")):(displayCommentError.call(this),displayPostCommentBtn.call(this))},_addShowCommentClickHandler=function(){var _this=this,perms="email,user_friends,user_birthday",fbLoginOptions={connectSuccess:function(response){GFM.analytics.track_event("mp_page_click",{elementid:$(".js-show-comment-trigger").data("gfm-analytics-element"),viewid:$(".js-show-comment-trigger").data("gfm-analytics-viewid")});var rand=GFM.utils.numberUtils.getRandomIntBetween(1e4,99999),fbImgSrc="//graph.facebook.com/"+response.authResponse.userID+"/picture?type=square&height=150&width=150&rand="+rand;showCommentInput.call(this),displayPostCommentBtn.call(this),this.$contain.find(".js-comment-entry-pic").attr("src",fbImgSrc),this.$contain.find(".js-comment-entry-contain").attr(this.fbTokenAttr,response.authResponse.accessToken),this.$contain.find(".js-comment-entry-contain").attr(this.fbIdAttr,response.authResponse.userID),FB.api("/me",{fields:"name"},function(res){res.error||this.$contain.find(".js-comment-entry-contain").attr(this.fbNameAttr,res.name)}.bind(_this))}.bind(_this),connectFail:function(){},permissions:{scope:perms},redirectUri:GFM.donateVariables.shareUrl+"?fbaddcomment=1"};this.$contain.find(".js-show-comment-trigger").on("click",function(){GFM.analytics.track_event("mp_page_view",{viewid:$(".js-show-comment-trigger").data("gfm-analytics-viewid")}),Kit.Facebook.login(fbLoginOptions)})},_addPostCommentClickHandler=function(){var _this=this;this.$contain.find(".js-post-comment").on("click",function(e){return e.preventDefault(),_this.$commentInput.val()?GFM.utils.originUtils.validOrigin()?void postComment.call(_this).then(handleCommentResponse.bind(_this)):(hideCommentError.call(_this),hideCommentInput.call(_this),displayShowInputBtn.call(_this),void _this.$commentInput.val("")):void displayCommentError.call(_this)})},_addFBLogoutClickHandler=function(){var _this=this;this.$contain.find(".js-fb-logout").on("click",function(e){e.preventDefault(),FB.logout(),hideCommentInput.call(_this),displayShowInputBtn.call(_this)})},_addCommentInputFocusHandler=function(){var stickyHeaderHeight=115;this.$commentInput.on("focus",function(){$(this).find(".js-main-cta-contain").addClass("hide"),GFM.utils.userAgentUtils.isAndroid()&&GFM.utils.animationUtils.scrollPageTo($(this).closest(".js-comments-column-contain").find(".js-dropdown-comments"),400,stickyHeaderHeight)})},_addCommentInputBlurHandler=function(){this.$commentInput.on("blur",function(){$(this).find(".js-main-cta-contain").removeClass("hide")})},addPostCommentHandlers=function(){_addShowCommentClickHandler.call(this),_addPostCommentClickHandler.call(this),_addFBLogoutClickHandler.call(this),_addCommentInputFocusHandler.call(this),_addCommentInputBlurHandler.call(this)};return{addPostCommentHandlers:addPostCommentHandlers}}(jQuery);var GFM=GFM||{};GFM.mediaContentUploader=function(GFM,$){var detectVerticalSquash=function(image){var canvas=document.createElement("canvas"),ih=(image.naturalWidth,image.naturalHeight);canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(image,0,0);for(var data=ctx.getImageData(0,0,1,ih).data,sy=0,ey=ih,py=ih;py>sy;){var alpha=data[4*(py-1)+3];0===alpha?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},resizeImage=function(file,callbackDisplay,callbackError){try{var reader=new FileReader,image=document.createElement("img"),canvas=document.createElement("canvas");if(reader.onerror=function(e){return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])),!1},reader.onload=function(e){try{if(image.onerror=function(err){return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])),!1},image.onload=function(){try{var width=image.width,height=image.height;if(width<300||height<200)return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} is too small. Please upload an image that's a minimum of 600 x 400 pixels.",[{name:file.name}])),!1;if(width>1e3&&height>600){var new_width=Math.max(1e3,600*width/height),new_height=Math.max(600,1e3*height/width),squash_ratio=detectVerticalSquash(image);canvas.width=new_width,canvas.height=new_height;var context=canvas.getContext("2d"),mime="image/jpeg";try{mime=image.src.match(/^data:([^;]+)/)[1]}catch(err){}context.drawImage(image,0,0,new_width,new_height/squash_ratio);var bytes,data=canvas.toDataURL(mime);bytes=data.split(",")[0].indexOf("base64")>=0?atob(data.split(",")[1]):unescape(data.split(",")[1]);for(var ab=new ArrayBuffer(bytes.length),ia=new Uint8Array(ab),i=0;i<bytes.length;i++)ia[i]=255&bytes.charCodeAt(i);var blob;try{blob=new Blob([ab],{type:mime})}catch(err){var BB=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"==e.name&&BB){var bb=new BB;bb.append(ab),blob=bb.getBlob(mime)}else"InvalidStateError"==e.name&&(blob=new Blob([ab.buffer],{type:mime}))}}callbackDisplay(file,image,blob)}catch(err){return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])),!1}},!e.target.result.match(/data\:image/))return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("{name} cant be uploaded. Please try a JPG or PNG file. ",[{name:file.name}])),!1;image.src=e.target.result}catch(err){return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])),!1}},file.size>8388608)return file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your {name} is too large. Please upload an image that's smaller than 8MB.",[{name:file.name}])),!1;reader.readAsDataURL(file)}catch(err){file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}]))}return!1},initialize=function(options){var settings=$.extend({photo_upload_action:".photo-upload-action",photo_upload_field:".photo-upload-field"},options),input=$(settings.photo_upload_field);return!(!input.length||!input.first().data("initialized"))||($(document).on("click",settings.photo_upload_action,function(e){if($(settings.photo_upload_field).val(""),form=$(this).parents("form").first(),$(this).hasClass("close-button"))return GFM.mediaContentUploader.removeElement($(this).parent()),!0;if($(this).hasClass("rotate-button"))return GFM.mediaContentUploader.rotateElement($(this).parent()),!0;var amountFiles=form.find(".ugc-content-file").length;return amountFiles>=10?(GFM.mediaContentUploader.displayWarning(_t("Only 10 photos can be uploaded at a time.")),!1):(e.preventDefault(),void form.find(settings.photo_upload_field).click())}),$(document).on("change",settings.photo_upload_field,function(e){GFM.mediaContentUploader.removeWarning(),form=$(this).parents("form").first();var amountFiles=form.find(".ugc-content-file").length,left=10-amountFiles;(left<=0||amountFiles>10||this.files.length>10)&&GFM.mediaContentUploader.displayWarning(_t("Only 10 photos can be uploaded at a time."));var content=$(".js-composer-media-copy");content.parent().removeClass("hide"),content.addClass("composer-media--isloading");for(var i=0;i<this.files.length&&i<left;i++){var file=this.files[i],newContent=content.first().clone().show().removeClass("js-composer-media-copy"),newContentFile=newContent.insertBefore($(".composer-media-list .composer-media-add"));file.container=newContentFile,resizeImage(file,settings.callbackDisplay)}}),void($(".show-for-large .sortable").length>0&&dragula([$(".show-for-large .sortable")[0]],{accepts:function(el,source,handle,sibling){return null!=sibling},invalid:function(el,handle){return el.className.indexOf("composer-media-add")>=0||handle.className.indexOf("composer-media-add")>=0}}).on("dragend",function(type,listener){GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_drag_media"})})))},uploadImage=function(file,formData,callBack){file.type.match(/^image\//)&&(file.type.match(/jpeg/)||file.type.match(/png/))?$.ajax({url:"/mvc.php?route=donate/upload_UGC_file",type:"POST",xhr:function(){return $.ajaxSettings.xhr()},data:formData,dataType:"json",cache:!1,contentType:!1,processData:!1,timeout:3e5}).done(function(response){callBack(response)}).fail(function(response){callBack({success:!1})}):file.type.match(/jpeg/)||file.type.match(/png/)?GFM.mediaContentUploader.displayWarning(_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])):(file.container.remove(),GFM.mediaContentUploader.displayWarning(_t("{name} cant be uploaded. Please try a JPG or PNG file. ",[{name:file.name}])))},displayWarning=function(text){GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_upload_warning",gfm:{text:text}}),$(".form-banner-error-text").html(text),$(".media-upload-error").removeClass("hide").addClass("error-box"),$(".form-banner").removeClass("hide").addClass("form-banner-error"),$(".error-msg").removeClass("hide"),$(".js-postdonate-comment").addClass("is-error")},removeWarning=function(){$(".form-banner-error-text").empty(),$(".media-upload-error").removeClass("error-box").addClass("hide"),$(".form-banner").removeClass("form-banner-error").addClass("hide"),$(".error-msg").addClass("hide"),$(".js-postdonate-comment").removeClass("is-error")},removeElement=function(element){var siblings=element.siblings();1===siblings.length&&$(".composer-upload-area").addClass("hide"),element.remove()},rotateElement=function(element){var file=element.find("img.ugc-content-file"),input=element.find("input"),loadingHideElements=element.find(".rotate-button, .close-button, .ugc-content-file"),url=file.attr("src");url&&(element.find(".fa-spin").removeClass("hide"),loadingHideElements.addClass("hide"),$.ajax({url:"/mvc.php?route=donate/rotate_UGC_file",type:"POST",data:{pic_url:url},dataType:"json",timeout:3e5}).done(function(response){if(response.success){input.val(response.data.pic_url),file.attr("src",response.data.upload_thumb_url);var img=new Image;img.src=file.attr("src"),img.addEventListener("load",function(){var addClass,ratio=img.width/img.height,pratio=element.width()/element.height();ratio>=pratio?addClass="media-item-wide":ratio<pratio&&(addClass="media-item-tall"),file.removeClass("media-item-wide").removeClass("media-item-tall").addClass(addClass),loadingHideElements.removeClass("hide"),element.find(".fa-spin").addClass("hide");
})}}))};return{init:initialize,upload:uploadImage,displayWarning:displayWarning,removeWarning:removeWarning,removeElement:removeElement,rotateElement:rotateElement}}(GFM,jQuery),$(document).ready(function(){GFM.mediaContentUploader.init({callbackDisplay:function(file,image,blob){var formData=new FormData;void 0!=blob?formData.append("file",blob,file.name):formData.append("file",file,file.name),GFM.mediaContentUploader.upload(file,formData,function(response){if(!response.success)return file.container.remove(),GFM.mediaContentUploader.displayWarning(response.message?response.message:_t("Your photo {name} can't be uploaded at this time. Please try again later.",[{name:file.name}])),!1;file.container.append('<input type="hidden" name="content[picurl][]" value="'+response.url+'" />'),file.container.append('<img class="ugc-content-file" style="visibility: hidden" src="'+response.upload_thumb_url+'" alt="">'),file.container.find(".close-button").removeClass("hide"),file.container.find(".rotate-button").removeClass("hide"),file.container.find(".fa-spin").addClass("hide");var addClass,ratio=image.width/image.height,pratio=file.container.width()/file.container.height();ratio>=pratio?addClass="media-item-wide":ratio<pratio&&(addClass="media-item-tall"),file.container.find(".ugc-content-file").addClass(addClass);var img=new Image;img.src=file.container.find(".ugc-content-file").attr("src"),img.addEventListener("load",function(){file.container.find(".ugc-content-file").css("visibility",""),$(".composer-media").removeClass("composer-media--isloading")})}),$(".ugc-content-file").length<10&&$(".composer-media-add").removeClass("hide")}})});var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.PostContent=function($){var PostContent=function($el){this.$contain=$el,this.$commentInput=$el.find(".composer-commentarea textarea"),this.addPostContentHandlers();var _this=this;Kit.Facebook.getLoginStatusResponse().then(function(response){"connected"===response.status&&(GFM.analytics.track_event("mp_page_click",{elementid:$(".js-show-content-trigger").data("gfm-analytics-element")+"_automatically",viewid:$(".js-show-content-trigger").data("gfm-analytics-viewid")+"_automatically"}),_this.initPostContentFacebookData(response))})};return PostContent}(jQuery),GFM.components.PostContent.prototype=function($){var _addContentInputHandler=function(){this.$commentInput.each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px; overflow-y:hidden;")}).on("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})},_addPostContentClickHandler=function(){var _this=this;this.$contain.find(".js-post-content").on("click",function(e){e.preventDefault();var ajaxCall=postContent.call(_this);ajaxCall&&ajaxCall.then(handleContentResponse.bind(_this)).fail(handleContentResponse.bind(_this))})},handleContentResponse=function(response){response&&"string"==typeof response&&"{"!==response[0]&&"<"===response[0]?(GFM.analytics.track_event("mp_page_click",{elementid:"btn_post_content_success",gfm:{uploaded_media:$(response).find(".js-media").first().find("img").length,comment_length:$(response).find(".js-truncate p").first().text().length}}),prependNewContent.call(this,$(response)),hideCommentError.call(this),hideCommentInput.call(this),emptyContentField.call(this)):"string"==typeof response?displayCommentError.call(this,JSON.parse(response)):"object"==typeof response?displayCommentError.call(this,response):displayCommentError.call(this),hideLoady.call(this)},postContent=function(){var postData={Comments:{text:this.$commentInput.val(),firstname:this.$contain.find('input[name="facebook_name"]').val()},content:this.$contain.first().find('input[name="content[picurl][]"]').serialize(),FBLogin:{uid:this.$contain.find('input[name="facebook_id"]').val(),token:this.$contain.find('input[name="facebook_token"]').val()},fid:this.$contain.find('input[name="fid"]').val(),fid2:this.$contain.find('input[name="fid2"]').val()};return postData.Comments.text||postData.content?(displayLoady.call(this),$.ajax({url:"//www."+GFM_DOMAIN+"/mvc.php?route=donate/postcomment",data:postData,async:!0,type:"POST",timeout:3e5})):(displayCommentError({error:_t("Please enter a comment or upload a photo")}),!1)},displayLoady=function(){this.$contain.find("form").css("visibility","hidden"),this.$contain.find(".loady-post").removeClass("hide")},hideLoady=function(){this.$contain.find("form").css("visibility",""),this.$contain.find(".loady-post").addClass("hide")},showCommentInput=function(){this.$contain.find(".js-show-content-trigger").off("click"),this.$contain.find(".js-show-content-trigger").removeClass("js-show-content-trigger")},emptyContentField=function(){this.$contain.find(".photo-upload-field").val("")},hideCommentInput=function(){$(".composer-commentarea textarea").val(""),$(".composer-commentarea textarea").css("height","initial"),$(".composer-media-list .composer-media:not(.composer-media-add)").remove(),$(".js-dropdown-uploader").addClass("hide")},displayCommentError=function(response){var text,type="exclamation",bannerType="error";void 0!=response.error&&"string"==typeof response.error?text=response.error:void 0!=response.warning&&"string"==typeof response.warning?(type="info",text=response.warning,bannerType="info"):text=void 0!=response.statusText&&"timeout"==response.statusText?_t("There was a network issue. Please try again."):_t("There was an error with your comment. Please try again."),$(".form-banner").addClass("form-banner-"+bannerType).html('<div><div class="fa fa-'+type+'-circle"></div>&nbsp; '+text+"</div>"),$(".form-banner").removeClass("hide")},hideCommentError=function(){$(".form-banner").empty(),$(".form-banner").addClass("hide")},prependNewContent=function($comment){var tempComment,$commentsContain=this.$contain.find(".supporters-list");0===$commentsContain.length&&($commentsContain=this.$contain.find(".js-contents-contain")),$commentsContain.prepend($comment),tempComment=new GFM.components.TruncateText($comment),tempContent=new GFM.content.init($comment),$comment.hide().slideDown("fast");var newContent=(new GFM.components.Heart($comment.find(".js-heart")),this.$contain.find(".js-contents-contain"));GFM.content.init(newContent),Kit.Facebook.initForObject(newContent),$comment.foundation()},_addShowContentClickHandler=function(){var _this=this,perms="email,user_friends,user_birthday",fbLoginOptions={connectSuccess:function(response){GFM.analytics.track_event("mp_page_click",{elementid:$(".js-show-content-trigger").data("gfm-analytics-element"),viewid:$(".js-show-content-trigger").data("gfm-analytics-viewid")}),initFacebookData.call(this,response)}.bind(_this),connectFail:function(){},permissions:{scope:perms},redirectUri:GFM.donateVariables.shareUrl+"?fbaddcomment=1"};this.$contain.find(".js-show-content-trigger").on("click",function(){GFM.analytics.track_event("mp_page_view",{viewid:$(".js-show-comment-trigger").data("gfm-analytics-viewid")}),Kit.Facebook.login(fbLoginOptions)})},initFacebookData=function(response){var rand=GFM.utils.numberUtils.getRandomIntBetween(1e4,99999),fbImgSrc="//graph.facebook.com/"+response.authResponse.userID+"/picture?type=square&height=150&width=150&rand="+rand;showCommentInput.call(this),this.$contain.find(".js-content-entry-pic").attr("src",fbImgSrc).removeClass("hide"),this.$contain.find(".js-content-entry-default-pic").addClass("hide"),this.$contain.find('input[name="facebook_token"]').val(response.authResponse.accessToken),this.$contain.find('input[name="facebook_id"]').val(response.authResponse.userID),FB.api("/me",{fields:"name"},function(res){res.error||this.$contain.find('input[name="facebook_name"]').val(res.name)}.bind(this))},addPostContentHandlers=function(){_addShowContentClickHandler.call(this),_addContentInputHandler.call(this),_addPostContentClickHandler.call(this)};return{addPostContentHandlers:addPostContentHandlers,initPostContentFacebookData:initFacebookData}}(jQuery);var GFM=GFM||{};GFM.content=function(GFM,$){var modalSliderStatic,previousContent,indexMedia,currentContent,modalElementId="js-ugc-content-modal",modalElement=$("#"+modalElementId),chevronLeft=(modalElement.find(".fa-chevron-right"),modalElement.find(".fa-chevron-left")),ugcMediachevronRight=modalElement.find(".ugc-media-arrows .fa-chevron-right"),ugcMediachevronLeft=modalElement.find(".ugc-media-arrows .fa-chevron-left"),modalSlider=modalElement.find(".media-slider"),previousIndexMedia=-1,initialize=function(el){el.find(".js-comment-content.hide").each(function(){setContent($(this)),handleMediaClick($(this))})},handleMediaClick=function(el){el.find('[data-open-content-modal="'+modalElementId+'"]').on("click",function(e){$(this).hasClass("ugc-media-container")?(modalSlider.addClass("hide"),currentContent=$(this).data("content-id"),indexMedia=0):(modalSlider.removeClass("hide"),$("#js-see-all-media").addClass("hide"),currentContent=0,indexMedia=1),modalElement.find(".js-modal-ugc-content-wrapper").css("visibility","hidden"),GFM.utils.modalBehaviors.open("#"+modalElementId);var contentId=$(this).data("content-id"),contentIndex=$(this).index(".js-comments-content-media"),fundId=$(this).data("fund-id");e.preventDefault(),previousContent==currentContent?displaySliderMedia(previousIndexMedia>=0&&0==currentContent?previousIndexMedia:indexMedia):0==currentContent&&void 0!=modalSliderStatic&&modalSliderStatic.length?(previousContent=currentContent,modalSlider.find(".slider-wrapper").html(modalSliderStatic.html()),displaySliderMedia(previousIndexMedia>=0?previousIndexMedia:indexMedia)):$.ajax({url:"/mvc.php?route=donate/getContent",type:"POST",data:{contentId:contentId,fundId:fundId},dataType:"JSON"}).done(function(response){if(previousContent=currentContent,response.success){if(void 0!=contentId){if(GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_single_lighbox",gfm:{ugc_id:contentId,ugc_index:contentIndex}}),!response.ugc[0].urls.length){var commentUgc=response.ugc[0];return void fillModalCommentLightbox(commentUgc)}}else{var i=0;$(response.ugc).each(function(){$(this.urls).each(function(){i++})}),GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_media_viewer",gfm:{number_media:i}})}fillModalLightbox(response)}})})},fillModalCommentLightbox=function(commentUgc){modalElement.find(".modal-ugc-content").addClass("modal-ugc-content--text").removeClass("modal-ugc-content--image").removeClass("modal-ugc-content--imageText").show();var supporterName="<strong>"+commentUgc.firstname+"</strong>";commentUgc.text&&modalElement.find(".ugc-modal-comment").removeClass("hide").html("<p>"+commentUgc.text+"</p>"),commentUgc.donation&&commentUgc.donation.is_hidden&&1==parseInt(commentUgc.donation.is_hidden)?(supporterName=_t("<strong>{name}</strong> donated to a GoFundMe",[{name:commentUgc.firstname}]),commentUgc.share.title=_t("{name} donated to a GoFundMe",[{name:commentUgc.firstname}])):commentUgc.donation&&(supporterName=_t("<strong>{name}</strong> donated {formatted_amount}",[{name:commentUgc.firstname,formatted_amount:commentUgc.donation.formatted_amount}])),$(".js-modal-ugc-content-wrapper").css("visibility",""),chevronLeft.addClass("hide"),initProfileAvatarModal(commentUgc.picture,commentUgc.initials,!1),modalElement.find(".supporter-name").html(supporterName),modalElement.find(".supporter-time").text(commentUgc.time_ago),modalElement.find(".js-modal-ugc-content-wrapper .heart").html(commentUgc.hearts),decorateHeart(modalElement.find(".js-modal-ugc-content-wrapper .js-heart")),fillShareButtons(commentUgc.share.url,commentUgc.share.title)},fillShareButtons=function(shareUrl,shareTitle){$(".ugc-modal-footer .js-share-facebook").data("shareurl",shareUrl),$(".ugc-modal-footer .js-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+shareTitle+"&url="+encodeURIComponent(shareUrl))},fillModalLightbox=function(response){fillModalSlider(response.ugc),displaySliderMedia(previousIndexMedia>=0&&0==currentContent?previousIndexMedia:indexMedia)},fillModalSlider=function(ugc){if(modalSlider.find(".viewer-media-container").remove(),$(ugc).each(function(){var content=this;ugc.donation&&ugc.donation.is_hidden&&(content.share.title=_t("{name} donated to a GoFundMe",[{name:ugc.firstname}])),$(this.urls).each(function(index){var img=$('<div class="viewer-media-container"><img class="viewer-media absolute-center" alt=""data-supporter-name="'+content.firstname+'"data-supporter-time="'+content.time_ago+'"data-supporter-picture="'+content.picture+'"data-supporter-initials="'+content.initials+'"data-supporter-text="'+content.text+'"data-share-title="'+content.share.title+'"data-share-url="'+content.share.url+'"data-original="'+this+'"data-media-viewer-thumb="'+content.media_viewer_thumb_urls[index]+'" ><div class="hide heart">'+content.hearts+"</div></div>");modalSlider.find(".slider-wrapper").append(img)})}),0==currentContent&&(void 0==modalSliderStatic||!modalSliderStatic.length)){var sliderWrapper=modalSlider.find(".slider-wrapper");modalSlider.after('<div class="slider-wrapper-static hide">'+sliderWrapper.html()+"</div>"),modalSliderStatic=modalElement.find(".slider-wrapper-static")}},loadSliderImages=function(){var sliderWidth=modalSlider.width()+125,images=modalSlider.find(".viewer-media:not([src])");images.each(function(){return $(this).offset().left<=sliderWidth&&($(this).attr("src",$(this).data("media-viewer-thumb")),void $(this).load(function(){setRatio(this)}))})},displaySliderMedia=function(index){var sliderImages=modalSlider.find(".viewer-media-container");sliderImages.removeClass("viewer-media--active");var thumbnailContainer=sliderImages.eq(index),thumbnail=thumbnailContainer.find(".viewer-media");thumbnailContainer.addClass("viewer-media--active"),thumbnailContainer.is(":last-child")?ugcMediachevronRight.addClass("hide"):ugcMediachevronRight.removeClass("hide"),0==thumbnailContainer.index(".viewer-media-container")?ugcMediachevronLeft.addClass("hide"):ugcMediachevronLeft.removeClass("hide"),modalSlider.hasClass("hide")||GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_media_viewer_scroll",gfm:{ugc_index:index+1,ugc_total:sliderImages.length}}),autoMoveSlider(),loadSliderImages();var picture=thumbnail.data("supporter-picture"),initials=thumbnail.data("supporter-initials"),name=thumbnail.data("supporter-name"),timeAgo=thumbnail.data("supporter-time"),text=thumbnail.data("supporter-text"),shareTitle=thumbnail.data("share-title"),shareUrl=thumbnail.data("share-url"),src=thumbnail.data("original"),hearts=thumbnailContainer.find(".heart").html();initProfileAvatarModal(picture,initials,!1),modalElement.find(".supporter-name").html("<strong>"+name+"</strong>"),modalElement.find(".supporter-time").text(timeAgo),text?modalElement.find(".ugc-modal-comment").removeClass("hide").html("<p>"+text+"</p>"):modalElement.find(".ugc-modal-comment").addClass("hide"),text?modalElement.find(".modal-ugc-content").addClass("modal-ugc-content--imageText").removeClass("modal-ugc-content--image").removeClass("modal-ugc-content--text"):modalElement.find(".modal-ugc-content").addClass("modal-ugc-content--image").removeClass("modal-ugc-content--imageText").removeClass("modal-ugc-content--text"),modalElement.find(".js-modal-ugc-content-wrapper .heart").html(hearts),decorateHeart(modalElement.find(".js-modal-ugc-content-wrapper .js-heart")),fillShareButtons(shareUrl,shareTitle);var media=modalElement.find(".ugc-modal-media-column");media.find(".ugc-modal-media").remove();var img=$('<img class="ugc-modal-media select-disabled" src="'+src+'" alt="">');media.append(img),img.load(function(){initModalImages($(this)),$(".js-modal-ugc-content-wrapper").css("visibility","")}),0==currentContent&&(previousIndexMedia=index)},decorateHeart=function(el){var heart=new GFM.components.Heart(el),heartId=el.data("contentId").toString(),heartType=el.data("contentType");GFM.components.Heart.isHearted(heartType,heartId)&&!heart.isFavorite()&&el.addClass("is-fave")},displayModalPicture=function(dir){var slider=modalSlider,currentPic=slider.find(".viewer-media--active"),index=currentPic.index(".viewer-media-container"),pics=slider.find(".viewer-media-container");dir>0&&index+1<pics.length?displaySliderMedia(index+1):dir<0&&index>0&&displaySliderMedia(index-1)},autoMoveSlider=function(){var slider=modalSlider;if(slider.is(":visible")){var currentPic=slider.find(".viewer-media--active"),index=currentPic.index(".viewer-media-container"),pics=slider.find(".viewer-media-container"),picLeft=pics.eq(index-1),picRight=pics.eq(index+1);0!=index&&picLeft.length&&picLeft.offset().left<0&&(index-1==0?pics.parent().animate({left:"0"},0):pics.parent().animate({left:"+=130px"},0)),picRight.length&&picRight.offset().left+picRight.width()>$(window).width()&&pics.parent().animate({left:"-=130px"},0)}},setContent=function(el){initProfileAvatar(el),el.foundation();var images=el.find("img");images.each(function(){$(this).attr("src",$(this).data("original"))}),images.load(function(){initImages(images),tempComment=new GFM.components.TruncateText(el),el.removeClass("hide")}),el.find(".ugc-media-container").length||(el.removeClass("hide"),tempComment=new GFM.components.TruncateText(el))},initProfileAvatar=function(el,lazyload){var avatar=el.find(".facebook-avatar"),avatarNoPic=el.find(".avatar-no-pic");avatar.data("original")?lazyload===!1?avatar.attr("src",picture):avatar.lazyload():(avatar.addClass("hide"),avatarNoPic.removeClass("hide"))},initProfileAvatarModal=function(picture,initials,lazyload){var avatar=modalElement.find(".facebook-avatar"),avatarNoPic=modalElement.find(".avatar-no-pic");void 0!=picture&&picture?(avatar.data("original",picture),lazyload===!1?avatar.attr("src",picture):avatar.lazyload()):void 0!=initials&&initials&&avatarNoPic.text(initials),void 0!=picture&&picture?(avatarNoPic.addClass("hide"),avatar.removeClass("hide")):(avatar.addClass("hide"),avatarNoPic.removeClass("hide"))},setRatio=function(el){var ratio=$(el).width()/$(el).height(),pratio=$(el).parent().width()/$(el).parent().height();ratio>=pratio?$(el).addClass("media-item-wide"):ratio<pratio&&$(el).addClass("media-item-tall")},initImages=function(el){el.each(function(){setRatio(this)})},initModalImages=function(img){var mediaHeight=img.height(),large=$(window).width()>767,mobile=$(window).width()<768,commentHeader=$(".ugc-supporter-container").outerHeight(!0),commentfooter=$(".ugc-modal-footer").outerHeight();$(".js-modal-ugc-content-wrapper").hasClass("modal-ugc-content--imageText")&&(large?$(".ugc-modal-comment").css("height",mediaHeight-commentHeader-commentfooter-16):$(".ugc-modal-comment").css("height","initial")),mobile&&mediaHeight>$(window).height()?$(".ugc-modal-footer").addClass("ugc-modal-footer--sticky"):$(".ugc-modal-footer").removeClass("ugc-modal-footer--sticky")},getModal=function(){return modalElement};return{init:initialize,displayModalPicture:displayModalPicture,initModalImages:initModalImages,initMediaLightbox:handleMediaClick,displaySliderMedia:displaySliderMedia,getModal:getModal}}(GFM,jQuery),$(window).resize(function(){var img=$(".ugc-modal-media-column img:not(.hide)");GFM.content.initModalImages(img)}),$(document).ready(function(){GFM.content.initMediaLightbox($(".campaign-img-contain")),GFM.content.init($(".js-contents-contain")),$(document).on("click","#js-see-all-media",function(){$("#js-see-all-media").addClass("hide"),$(".media-slider").removeClass("hide"),$(".ugc-media-arrows").addClass("hide")}),$(document).on("click","#js-open-media-viewer",function(){$(".ugc-media-arrows").addClass("hide-for-large")}),$(document).on("click","#js-open-media-viewer, #js-see-all-media",function(){$(".modal-ugc-content").addClass("modal-ugc-content--mediaslider")}),$("#js-ugc-content-modal").on("closed.zf.reveal",function(){$("#js-see-all-media").removeClass("hide"),$(".media-slider").addClass("hide"),$(".ugc-media-arrows").removeClass("hide hide-for-large"),$(".modal-ugc-content").removeClass("modal-ugc-content--mediaslider")}),$(document).on("click",".js-mobile-media .fa-chevron-left, .js-mobile-media .fa-chevron-right",function(){var ugcId=$(this).closest(".js-comment-content").data("id"),contentIndex=$(this).closest(".js-comment-content").index();GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_arrow_left",gfm:{ugc_id:ugcId,ugc_index:contentIndex}})}),$(document).on("click",".modal-ugc-content-container .fa-chevron-left",function(){GFM.content.displayModalPicture(-1)}),$(document).on("click",".modal-ugc-content-container .fa-chevron-right",function(){GFM.content.displayModalPicture(1)}),$(document).on("click",".modal-ugc-content-container .viewer-media-container",function(){GFM.content.displaySliderMedia($(this).index(".viewer-media-container"))}),$(document).on("keydown",function(event){GFM.content.getModal().is(":visible")&&(37==event.keyCode?GFM.content.displayModalPicture(-1):39==event.keyCode&&GFM.content.displayModalPicture(1))}),$(document).click(function(event){var findBG=event.target.id;"js-ugc-content-modal"==findBG&&$("#js-ugc-content-modal").foundation("close")}),$(document).on("click",".js-remove-media",function(){0==$(".ugc-content-file").length&&$(".js-dropdown-uploader").addClass("hide")});var findiframe=$(".iframe-wrapper").length,iframesrc=$(".iframe-wrapper").contents().attr("src"),vimeo="vimeo";findiframe&&iframesrc.indexOf(vimeo)!=-1&&$(".open-media-viewer").addClass("isVimeo")}),$(window).on("load",function(){$("#js-view-content").length&&$("#js-view-content").click();var $container=$(".js-comments-column-contain");$.ajax({url:"/mvc.php?route=donate/pagingContentsFoundation",data:{url:GFM.donateVariables.fundUrl,idx:0},async:!0,type:"GET"}).then(function(response){var $comments=$container.find(".js-contents-contain"),$newComments=$(response).find(".supporters-list").children(),$newFooter=$(response).find(".comments-control-footer");response.length&&($comments.find(".supporters-list").html($newComments),$comments.each(function(){$newPages=$(this).find(".supporters-list").children(),$(this).trigger("paging.additionalPagesLoaded.contents",{$newPages:$newPages})}),GFM.content.init($comments),$newComments.hide().slideDown(),$comments.find(".comments-control-footer").replaceWith($newFooter))}).fail(function(err){})});var GFM=GFM||{};GFM.ugcDonations=function(GFM,$){var modal=$("#view-donations-modal"),numberOfDonations=modal.find(".js-donation-content").length,clicked=!1,initialize=function(){var loadMore=modal.find('[data-open-modal="view-donations-modal"]');loadMore.addClass("hide"),loadMore.next(".is-loading").removeClass("hide"),$(".gfm-modal-unstyled-wrapper .gfm-modal").scroll(function(){loadMoreDonations(clicked)})},loadMoreDonations=function(){var minDisplay=modal.offset().top,maxDisplay=modal.height()+minDisplay,lastDonationDisplayed=modal.find(".js-donation-content:last-child"),currentNumberOfDonations=modal.find(".js-donation-content").length,loadMore=modal.find(".js-load-more");lastDonationDisplayed.offset().top<=maxDisplay&&!clicked&&loadMore.length&&(modal.find(".js-donations-contain .js-load-more").first().click(),GFM.analytics.track_event("mp_page_click",{elementid:"btn_content_donations_load_more",gfm:{ugc_donation_index:modal.find(".js-donation-content").length}}),clicked=!0),currentNumberOfDonations!=numberOfDonations&&(numberOfDonations=currentNumberOfDonations,clicked=!1)};return{init:initialize}}(GFM,jQuery),$("#view-donations-modal").on("open.zf.reveal",function(){GFM.ugcDonations.init()}),$(function(){function buildLoadingPanel(offset,pageNumber){return $('<div class="js-pagination-panel hide" data-offset="'+offset+'"><div class="row"><div class="column small-10">'+_t("Update {pageNumber}",[{pageNumber:pageNumber}])+'<br><a class="fr">&nbsp;</a></div></div><div class="dotted-line row column mt mb"></div><div class="co-update"><i class="big-loady-guy fa fa-circle-o-notch fa-spin" style="margin-top:4.5rem"></i></div></div>')}function buildLoadingPanels(startIndex,pagesLoaded,totalPages){var currentLoadingPanel,currentIndex,loadingPanels=[];for(currentIndex=startIndex;currentIndex<startIndex+pagesLoaded&&!(totalPages&&currentIndex>=totalPages);currentIndex++)currentLoadingPanel=buildLoadingPanel(currentIndex,totalPages-currentIndex)[0],loadingPanels.push(currentLoadingPanel);return $(loadingPanels)}function switchDropdown($dropdownContain,sortType,linkText){var $dropdownLink=$dropdownContain.find(".js-show-sort-menu"),$donationDrops=$(".js-dropdown-donations .js-show-sort-menu"),$caret=$('<i class="fa fa-caret-down"></i>');$dropdownLink.data("dropdownSortType",sortType).text(linkText).append("&nbsp;&nbsp;").append($caret),$dropdownContain.find(".js-sort-menu").addClass("hide"),$dropdownContain.find(".js-sort-link").removeClass("hide"),$dropdownContain.find('.js-sort-link[data-sort-type="'+sortType+'"]').addClass("hide"),$donationDrops.data("dropdownSortType",sortType).text(linkText).append("&nbsp;&nbsp;").append($caret)}function decorateTruncatedUpdates($elements,container){var $el,i,index;for(i=0;i<$elements.length;i++)$el=$elements.eq(i),index=$el.data("offset"),container[index]=new GFM.components.TruncateText($el)}function decorateTruncatedSupporterContent($elements,container){var $el,i,index;for(i=0;i<$elements.length;i++)$el=$elements.eq(i),index=$el.data("id"),container[index]=container[index]||[],container[index].push(new GFM.components.TruncateText($el))}function checkSupporterTruncation(container){var key,i,content;for(key in container)if(container.hasOwnProperty(key))for(i=0;i<container[key].length;i++)content=container[key][i],content.disableNonOverflowTruncation()}function decorateUserHearts($elements){$elements.each(function(){var $heartEl=$(this).find(".js-heart");if($heartEl.length){var heart=new GFM.components.Heart($heartEl),heartId=$heartEl.data("contentId").toString(),heartType=$heartEl.data("contentType");GFM.components.Heart.isHearted(heartType,heartId)&&!heart.isFavorite()&&$heartEl.addClass("is-fave")}})}function scrollToStoryContent(){var $tabsContain=$("#campaignStoryContent");GFM.utils.animationUtils.scrollPageTo($tabsContain,400,stickyHeaderHeight)}function setPostShareConnectCookie(){var expiration=new Date;expiration.setDate(expiration.getDate()+7),document.cookie="ask_for_postshare_connect=false; path=/; expires="+expiration.toUTCString()}var $updatesContain=$("#updates"),$updatePanels=$(".js-pagination-content").find(".js-pagination-panel"),updatesPaginationOptions={selectedLinkClass:"current",hideLinkArrowsAtEnd:!0,maxButtons:4,pageLoadLimit:GFM.donateVariables.limitUpdateDisplayed,totalPages:GFM.donateVariables.countUpdates},updatesPagination=new GFM.components.ScrollingPagination($("#updates"),updatesPaginationOptions),campaignStoryTextTruncate=new GFM.components.TruncateText($("#story")),truncatedUpdates=($(".js-comments-column-contain").map(function(){return new GFM.components.PostComment($(this))}),$(".js-ugc-comments").map(function(){return new GFM.components.PostContent($(this))}),{}),truncatedDonations={},truncatedComments={},stickyHeaderHeight=115,$categoryCarouselContain=$(".category-carousel-contain");$(".js-categories-left-arrow").on("click",function(){$categoryCarouselContain.animate({scrollLeft:$categoryCarouselContain.scrollLeft()-$categoryCarouselContain.width()-60},500)}),$(".js-categories-right-arrow").on("click",function(){$categoryCarouselContain.animate({scrollLeft:$categoryCarouselContain.scrollLeft()+$categoryCarouselContain.width()-60},500)}),$(document).foundation(),Foundation.Keyboard.register("Orbit",{}),decorateTruncatedUpdates($updatePanels,truncatedUpdates),decorateTruncatedSupporterContent($(".js-donation-content"),truncatedDonations),decorateTruncatedSupporterContent($(".js-comment-content"),truncatedComments),$("#story").find("iframe").each(function(){$(this).removeProp("height","width").removeAttr("style").wrap('<div class="iframe-wrapper"></div>')}),$(".campaign-img-contain").find("iframe").attr("src",function(i,val){return val}),"1"===GFM.utils.stringUtils.getUrlVars().viewupdates&&setTimeout(GFM.utils.animationUtils.scrollPageTo.bind(null,$updatesContain,400,stickyHeaderHeight),50),Kit.Facebook.getLoginStatusResponse().then(function(response){"connected"===response.status&&void 0!==GFM.donateVariables&&(GFM.donateVariables.fbAuthed=!0)}),$(window).on("changed.zf.mediaquery",function(event,newSize,oldSize){var isOneColumn="medium"===newSize||"small"===newSize,isTwoColumns="large"===newSize||"xlarge"===newSize||"xxlarge"===newSize,wasOneColumn="medium"===oldSize||"small"===oldSize,wasTwoColumns="large"===oldSize||"xlarge"===oldSize||"xxlarge"===oldSize;isOneColumn&&wasTwoColumns?(checkSupporterTruncation(truncatedComments),GFM.responsiveCampaign.StickyHeader.checkToDisable()):isTwoColumns&&wasOneColumn&&checkSupporterTruncation(truncatedComments)}),$(".js-select-updates").on("click",function(e){campaignStoryTextTruncate.$el.find(".co-story"),$("#story").find(".read-more");e.preventDefault();var $tabsContain=$("#campaignStoryContent");$tabsContain.foundation("selectTab",$updatesContain),scrollToStoryContent(),updatesPagination.displayPanel(0),updatesPagination.renderLinksAt(0),campaignStoryTextTruncate.shrinkText()}),$(".js-translate-ugc").on("click",function(e){e.preventDefault();var el=$(this),target=el.data("target"),object=el.data("object"),identifier=object.replace(":",""),curLocale=GFM.components.VisitorCookie.getVisitorCookie("locale"),loady=$("#ugc-translate-loady-"+identifier);if(1!=el.data("is-disabled")){var saved=null,cached=null,linkName=null;try{var cachedUGCObj=$.parseJSON(sessionStorage.getItem("ugc-"+GFM.donateVariables.fundId)),cachedUGC=cachedUGCObj[object+"_"+curLocale];cachedUGC&&cachedUGC.saved&&cachedUGC.cached&&cachedUGC.linkName&&(saved=cachedUGC.saved,cached=cachedUGC.cached,linkName=cachedUGC.linkName)}catch(e){}if(saved&&$(target).html()!=saved)return $(target).html(saved),$("#ugc-google-div-"+identifier).hide(),void el.html(linkName);if(cached&&$(target).html()!=cached)return $(target).html(cached),$("#ugc-google-div-"+identifier).show(),void el.html("<strong>"+_t("Undo translation")+"</strong>");loady.is(":hidden")&&(el.hide(),loady.show()),$.ajax({url:"/mvc.php?route=donate/translateUGC",data:{oid:object,dataType:"json",_token:$("#_token").val()},method:"post"}).done(function(response){try{response=$.parseJSON(response)}catch(e){return loady.is(":visible")&&(loady.hide(),el.show()),el.data("is-disabled",1),void el.html("<strong>"+_t("Translations are currently unavailable, please try again later.")+"</strong>")}if(response&&response.success&&response.data){var fixedText=response.data.replace(/ \/>/g,"/>");fixedText=fixedText.replace(/<\/ /g,"</");try{var cachedData={};if(cachedData.saved=$(target).html(),cachedData.linkName=el.html(),cachedData.cached=fixedText,sessionStorage.getItem("ugc-"+GFM.donateVariables.fundId)){var prevObj=$.parseJSON(sessionStorage.getItem("ugc-"+GFM.donateVariables.fundId));prevObj[object+"_"+curLocale]=cachedData,sessionStorage.setItem("ugc-"+GFM.donateVariables.fundId,JSON.stringify(prevObj))}else{var newObj={};newObj[object+"_"+curLocale]=cachedData,sessionStorage.setItem("ugc-"+GFM.donateVariables.fundId,JSON.stringify(newObj))}}catch(e){}loady.is(":visible")&&(loady.hide(),el.show()),$(target).html(fixedText),$("#ugc-google-div-"+identifier).show(),el.html("<strong>"+_t("Undo translation")+"</strong>")}else loady.is(":visible")&&(loady.hide(),el.show()),el.data("is-disabled",1),el.html("<strong>"+_t("Translations are currently unavailable, please try again later.")+"</strong>")})}}),$(".js-hide-selected").on("click",function(e){e.preventDefault(),$(".selected-update-panel").addClass("hide"),$(this).addClass("hide"),$updatesContain.find(".pages").removeClass("hide"),$(".js-pagination-panel[data-offset='0']").removeClass("hide"),scrollToStoryContent(),updatesPagination.displayPanel(0),updatesPagination.renderLinksAt(0),campaignStoryTextTruncate.shrinkText()}),$("#campaignStoryContent").on("change.zf.tabs",function(){var $currentUpdate=$updatesContain.find(".js-pagination-panel:not(.hide)"),updateIndex=$currentUpdate.data("offset");
truncatedUpdates[updateIndex].disableNonOverflowTruncation()}),$(".js-charity-show-more").on("click",function(){$(".js-charity-more-details").removeClass("hide").hide().slideDown(),$(this).hide()}),$updatesContain.on("pagination.pageChanged",function(e,data){var prevPageIndex=data.prevPageIndex,truncateModuleInstance=truncatedUpdates[prevPageIndex]||{},$truncateElement=truncateModuleInstance.$el,nextPageIndex=data.nextPageIndex,$nextContent=$("#updates").find('.js-pagination-panel[data-offset="'+nextPageIndex+'"]');$nextContent.find(".js-truncate");$truncateElement&&truncatedUpdates[prevPageIndex].shrinkText(),truncatedUpdates[nextPageIndex]&&truncatedUpdates[nextPageIndex].disableNonOverflowTruncation(),GFM.utils.animationUtils.scrollPageTo($nextContent,400,stickyHeaderHeight)}),$updatesContain.on("pagination.loadMorePages",function(e,data){var offsetIndex=data.offsetIndex,url="//www."+GFM_DOMAIN+"/mvc.php?route=donate/showMoreUpdates",$updatesContentContain=$(this).find(".js-pagination-content"),pageLoadLimit=updatesPagination.options.pageLoadLimit,totalPages=updatesPagination.options.totalPages;$updatesContentContain.append(buildLoadingPanels(offsetIndex,pageLoadLimit,totalPages)),$.ajax({url:url,async:!0,data:{url:GFM.donateVariables.fundUrl,offset:offsetIndex}}).then(function(updateData){var $updatePanel,$loadyPanel,pageIndex,i,$newUpdates=$(updateData).children();for(i=0;i<$newUpdates.length;i++)$updatePanel=$newUpdates.eq(i),pageIndex=$updatePanel.data("offset"),$loadyPanel=$updatesContentContain.find('.js-pagination-panel[data-offset="'+pageIndex+'"]'),$loadyPanel.replaceWith($updatePanel),updatesPagination.currentPageIndex===pageIndex&&updatesPagination.displayPanel(pageIndex),truncatedUpdates[$updatePanel.data("offset")]=new GFM.components.TruncateText($updatePanel);decorateUserHearts($newUpdates)})}),$updatesContain.on("click",".js-pagination-reveal",function(){$(".selected-update-panel").addClass("hide"),$(".js-pagination-reveal").addClass("hide"),$updatesContain.find(".pages").removeClass("hide"),$updatesContain.find('.js-pagination-link[data-page-index="1"]').click()}),$(".dropdown-container").on("paging.sortedPagesLoaded.donations",function(e,data){var $newPages=data.$newPages,$donations=$(".js-donations-contain");$donations.empty().append($newPages),switchDropdown(data.$dropdownContain,data.sortType,data.linkText),decorateUserHearts($newPages.find(".supporter")),decorateTruncatedSupporterContent($newPages.find(".js-donation-content"),truncatedDonations),Kit.Facebook.initForObject($newPages)}),$(".dropdown-container").on("paging.sortedPagesLoaded.comments",function(e,data){var $newPages=data.$newPages,$comments=$(".js-comments-contain:visible");$comments.empty().append($newPages),switchDropdown(data.$dropdownContain,data.sortType,data.linkText),decorateUserHearts($newPages.find(".supporter")),decorateTruncatedSupporterContent($newPages.find(".js-comment-content"),truncatedComments)}),$(".js-donations-contain").on("paging.additionalPagesLoaded.donations",function(e,data){var $newPages=data.$newPages;decorateUserHearts($newPages),decorateTruncatedSupporterContent($newPages,truncatedDonations),Kit.Facebook.initForObject($newPages)}),$(".js-comments-contain").on("paging.additionalPagesLoaded.comments",function(e,data){var $newPages=data.$newPages;decorateUserHearts($newPages),decorateTruncatedSupporterContent($newPages,truncatedComments)}),$(".js-contents-contain").on("paging.additionalPagesLoaded.contents",function(e,data){var $newPages=data.$newPages;decorateUserHearts($newPages),decorateTruncatedSupporterContent($newPages,truncatedComments),Kit.Facebook.initForObject($newPages)}),$(document).on("closed.zf.reveal","#share-upsell-modal",function(){$("#upsell-main").show(),$("#upsell-connect").hide(),void 0!==GFM.donateVariables&&1==GFM.donateVariables.wasAskedForPostShareConnect&&setPostShareConnectCookie()}),$(document).on("closed.zf.reveal","#post-share-connect",function(){setPostShareConnectCookie()}),$(".js-share-more-ways").on("click",function(){var urlInput=$("#campaign-short-url");if(urlInput.val())$("#more-ways-to-share-modal").foundation("open");else{var data={fund_id:GFM.donateVariables.fundId};$.ajax({url:"/mvc.php?route=donateajax/getCampaignPageShortUrl",data:data,timeout:5e3,datatype:"text",success:function(response){response.length>0?urlInput.val(response):urlInput.val(GFM.donateVariables.shareUrl)},error:function(){urlInput.val(GFM.donateVariables.shareUrl)}}).always(function(){$("#more-ways-to-share-modal").foundation("open")})}}),GFM.components.fingerprint.getFingerprints(function(){GFM.components.fingerprint.setCookie(),GFM.components.fingerprint.setFields()}),null!==GFM.donateVariables.selectedUpdateId&&setTimeout(function(){scrollToStoryContent()},1e3),GFM.donateVariables.shouldShowClaimYourShare&&Kit.Facebook.init.then(function(){GFM.analytics.track_event("mp_page_view",{viewid:$("#claim-share-first").data("gfm-analytics-viewid")})}),$(".js-share-twitter").on("click",function(){if($(this).data("rcid")&&void 0!==GFM.donateVariables.fundId){var data={rcid:$(this).data("rcid"),fund_id:GFM.donateVariables.fundId};$.ajax({url:"/mvc.php?route=donateajax/publishTwitterShareRcid",data:data,async:!0})}})});var postShareConnectCallback=function(){$("#share-upsell-modal").foundation("close"),$("#post-share-connect").foundation("close"),GFM.analytics.track_event("mp_page_click",{viewid:"post_share_connect_modal",elementid:"post_share_connect_success"}),FB.api("/me",{fields:"email, name, id"},function(fbRes){Kit.Facebook.getLoginStatusResponse().then(function(loginStatus){var data={};data.fbid=fbRes.id,data.token=loginStatus.authResponse.accessToken,data.rcid=GFM.donateVariables.lastShareRcid,data.fund_id=GFM.donateVariables.fundId,$.ajax({url:"/mvc.php?route=donateajax/setFacebookIDOnShare",data:data,type:"POST",async:!0}),$.ajax({url:"/mvc.php?route=donateajax/connectWithFacebook",data:data,type:"POST",async:!0}),$.ajax({url:"/mvc.php?route=donateajax/ImpactHandleShare",data:{fbid:fbRes.id,fund_id:GFM.donateVariables.fundId},type:"POST",async:!0})})}),GFM.donateVariables.fbAuthed=!0},constructFBLoginOptions=function(){var fbLoginOptions={connectSuccess:function(){GFM_claimYourShareCallback()},connectFail:function(){$("#claim-share-first").slideUp("slow"),$("#claim-share-error").slideDown("slow")},permissions:{scope:"email,user_friends,user_birthday"},redirectURI:"https://www."+GFM_DOMAIN+"/"+GFM.donateVariables.fundUrl};return fbLoginOptions},GFM_claimYourShareCallback=function(){var cys_first=$("#claim-share-first"),cys_second=$("#claim-share-second");Kit.Facebook.getLoginStatusResponse().then(function(loginStatus){if("connected"===loginStatus.status){GFM.analytics.track_event("mp_page_click",{viewid:cys_first.data("gfm-analytics-viewid"),elementid:$("#btn-cys-connect").data("gfm-analytics-elementid")}),cys_first.slideUp("slow"),cys_second.slideDown("slow");var data={};data.fbid=loginStatus.authResponse.userID,data.token=loginStatus.authResponse.accessToken,data.fund_id=GFM.donateVariables.fundId,$.ajax({url:"/mvc.php?route=donateajax/connectWithFacebook",data:data,type:"POST",async:!0,dataType:"text",success:function(response){GFM.analytics.track_event("mp_page_view",{viewid:cys_second.data("gfm-analytics-viewid"),person_id:response})}}),$.ajax({url:"/mvc.php?route=donateajax/ImpactHandleShare",data:data,type:"POST",async:!0})}})},GFM=GFM||{};GFM.responsiveCampaign=GFM.responsiveCampaign||{},GFM.responsiveCampaign.campaignLeaderboard=function($){var loadMoreLeaderboardSupporters=function(event){event.preventDefault(),$(this).remove();var $moreSupporters=$("#js-show-more-leaderboard-supporters");$moreSupporters.find(".loading-icon").removeClass("hide");var fundId=event.data.fundId,$badges=event.data.badges;$.ajax({url:"/mvc.php?route=donateajax/loadMoreLeaderboardShareSupporters",type:"GET",data:{fundId:fundId},success:function(additionalSupporters){if($moreSupporters.remove(),""!==additionalSupporters){var $new=$(additionalSupporters);$new.hide(),$badges.append($new),$new.slideDown()}},error:function(err){}})},loadLeaderboard=function(){var fundId=GFM.analytics.data.fund_id;$.ajax({url:"/mvc.php?route=donateajax/getLeaderboardHtmlContent",type:"GET",dataType:"json",data:{fundId:fundId},success:function(data,textStatus,jqXHR){if(null!=data&&"object"==typeof data&&data.hasOwnProperty("leaderboardHTML")){var $leaderboard=$(data.leaderboardHTML),$badges=$leaderboard.find(".supporters-list");$badges.hide(),$("#jsLeaderboardFromAjax").replaceWith($leaderboard),$badges.slideDown(),GFM.donateVariables.shouldShowClaimYourShare&&($("#claim-your-share-leaderboard").slideDown(),$("#claim-share-fb-login-leaderboard").on("click",function(){Kit.Facebook.login(constructFBLoginOptions())}));var $showMoreButton=$("#js-show-more-leaderboard-supporters a");$showMoreButton.length&&$showMoreButton.on("click",{fundId:fundId,badges:$badges},loadMoreLeaderboardSupporters)}else null==data&&GFM.donateVariables.shouldShowClaimYourShare&&($("#claim-your-share-donations").slideDown(),$("#claim-share-fb-login-donations").on("click",function(){Kit.Facebook.login(constructFBLoginOptions())}))},error:function(err){}})};return{loadLeaderboard:loadLeaderboard}}(jQuery),$(document).ready(function(){$("#jsLeaderboardFromAjax").length>0&&GFM.responsiveCampaign.campaignLeaderboard.loadLeaderboard()});var GFM=window.GFM||{};GFM.utils=GFM.utils||{},GFM.utils.modalBehaviors=GFM.utils.modalBehaviors||{},GFM.utils.modalBehaviors.open=function(elSelector){var $modalEl=$(elSelector).eq(0);Foundation.MediaQuery.atLeast("large")?$modalEl.removeClass("gfm-modal--full"):$modalEl.addClass("gfm-modal--full"),$modalEl.foundation("open")},GFM.utils.modalBehaviors.animatePanelIn=function(orbitId,newPanelSelector,panelWidth){var $orbit=$(orbitId),$newPanel=$orbit.find(newPanelSelector);$newPanel.css({width:panelWidth+"px"}),$orbit.foundation("changeSlide",!0,$newPanel,1),setTimeout(function(){$newPanel.css({width:""})},250)},$(function(){var updateWidgetModal=function(){var imageVal=$("#widget-show-image")[0].checked?"1":"0",coinfoVal=$("#widget-show-coinfo")[0].checked?"1":"0",embedCode="<iframe class='gfm-media-widget' image='"+imageVal+"' coinfo='"+coinfoVal+"' width='100%' height='100%' frameborder='0' id='"+GFM.donateVariables.fundUrl+"'></iframe><script src='//funds."+GFM_DOMAIN+"/js/5.0/media-widget.js'></";embedCode+="script>",$("#embed-code")[0].value=embedCode;var iframeSrc="//www."+GFM_DOMAIN+"/mvc.php?route=widgets/mediawidget&fund="+GFM.donateVariables.fundUrl+"&image="+imageVal+"&coinfo="+coinfoVal+"&preview=1";$("#widget-preview")[0].src=iframeSrc};jQuery.fn.selectText=function(){this.find("input").each(function(){0!==$(this).prev().length&&$(this).prev().hasClass("p_copy")||$('<p class="p_copy" style="position: absolute; z-index: -1;"></p>').insertBefore($(this)),$(this).prev().html($(this).val())});var doc=document,element=this[0];if(doc.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(element),range.select()}else if(window.getSelection){var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range)}},$(".js-click-to-copy").on("touchstart click",function(e){var el=$(this)[0];"INPUT"===el.tagName?el.setSelectionRange(0,this.value.length):el.selectText()}),$(document).on("click","[data-open-modal]",function(e){var elementId=$(this).data("open-modal");elementId&&(e.preventDefault(),GFM.utils.modalBehaviors.open("#"+elementId))}),$("#close-more-ways-to-share").click(function(){$("#copy-link").show(),$("#widget-modal-body").hide(),$("#spread-the-word").show()}),$("#embed-widget").click(function(){updateWidgetModal(),$("#copy-link").slideToggle(),$("#widget-modal-body").slideToggle(),$("#spread-the-word").slideToggle()}),$("#widget-show-image,#widget-show-coinfo").click(function(){updateWidgetModal()}),$(".facheckbox").click(function(){$(".facheckbox").toggleClass("ischecked")}),$(".gfm-modal").on("open.zf.reveal",function(){$(".alert").hide();var _this=$(this);GFM.utils.userAgentUtils.isIOS()&&($(document).on("touchmove.disableScrolling",function(ev){ev.preventDefault()}),setTimeout(function(){var oldTop=$(window).scrollTop();$(window).data("scrollPosition",oldTop),$("body").css("overflow","hidden"),$("body").css("position","fixed"),$(".donate-btn-contain").hide(),$(document).off("touchmove.disableScrolling"),_this.css("-webkit-transition","100000000ms")},501))}),$(".gfm-modal").on("closed.zf.reveal",function(){GFM.utils.userAgentUtils.isIOS()&&($("body").css("overflow","auto"),$("body").css("position","static"),window.scrollTo(0,$(window).data("scrollPosition")),$(".donate-btn-contain").show())}),$(".show-initial").length&&GFM.utils.modalBehaviors.open(".show-initial"),$(".gfm-modal-unstyled-wrapper").length&&$(".gfm-modal-unstyled-wrapper").parent("div").addClass("reveal-overlay--flex"),$(".gfm-modal-unstyled-wrapper").on("open.zf.reveal",function(){var _this=$(this);_this.parent("div").css("display","flex"),$("#nav-menu-search-icon").addClass("hide")}),$(".gfm-modal-unstyled-wrapper").on("closed.zf.reveal",function(){$("#nav-menu-search-icon").removeClass("hide")})}),$(function(){$("#js-manage-anonymity-submit").on("click",function(e){var state=$(this).data("value")||0,encryptedId=$(this).data("encryptedId")||"",url="/mvc.php?route=donate/makeanonymous";$(this).prop("disabled",!0),$("alert").hide(),$(".anonymity-error").hide(),e.preventDefault(),$.post({url:url,async:!0,data:{d:encryptedId,state:state},success:function(response){if("OK"===response){var containerWidth=$("#js-manage-anonymity-orbit").width();GFM.utils.modalBehaviors.animatePanelIn("#js-manage-anonymity-orbit",".js-success-panel-contain",containerWidth),$(".js-make-anonymous-enter-text").slideUp(function(){$(".js-make-anonymous-success-text").slideDown()})}else $(".anonymity-error").show(),GFM.utils.animationUtils.scrollElementTop($("#make-anonymous-state-modal")),$("#js-manage-anonymity-submit").prop("disabled",!1)}})})}),$(function(){$("#js-cancel-recurring-submit").click(function(e){var recurringId=GFM.donateVariables.recurringId,url="/mvc.php?route=donate/cancelrecurring&d="+recurringId;e.preventDefault(),$("alert").hide(),$(".cancel-recurring-error").hide(),$(this).prop("disabled",!0),$.ajax({url:url,type:"GET",async:!0,success:function(response){var containerWidth=$("#js-cancel-recurring-orbit").width();GFM.utils.modalBehaviors.animatePanelIn("#js-cancel-recurring-orbit",".js-success-panel-contain",containerWidth),$(".js-cancel-recurring-enter-text").slideUp(function(){$(".js-cancel-recurring-success-text").slideDown()})},error:function(jqXHR,textStatus,errorThrown){$("#js-cancel-recurring-submit").prop("disabled",!1);var message=jqXHR.responseJSON.message;message&&$(".cancel-recurring-error").text(message),$(".cancel-recurring-error").show(),GFM.utils.animationUtils.scrollElementTop($("#cancel-recurring-state-modal"))}})})}),$(function(){function validateFields(){var allFieldsValid=!0,$inputFields=$(".contact-organizer-form").children("input,textarea").not("input:hidden");$inputFields.each(function(){$(this).hasClass("invalid")&&$(this).removeClass("invalid")}),$inputFields.each(function(){$(this).val()||(allFieldsValid=!1,$(this).addClass("invalid"))});var email=$('input[name="Contact[email]"]').val();return GFM.utils.stringUtils.validateEmail(email)?allFieldsValid:($(".email-invalid-error").show(),GFM.utils.animationUtils.scrollElementTop($("#contact-organizer-modal")),!1)}function handleSubmit(){if($(".alert").hide(),validateFields()){if(!GFM.utils.originUtils.validOrigin($(".contact-organizer-form")))return void $("#js-contact-organizer-orbit").foundation("changeSlide",!0,$("#done-with-contact"),1);$(this).addClass("hide"),$("#js-contact-organizer-send-loading").removeClass("hide");var contactUrl="/mvc.php?route=donate/postcontact&url="+GFM.donateVariables.fundUrl,dataStr=$(".contact-organizer-form").serialize();$.ajax({url:contactUrl,type:"POST",data:dataStr,success:function(html){var containerWidth=$("#js-contact-organizer-orbit").width();GFM.utils.modalBehaviors.animatePanelIn("#js-contact-organizer-orbit",".js-success-panel-contain",containerWidth),GFM.utils.animationUtils.scrollElementTop($("#contact-organizer-modal")),$(".js-co-success-text").slideDown()}})}}$(window).resize(function(){"txt-contact-organizer-message"===document.activeElement.id&&GFM.utils.userAgentUtils.isAndroid()&&GFM.utils.animationUtils.scrollContainerTo($("#contact-organizer-modal"),$("#txt-contact-organizer-message"))}),$(".js-contact-organizer-send").click(handleSubmit).keypress(function(ev){var enterKeyCode=13;ev.keyCode===enterKeyCode&&handleSubmit.call(this)})}),$(function(){$("#js-save-comment").click(function(){var $modal=$("#edit-comment-state-modal"),encryptedDonationId=$modal.data("ecdid"),encryptedFundId=$modal.data("ecfid"),$textarea=$("#edit-comment-text"),text=$textarea.val().replace(/<\/?[^>]+(>|$)/g,"");return $("#edit-comment-text").val()?GFM.utils.originUtils.validOrigin()?($(".alert").hide(),$(this).prop("disabled",!0),void $.ajax({url:"/mvc.php?route=donate/editcomment",type:"POST",data:{did:encryptedDonationId,fid:encryptedFundId,text:text},success:function(data){if(data.success){var containerWidth=$("#js-edit-comment-orbit").width();GFM.utils.modalBehaviors.animatePanelIn("#js-edit-comment-orbit",".js-success-panel-contain",containerWidth),$(".js-edit-comment-success-text").slideDown()}else $("#js-save-comment").prop("disabled",!1),$(".edit-comment-error").show()},error:function(jqXHR,textStatus,errorThrown){}})):void $("#js-edit-comment-orbit").foundation("changeSlide",!0,$("#done-with-edit-comment"),1):($(".edit-comment-error").show(),void GFM.utils.animationUtils.scrollElementTop($("#edit-comment-state-modal")))})}),GFM.campaignAnalytics=GFM.campaignAnalytics||{},$(function(){var $mainCtaContain=$(".js-static-cta-contain, .js-large-cta-contain"),$storyUpdatesTabs=$("#campaignStoryContent"),$storyContain=$("#story"),$updatesContain=$("#updates"),$shareButtonsContain=$(".js-share-contain"),$donationsDropdown=$(".js-dropdown-donations"),$donationsContain=$(".js-donations-contain"),$commentsDropdown=$(".js-dropdown-comments"),$commentsEntryContain=$(".js-comment-entry-contain, .js-content-entry-contain"),$commentsContain=$(".js-comments-contain, .js-contents-contain"),$contentContain=$(".js-contents-contain"),$wishlistContain=$(".js-wishlist-contain"),$rewardLevelsContain=$(".js-reward-levels-contain"),$leaderboardContain=$(".js-leaderboard-contain"),$shareMoreModal=$("#more-ways-to-share-modal"),$subscribeModal=$("#subscribe-updates-modal"),$contactOrganizerModal=$("#contact-organizer-modal"),$likeLoginModal=$("#like-login-modal"),$notReadyModal=$("#notready-state-modal"),$manageAnonymityModal=$("#make-anonymous-state-modal"),$cancelRecurringModal=$("#cancel-recurring-state-modal"),$editCommentModal=$("#edit-comment-state-modal"),$shareUpsellModal=$("#share-upsell-modal"),mpViewIds={main:"pg_donate_index",shareMoreOL:"ol_donate_sharemore",subscribeOL:"ol_donate_subscribe",contactOrgOL:"ol_donate_contactorganizer",likeOL:"ol_donate_likecampaign",notReadyOL:"ol_donate_notready",manageAnonymityOL:"ol_donate_manageanonymity",cancelRecurringOL:"ol_donate_cancelrecurring",editCommentOL:"ol_donate_editcomment",shareUpsellOL:"ol_donate_shareupsell",exitBannerOL:"ol_donate_exitbannerfb"},redshiftClickTrack=function($element,overlayViewId){var trackOptions={};overlayViewId&&(trackOptions.viewid=overlayViewId),$element.data("gfmAnalyticsElement")&&(trackOptions.elementid=$element.data("gfmAnalyticsElement")),$element.data("gfmAnalyticsMeta")&&(trackOptions.elementmeta=$element.data("gfmAnalyticsMeta")),GFM.analytics.track_event("mp_page_click",trackOptions)},redshiftViewTrack=function(viewId){var trackOptions={viewid:viewId};GFM.analytics.track_event("mp_page_view",trackOptions)};$mainCtaContain.on("click","[data-gfm-analytics-element]",function(){redshiftClickTrack($(this))}),$(".campaign-img-contain").find(".js-heart").on("click",function(){redshiftClickTrack($(this))}),$updatesContain.on("click",".js-heart",function(){redshiftClickTrack($(this))}),$donationsContain.on("click",".js-heart",function(){redshiftClickTrack($(this))}),$commentsContain.on("click",".js-heart",function(){redshiftClickTrack($(this))}),$storyUpdatesTabs.on("click",".tabs-title",function(){redshiftClickTrack($(this))}),$storyContain.on("click",".js-select-updates",function(){redshiftClickTrack($(this))}),$updatesContain.on("click",".js-pagination-reveal",function(){redshiftClickTrack($(this))}),$updatesContain.on("click",".js-pagination-link",function(){redshiftClickTrack($(this))}),$shareButtonsContain.on("click",".js-share-to-facebook",function(){redshiftClickTrack($(this))}),$shareButtonsContain.on("click",".js-share-twitter",function(){redshiftClickTrack($(this))}),$shareButtonsContain.on("click",".js-share-linkedin",function(){GFM.gaEventTracking.trackLIFG("share on linkedin clicked","s_m_lifg"),redshiftClickTrack($(this))}),$shareButtonsContain.on("click",".js-share-email",function(){redshiftClickTrack($(this))}),$shareButtonsContain.on("click",".js-share-more-ways",function(){redshiftClickTrack($(this))}),$(".js-subscribe-to-updates").on("click",function(){redshiftClickTrack($(this))}),$(".js-contact-organizer-open").on("click",function(){redshiftClickTrack($(this))}),$(".js-category-link").on("click",function(){redshiftClickTrack($(this))}),$(".js-profile-avatar").on("click",function(){redshiftClickTrack($(this))}),$(".js-profile-co").on("click",function(){redshiftClickTrack($(this))}),$donationsContain.on("click",".js-seefriendssupport-fbconnect-btn",function(){redshiftClickTrack($(this))}),$donationsDropdown.on("click",".js-sort-link",function(){redshiftClickTrack($(this))}),$donationsContain.on("click",".js-load-more",function(){redshiftClickTrack($(this))}),$donationsContain.on("click",".js-profile-donor",function(){redshiftClickTrack($(this))}),$leaderboardContain.on("click",".js-leaderboard-supporter-link",function(){redshiftClickTrack($(this))}),$commentsDropdown.on("click",".js-sort-link",function(){redshiftClickTrack($(this))}),$commentsContain.on("click",".js-load-more",function(){redshiftClickTrack($(this))}),$commentsEntryContain.on("click",".js-show-comment-trigger",function(){redshiftClickTrack($(this))}),$commentsEntryContain.on("click",".js-post-comment",function(){redshiftClickTrack($(this))}),$commentsEntryContain.on("click","textarea, .js-add-media",function(){redshiftClickTrack($(this))}),$commentsEntryContain.on("click",".js-remove-media",function(){redshiftClickTrack($(this))}),$commentsContain.on("click",".js-comments-content-media",function(){redshiftClickTrack($(this))}),$contentContain.on("click",".read-more",function(){var thisContent=$(this).closest(".js-comment-content"),ugcId=thisContent.data("id"),contentIndex=thisContent.index(),mediaNumber=thisContent.find(".js-media").first().find("img").length;GFM.analytics.track_event("mp_page_click",{elementId:"btn_content_read_more",gfm:{ugc_id:ugcId,media_number:mediaNumber,ugc_index:contentIndex}})}),$commentsContain.on("click",".js-profile-ugc",function(){redshiftClickTrack($(this))}),$wishlistContain.on("click","[data-gfm-analytics-element]",function(){redshiftClickTrack($(this))}),$rewardLevelsContain.on("click","[data-gfm-analytics-element]",function(){redshiftClickTrack($(this))}),$(".js-report-campaign").on("click",function(){redshiftClickTrack($(this))}),$(".js-faq-link").on("click",function(){redshiftClickTrack($(this))}),$shareMoreModal.on("open.zf.reveal",function(){redshiftViewTrack(mpViewIds.shareMoreOL)}),$shareMoreModal.on("click",".js-share-sms",function(){redshiftClickTrack($(this),mpViewIds.shareMoreOL)}),$shareMoreModal.on("click","#embed-widget",function(){redshiftClickTrack($(this),mpViewIds.shareMoreOL)}),$shareMoreModal.on("click",".js-print-campaign-sign",function(){redshiftClickTrack($(this),mpViewIds.shareMoreOL)}),$subscribeModal.on("open.zf.reveal",function(){redshiftViewTrack(mpViewIds.subscribeOL)}),$subscribeModal.on("click","#js-fb-follow-campaign",function(){redshiftClickTrack($(this),mpViewIds.subscribeOL)}),$contactOrganizerModal.on("open.zf.reveal",function(){redshiftViewTrack(mpViewIds.contactOrgOL)}),$contactOrganizerModal.on("click",".js-contact-organizer-send",function(){redshiftClickTrack($(this),mpViewIds.contactOrgOL)}),$likeLoginModal.on("open.zf.reveal",function(){redshiftViewTrack(mpViewIds.likeOL)}),GFM.campaignAnalytics.fbFavoriteTrack=function($element){redshiftClickTrack($element,mpViewIds.likeOL)},$likeLoginModal.on("click","#js-email-favorite",function(){redshiftClickTrack($(this),mpViewIds.likeOL)}),$notReadyModal.hasClass("show-initial")&&redshiftViewTrack(mpViewIds.notReadyOL),$manageAnonymityModal.hasClass("show-initial")&&redshiftViewTrack(mpViewIds.manageAnonymityOL),$manageAnonymityModal.find("#js-manage-anonymity-submit").on("click",function(){redshiftClickTrack($(this),mpViewIds.manageAnonymityOL)}),$cancelRecurringModal.hasClass("show-initial")&&redshiftViewTrack(mpViewIds.cancelRecurringOL),$cancelRecurringModal.find("#js-cancel-recurring-submit").on("click",function(){redshiftClickTrack($(this),mpViewIds.cancelRecurringOL)}),$cancelRecurringModal.find("#js-continue-recurring-submit").on("click",function(){redshiftClickTrack($(this),mpViewIds.cancelRecurringOL)}),$editCommentModal.hasClass("show-initial")&&redshiftViewTrack(mpViewIds.editCommentOL),$editCommentModal.find("#js-save-comment").on("click",function(){redshiftClickTrack($(this),mpViewIds.editCommentOL)}),$shareUpsellModal.hasClass("show-initial")&&(GFM.gaEventTracking.trackPostShareUpsell("viewed post-share upsell screen"),redshiftViewTrack(mpViewIds.shareUpsellOL)),$shareUpsellModal.find("#js-upsell-donate-btn").on("click",function(){GFM.gaEventTracking.trackPostShareUpsell("clicked post-share upsell button"),redshiftClickTrack($(this),mpViewIds.shareUpsellOL)}),$(".js-harvey-banner-div").on("click","[data-gfm-analytics-element]",function(){redshiftClickTrack($(this))})});var facebookVideo={checkFBInit:function(){setTimeout(function(){"undefined"!=typeof FB&&null!==FB?facebookVideo.subscribe():facebookVideo.checkFBInit()},100)},subscribe:function(){FB.Event.subscribe("xfbml.ready",function(msg){"video"===msg.type&&($(".js-default_picture_fb_video").hide(),$(".fb-video").show(),$(".fb-video").closest(".iframe-wrapper").show())})}};$(document).ready(function(){facebookVideo.checkFBInit()});var GFM=GFM||{};GFM.responsiveCampaign=GFM.responsiveCampaign||{},GFM.responsiveCampaign.bubbleDonations=function($){var bubbledDonations=[],bubbledDonationsVisible=!1,bubbleDonation=function(donationId,donationHtml){bubbledDonationsVisible=!0,bubbledDonations.push(donationId),suppressDonationInDonationFeed(donationId),$(".showcontrol-donations .supporters-list").prepend(donationHtml);var $new=$('.showcontrol-donations > .supporters-list div[data-id="'+donationId+'"]'),triggerData={$newPages:$new},$donations=$(".js-donations-contain");$donations.trigger("paging.additionalPagesLoaded.donations",triggerData)},removeBubbledDonations=function(){bubbledDonationsVisible=!1,bubbledDonations=[],$(".js-donation-feed-bubbled").remove(),$(".js-donation-feed-suppress").removeClass("js-donation-feed-suppress")},suppressDonationInDonationFeed=function(donationId,jQueryContext){$('div[data-id="'+donationId+'"]',jQueryContext).addClass("js-donation-feed-suppress")},suppressAlreadyBubbledDonationsOnLoadMoreDonations=function($newDonations){if(bubbledDonationsVisible===!0)for(var i=0;i<bubbledDonations.length;i++)suppressDonationInDonationFeed(bubbledDonations[i],$newDonations)};return{bubbledDonations:bubbledDonations,bubbleDonation:bubbleDonation,removeBubbledDonations:removeBubbledDonations,suppressDonationInDonationFeed:suppressDonationInDonationFeed,suppressAlreadyBubbledDonationsOnLoadMoreDonations:suppressAlreadyBubbledDonationsOnLoadMoreDonations}}(jQuery),function(GFM,$,RSVP){"use strict";function getDonorDonationCount(donationIds){var donationIdsString=donationIds.join(","),url="/mvc.php?route=person_profile/donorDonationCount&dids="+donationIdsString;return new RSVP.Promise(function(resolve,reject){$.getJSON(url,resolve)},"Donation Count")}function setDonorAvatarBadge(donationCounts){$(".js-donations-contain .js-donation-content").each(function(index){var $el=$(this),donationId=$el.data("id"),donorName=$el.find(".supporter-name").first().text(),donorFirstName=donorName.split(" ")[0];if(donationCounts[donationId]&&donationCounts[donationId]>2){var donationCount=donationCounts[donationId],htmlToInsert='<div class="badge badge-overlay">'+(donationCount>99?"99+":donationCount)+"</div>";htmlToInsert+='<div class="tooltip tooltip-avatar">'+_t("{donorFirstName} has donated {donationCount} times on GoFundMe",[{donorFirstName:donorFirstName,donationCount:donationCount}])+"</div>",$el.children(".js-profile-avatar").first().append(htmlToInsert)}})}$(document).ready(function(){var firstBatchDonationIds=GFM.donateVariables.firstBatchDonationIds,shouldShowDonationCountBadges=GFM.donateVariables.shouldShowDonationCountBadges;!shouldShowDonationCountBadges||firstBatchDonationIds.length<1||getDonorDonationCount(firstBatchDonationIds).then(function(data){data.success&&setDonorAvatarBadge(data.donationCounts)})["catch"](function(err){})})}(GFM,jQuery,RSVP);var GFM=window.GFM||{};GFM.teamsFacepile=GFM.teamsFacepile||{},$(function(){function getTeamMembers(fundUrl){return $.ajax({url:"//api."+GFM_DOMAIN+"/campaign/v1/campaign/"+fundUrl+"/teammembers",async:!0,type:"GET",xhrFields:{withCredentials:!0}})}function buildUserAvatar(facebookId,initials){var $el=$('<div class="avatar-contain flex-shrink"></div>');return facebookId?$el.append('<img class="thumbnail media-round cursor-pointer" src="https://graph.facebook.com/'+facebookId+'/picture?width=120&height=120" alt="" data-open="team-members-modal">'):$el.append('<div class="avatar-no-pic media-round thumbnail cursor-pointer" data-open="team-members-modal">'+initials+"</div>"),$el}function buildUserAvatarRow(){return $('<div class="teams-badge-facepile-row"></div>')}function buildTextAvatar(text){return $('<a class="avatar-contain flex-shrink"><div class="avatar-no-pic media-round thumbnail" data-open="team-members-modal"><strong>'+text+"</strong></div></a>")}function buildEmptyAvatar(){return $('<div class="avatar-contain flex-shrink"></div>')}function getInitials(firstName,lastName){var firstNameInitial=firstName?firstName[0].toUpperCase():"",lastNameInitial=lastName?lastName[0].toUpperCase():"";return firstNameInitial+lastNameInitial}function buildFacepile(containSelector,teamMemberObjects,isMobile){var $facepileRow,numRows=isMobile?MOBILE_AVATAR_ROWS_LIMIT:DESKTOP_AVATAR_ROWS_LIMIT,numColumns=isMobile?MOBILE_AVATAR_COLUMNS_LIMIT:DESKTOP_AVATAR_COLUMNS_LIMIT,facepileLimit=numRows*numColumns-1,faceAvatarsToBuild=Math.min(facepileLimit,teamMemberObjects.length),overflow=teamMemberObjects.length-facepileLimit,$facepileContain=$(containSelector);$facepileContain.empty();for(var i=0;i<faceAvatarsToBuild;i++){var item=teamMemberObjects[i];i%numColumns===0&&($facepileRow=buildUserAvatarRow(),$facepileContain.append($facepileRow)),$facepileRow.append(buildUserAvatar(item.facebook_id,getInitials(item.first_name,item.last_name)))}overflow>0?$facepileRow.append(buildTextAvatar("+"+overflow)):$facepileRow.append(buildTextAvatar("..."));for(var facepileIndex=$facepileRow.children().length;facepileIndex<numColumns;facepileIndex++)$facepileRow.append(buildEmptyAvatar())}function buildAllFacepiles(selectors,teamMemberObjects,isMobile){$(selectors).each(function(){buildFacepile(this,teamMemberObjects,isMobile)})}function getModalMemberNameText(firstName,lastName,amount,isCO){var nameText="";return nameText=isCO&&amount>0?_t("{firstName} {lastName} (Organizer)",[{firstName:firstName,lastName:lastName}]):_t("{firstName} {lastName}",[{firstName:firstName,
lastName:lastName}])}function getModalMemberStatusText(amount,numDonations,isCO){return amount>0?_t("{currencyAmount} from {number} donations",[{currencyAmount:"$"+amount,number:numDonations}]):isCO?_t("Campaign Organizer"):_t("Team Member")}function buildModalMemberTextContent(firstName,lastName,amount,numDonations,isCO){var $textContent=$('<div class="column team-member-text-content underline pt pb"></div>');return $textContent.append('<div class="team-member-text-name">'+getModalMemberNameText(firstName,lastName,amount,isCO)+"</div>"),$textContent.append('<div class="team-member-text-status">'+getModalMemberStatusText(amount,numDonations,isCO)+"</div>"),$textContent}function buildModalMemberRow(memberObj,isCO){var $rowContain=$('<div class="team-member-contain flex-center small-collapse"></div>'),amount=memberObj.amount_raised,numDonations=memberObj.number_of_donations_attributed;return $rowContain.append(buildUserAvatar(memberObj.facebook_id,getInitials(memberObj.first_name,memberObj.last_name))),$rowContain.append(buildModalMemberTextContent(memberObj.first_name,memberObj.last_name,amount,numDonations,isCO)),$rowContain}function buildModalContents(contentSelector,teamMemberObjects){var $container=$(contentSelector);$container.empty(),teamMemberObjects.forEach(function(memberObj,index){var isCO=0===index;$container.append(buildModalMemberRow(memberObj,isCO))})}function init(fundUrl,campaignContainSelector,modalContainSelector){getTeamMembers(fundUrl).then(function(data){var teamMembers=data.references.team_members;buildAllFacepiles(campaignContainSelector,teamMembers,!Foundation.MediaQuery.atLeast("large")),buildModalContents(modalContainSelector,teamMembers),$(window).on("changed.zf.mediaquery",function(event,newSize,oldSize){var mobileSizes={small:!0,medium:!0},desktopSizes={large:!0,xlarge:!0,xxlarge:!0};mobileSizes.hasOwnProperty(newSize)&&desktopSizes.hasOwnProperty(oldSize)?buildAllFacepiles(campaignContainSelector,teamMembers,!0):desktopSizes.hasOwnProperty(newSize)&&mobileSizes.hasOwnProperty(oldSize)&&buildAllFacepiles(campaignContainSelector,teamMembers,!1)})}).fail(function(){})}var MOBILE_AVATAR_ROWS_LIMIT=1,MOBILE_AVATAR_COLUMNS_LIMIT=4,DESKTOP_AVATAR_ROWS_LIMIT=2,DESKTOP_AVATAR_COLUMNS_LIMIT=5;$(".js-facepile-contain").length&&init(GFM.donateVariables.fundUrl,".js-facepile-contain",".js-modal-team-contents")}),$(function(){function addCORole(){return $.ajax({url:"//api."+GFM_DOMAIN+"/co/v1/person/role/co",dataType:"json",data:{build_fund:!1},async:!0,type:"POST",xhrFields:{withCredentials:!0}})}function acceptInvite($btn,fundUrl,teamInvitationHash){return $.ajax({url:"//api."+GFM_DOMAIN+"/co/v1/funds/"+fundUrl+"/teaminvitations/"+teamInvitationHash+"/accept",async:!0,type:"POST",xhrFields:{withCredentials:!0},statusCode:{201:function(){$btn.find(".js-accept-team-invite-btn-text").html(_t("You have successfully joined this team.")),actionDisabled=!0,setTimeout(function(){location.reload(!0)},1500)},302:function(){$btn.find(".js-accept-team-invite-btn-text").html(_t("You are already a member of this team.")),actionDisabled=!0,setTimeout(function(){location.reload(!0)},1500)}}}).always(function(){$btn.find(".js-accept-team-invite-btn-loady").hide(),$btn.find(".js-accept-team-invite-btn-text").show()})}function getInviteLink(fundUrl,teamInvitationHash){return"https://"+GFM_DOMAIN+"/"+fundUrl+"?teamInvite="+teamInvitationHash}var actionDisabled=!1;$(document).on("click",".js-accept-team-invite-btn",function(){if(!actionDisabled){var $btn=$(this);$btn.find(".js-accept-team-invite-btn-loady").show(),$btn.find(".js-accept-team-invite-btn-text").hide(),GFM.donateVariables.currentLoginUserId?acceptInvite($btn,GFM.donateVariables.fundUrl,GFM.donateVariables.teamInvitationHash):addCORole().done(function(){acceptInvite($btn,GFM.donateVariables.fundUrl,GFM.donateVariables.teamInvitationHash)}).fail(function(xhr){403===xhr.status?acceptInvite($btn,GFM.donateVariables.fundUrl,GFM.donateVariables.teamInvitationHash):401===xhr.status?window.location="https://www."+GFM_DOMAIN+"/sign-in?alertKey=team_invitation&redirect="+encodeURIComponent(getInviteLink(GFM.donateVariables.fundUrl,GFM.donateVariables.teamInvitationHash)):($btn.find(".js-accept-team-invite-btn-loady").hide(),$btn.find(".js-accept-team-invite-btn-text").show(),$btn.find(".js-accept-team-invite-btn-text").html(_t("There was a problem joining this team. Please contact our support team for help.")))})}})}),GFM.harveyOnce=function(){var $divHarvey=$(".js-harvey-banner-div"),$closeHarvey=$(".js-close-harvey-banner"),init=function(){$divHarvey.find($closeHarvey).click(function(evt){$divHarvey.hide(),$.ajax({method:"POST",url:"//www."+GFM_DOMAIN+"/mvc.php?route=donate/closeHarvey",dataType:"json"})})};return{init:init}}(),$(function(){GFM.harveyOnce.init()});var GFM=GFM||{};GFM.components=GFM.components||{},GFM.components.fingerprint=GFM.components.fingerprint||function($){var fingerprintScripts=["//cdnjs.cloudflare.com/ajax/libs/fingerprintjs2/1.4.1/fingerprint2.min.js"],fingerprintsData={},fingerprintsJSON="",fingerprintTypeEnum={TYPE_FINGERPRINTJS2:0},getScripts=function(callback){var progress=0,internalCallback=function(){++progress==fingerprintScripts.length&&callback()};fingerprintScripts.forEach(function(script){$.getScript(script,internalCallback)})},getFingerprints=function(callback){getScripts(function(){(new Fingerprint2).get(function(result,components){fingerprintsData.fingerprints=[],fingerprintsData.fingerprints[fingerprintTypeEnum.TYPE_FINGERPRINTJS2]=result,fingerprintsData.userAgent=navigator.userAgent,fingerprintsJSON=JSON.stringify(fingerprintsData),callback&&callback()})})},setFields=function(){$(".gfm_idcode").val(fingerprintsData.fingerprints[fingerprintTypeEnum.TYPE_FINGERPRINTJS2]),$(".fingerprints").val(fingerprintsJSON)},setCookie=function(){document.cookie="fingerprints="+encodeURIComponent(fingerprintsJSON)+"; expires=0; path=/"};return{getFingerprints:getFingerprints,setFields:setFields,setCookie:setCookie}}(jQuery);